{"version":3,"file":"nodes.es.js","sources":["../../../../src/components/Tree/helpers/nodes.ts"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport { ReactElement } from 'react';\nimport { ROOT_ID } from './constants';\nimport { TreeState } from '../types';\n\nexport const removeReactNodesFromFlatArray = (tree: ReactElement[], nodeIds: string[]): ReactElement[] => {\n    // Create a set of the node IDs to remove for faster lookup\n    const nodesToRemove = new Set(nodeIds);\n\n    // Filter the tree array to remove the nodes with IDs in the set\n    return tree.filter((node) => !nodesToRemove.has(node.props.id));\n};\n\nexport const getReactNodeIdsInFlatArray = (tree: ReactElement[], startingNodeId: string): string[] => {\n    const nodeIds: string[] = [];\n\n    // Create a map from node IDs to their corresponding nodes\n    const nodeMap = new Map<string, ReactElement>(tree.map((node) => [node.props.id, node]));\n\n    // Find the node with the given id\n    const startingNode = nodeMap.get(startingNodeId);\n\n    if (startingNode) {\n        // Recursively find all child nodes\n        function findChildNodes(nodeId: number) {\n            const children = tree.filter((child) => child.props.parentId === nodeId);\n            for (const child of children) {\n                nodeIds.push(child.props.id);\n                findChildNodes(child.props.id);\n            }\n        }\n\n        findChildNodes(startingNode.props.id);\n    }\n\n    return nodeIds;\n};\n\nexport const getReactNodesInFlatArray = (tree: ReactElement[], startingNodeId: string): ReactElement[] => {\n    const nodes: ReactElement[] = [];\n\n    // Create a map from node IDs to their corresponding nodes\n    const nodeMap = new Map<string, ReactElement>(tree.map((node) => [node.props.id, node]));\n\n    // Find the node with the given id\n    const startingNode = nodeMap.get(startingNodeId);\n\n    if (startingNode) {\n        // Recursively find all child nodes\n        function findChildNodes(nodeId: number) {\n            const children = tree.filter((child) => child.props.parentId === nodeId);\n            for (const child of children) {\n                nodes.push(child);\n                findChildNodes(child.props.id);\n            }\n        }\n\n        findChildNodes(startingNode.props.id);\n    }\n\n    return nodes;\n};\n\nexport const getNodesToRender = (rootNodes: TreeState['rootNodes'], expandedIds: TreeState['expandedIds']) => {\n    const nodesToRender: { id: string; node: ReactElement }[] = [];\n    for (const node of rootNodes) {\n        const parentId = node.props.parentId;\n        if (\n            typeof parentId === 'string' &&\n            (parentId === ROOT_ID || (expandedIds.has(parentId) && nodesToRender.find((n) => n.id === parentId)))\n        ) {\n            nodesToRender.push({ id: node.props.id, node });\n        }\n    }\n\n    return nodesToRender.map((n) => n.node);\n};\n"],"names":["removeReactNodesFromFlatArray","tree","nodeIds","nodesToRemove","node","getReactNodeIdsInFlatArray","startingNodeId","startingNode","findChildNodes","nodeId","children","child","getReactNodesInFlatArray","nodes","getNodesToRender","rootNodes","expandedIds","nodesToRender","parentId","ROOT_ID","n"],"mappings":";AAMa,MAAAA,IAAgC,CAACC,GAAsBC,MAAsC;AAEhG,QAAAC,IAAgB,IAAI,IAAID,CAAO;AAG9B,SAAAD,EAAK,OAAO,CAACG,MAAS,CAACD,EAAc,IAAIC,EAAK,MAAM,EAAE,CAAC;AAClE,GAEaC,IAA6B,CAACJ,GAAsBK,MAAqC;AAClG,QAAMJ,IAAoB,CAAA,GAMpBK,IAHU,IAAI,IAA0BN,EAAK,IAAI,CAACG,MAAS,CAACA,EAAK,MAAM,IAAIA,CAAI,CAAC,CAAC,EAG1D,IAAIE,CAAc;AAE/C,MAAIC,GAAc;AAEL,QAAAC,IAAT,SAAwBC,GAAgB;AAC9B,YAAAC,IAAWT,EAAK,OAAO,CAACU,MAAUA,EAAM,MAAM,aAAaF,CAAM;AACvE,iBAAWE,KAASD;AACR,QAAAR,EAAA,KAAKS,EAAM,MAAM,EAAE,GACZH,EAAAG,EAAM,MAAM,EAAE;AAAA,IACjC;AAGW,IAAAH,EAAAD,EAAa,MAAM,EAAE;AAAA,EACxC;AAEO,SAAAL;AACX,GAEaU,IAA2B,CAACX,GAAsBK,MAA2C;AACtG,QAAMO,IAAwB,CAAA,GAMxBN,IAHU,IAAI,IAA0BN,EAAK,IAAI,CAACG,MAAS,CAACA,EAAK,MAAM,IAAIA,CAAI,CAAC,CAAC,EAG1D,IAAIE,CAAc;AAE/C,MAAIC,GAAc;AAEL,QAAAC,IAAT,SAAwBC,GAAgB;AAC9B,YAAAC,IAAWT,EAAK,OAAO,CAACU,MAAUA,EAAM,MAAM,aAAaF,CAAM;AACvE,iBAAWE,KAASD;AAChB,QAAAG,EAAM,KAAKF,CAAK,GACDH,EAAAG,EAAM,MAAM,EAAE;AAAA,IACjC;AAGW,IAAAH,EAAAD,EAAa,MAAM,EAAE;AAAA,EACxC;AAEO,SAAAM;AACX,GAEaC,IAAmB,CAACC,GAAmCC,MAA0C;AAC1G,QAAMC,IAAsD,CAAA;AAC5D,aAAWb,KAAQW,GAAW;AACpB,UAAAG,IAAWd,EAAK,MAAM;AAC5B,IACI,OAAOc,KAAa,aACnBA,MAAaC,KAAYH,EAAY,IAAIE,CAAQ,KAAKD,EAAc,KAAK,CAACG,MAAMA,EAAE,OAAOF,CAAQ,MAElGD,EAAc,KAAK,EAAE,IAAIb,EAAK,MAAM,IAAI,MAAAA,GAAM;AAAA,EAEtD;AAEA,SAAOa,EAAc,IAAI,CAACG,MAAMA,EAAE,IAAI;AAC1C;"}