"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const M=require("immer"),p=require("react"),vn=require("mitt"),l=require("sinon");var st=(e=>(e.External="EXTERNAL",e.Internal="INTERNAL",e))(st||{}),Tn=(e=>(e.TextAndIcon="ICON_TEXT",e.IconOnly="ICON",e.TextOnly="TEXT",e))(Tn||{}),Cn=(e=>(e.Right="RIGHT",e.Left="LEFT",e))(Cn||{}),at=(e=>(e.Everyone="EVERYONE",e.Editor="EDITOR",e))(at||{}),o=(e=>(e.Aac="aac",e.Ac3="ac3",e.Ai="ai",e.Aif="aif",e.Aifc="aifc",e.Aiff="aiff",e.Artboard="artboard",e.Asc="asc",e.Atom="atom",e.Au="au",e.Avi="avi",e.Bcpio="bcpio",e.Bin="bin",e.Bmp="bmp",e.Cdf="cdf",e.Cgm="cgm",e.Class="class",e.Cpio="cpio",e.Cpt="cpt",e.Csh="csh",e.Css="css",e.Dcr="dcr",e.Dif="dif",e.Dir="dir",e.Djv="djv",e.Djvu="djvu",e.Dll="dll",e.Dmg="dmg",e.Dms="dms",e.Dng="dng",e.Doc="doc",e.Docx="docx",e.Dotx="dotx",e.Docm="docm",e.Dotm="dotm",e.Dtd="dtd",e.Dv="dv",e.Dvi="dvi",e.Dxr="dxr",e.Eps="eps",e.Etx="etx",e.Exe="exe",e.Ez="ez",e.Flac="flac",e.Flv="flv",e.Gif="gif",e.Gram="gram",e.Grxml="grxml",e.Gtar="gtar",e.Hdf="hdf",e.Heif="heif",e.Hqx="hqx",e.Htm="htm",e.Html="html",e.Ice="ice",e.Ico="ico",e.Ics="ics",e.Idml="idml",e.Ief="ief",e.Ifb="ifb",e.Iges="iges",e.Igs="igs",e.Indd="indd",e.Indt="indt",e.Jnlp="jnlp",e.Jp2="jp2",e.Jpe="jpe",e.Jpeg="jpeg",e.Jpg="jpg",e.Js="js",e.Kar="kar",e.Latex="latex",e.Lha="lha",e.Lzh="lzh",e.M3u="m3u",e.M4a="m4a",e.M4b="m4b",e.M4p="m4p",e.M4r="m4r",e.M4u="m4u",e.M4v="m4v",e.Mac="mac",e.Man="man",e.Mathml="mathml",e.Me="me",e.Mesh="mesh",e.Mid="mid",e.Midi="midi",e.Mif="mif",e.Mkv="mkv",e.Mov="mov",e.Movie="movie",e.Mp2="mp2",e.Mp3="mp3",e.Mp4="mp4",e.Mpe="mpe",e.Mpeg="mpeg",e.Mpg="mpg",e.Mpga="mpga",e.Ms="ms",e.Msh="msh",e.Mts="mts",e.Mxu="mxu",e.Nc="nc",e.Oda="oda",e.Ogg="ogg",e.Pbm="pbm",e.Pct="pct",e.Pdb="pdb",e.Pdf="pdf",e.Pgm="pgm",e.Pgn="pgn",e.Pic="pic",e.Pict="pict",e.Png="png",e.Pnm="pnm",e.Pnt="pnt",e.Pntg="pntg",e.Ppm="ppm",e.Ppt="ppt",e.Pptx="pptx",e.Potx="potx",e.Ppsx="ppsx",e.Ppam="ppam",e.Pptm="pptm",e.Potm="potm",e.Ppsm="ppsm",e.Ps="ps",e.Psd="psd",e.Qt="qt",e.Qti="qti",e.Qtif="qtif",e.Ra="ra",e.Ram="ram",e.Ras="ras",e.Rdf="rdf",e.Rgb="rgb",e.Rm="rm",e.Roff="roff",e.Rtf="rtf",e.Rtx="rtx",e.Sgm="sgm",e.Sgml="sgml",e.Sh="sh",e.Shar="shar",e.Silo="silo",e.Sit="sit",e.Skd="skd",e.Sketch="sketch",e.Skm="skm",e.Skp="skp",e.Skt="skt",e.Smi="smi",e.Smil="smil",e.Snd="snd",e.So="so",e.Spl="spl",e.Src="src",e.Sv4cpio="sv4cpio",e.Sv4crc="sv4crc",e.Svg="svg",e.Swf="swf",e.T="t",e.Tar="tar",e.Tcl="tcl",e.Tex="tex",e.Texi="texi",e.Texinfo="texinfo",e.Tif="tif",e.Tiff="tiff",e.Tr="tr",e.Tsv="tsv",e.Txt="txt",e.Ustar="ustar",e.Vcd="vcd",e.Vrml="vrml",e.Vxml="vxml",e.Wav="wav",e.Wbmp="wbmp",e.Wbmxl="wbmxl",e.Webm="webm",e.Webp="webp",e.Wml="wml",e.Wmlc="wmlc",e.Wmls="wmls",e.Wmlsc="wmlsc",e.Wmv="wmv",e.Wrl="wrl",e.Xbm="xbm",e.Xht="xht",e.Xhtml="xhtml",e.Xls="xls",e.Xml="xml",e.Xpm="xpm",e.Xsl="xsl",e.Xlsx="xlsx",e.Xltx="xltx",e.Xlsm="xlsm",e.Xltm="xltm",e.Xlam="xlam",e.Xlsb="xlsb",e.Xslt="xslt",e.Xul="xul",e.Xwd="xwd",e.Xyz="xyz",e.Zip="zip",e.Tpl="tpl",e))(o||{});const Kr={Audio:[o.Aac,o.Ac3,o.Aif,o.Aifc,o.Aiff,o.Flac,o.M4a,o.M4r,o.Mp3,o.Ogg,o.Wav],Documents:[o.Doc,o.Docx,o.Dotx,o.Pdf,o.Potx,o.Ppt,o.Pptx,o.Xls,o.Xlsx,o.Xltx],Images:[o.Ai,o.Bmp,o.Dng,o.Eps,o.Gif,o.Heif,o.Ico,o.Jpeg,o.Jpg,o.Png,o.Psd,o.Svg,o.Tif,o.Tiff,o.Webp],Videos:[o.Avi,o.Flv,o.M4v,o.Mkv,o.Mov,o.Mp4,o.Mpg,o.Mts,o.Webm,o.Wmv],Templates:[o.Artboard,o.Idml,o.Indd,o.Indt,o.Sketch]};var _n=(e=>(e.Audio="audio",e.Documents="documents",e.Images="images",e.Videos="videos",e.Templates="templates",e))(_n||{});const Wr={block:"BLOCK",section:"SECTION",page:"PAGE",color:"COLOR"};var Pn=(e=>(e.OpenModal="onOpenModal",e.CloseModal="onCloseModal",e))(Pn||{}),it=(e=>(e.MediaLibrary="MediaLibrary",e.LogoLibrary="LogoLibrary",e.IconLibrary="IconLibrary",e.DocumentLibrary="DocumentLibrary",e.TemplateLibrary="TemplateLibrary",e.PatternLibrary="PatternLibrary",e.Styleguide="Styleguide",e.Workspace="Workspace",e))(it||{}),ct=(e=>(e.File="FILE",e.Canvas="CANVAS",e.ImageVideo="IMAGE",e.TextSnippet="TEXT_SNIPPET",e.Url="URL",e))(ct||{}),x=(e=>(e.CloseApp="closeApp",e.DeleteAppState="deleteAppState",e.GetAppState="getAppState",e.GetAssetById="getAssetById",e.GetProjectId="getProjectId",e.GetRefreshedThirdpartyOauth2Token="getRefreshedThirdpartyOauth2Token",e.GetThirdPartyOauth2Tokens="getThirdPartyOauth2Tokens",e.OpenAssetChooser="openAssetChooser",e.PostExternalAssets="postExternalAssets",e.PutAppState="putAppState",e.Init="Init",e))(x||{});const Xr=e=>{const t=a=>{const i=a.trim();return i.startsWith("rgba(")||i.startsWith("rgb(")},n=e.split("(")[1].split(")")[0].split(","),r=n.slice(0,2).every(a=>a.trim()===parseInt(a).toString());if(!t(e)||!r)throw new Error(`String is not a valid color (passed: "${e}").`);const s=n.map(a=>parseFloat(a));return{red:s[0],green:s[1],blue:s[2],alpha:(s==null?void 0:s[3])||1}},Vr=e=>"alpha"in e?`rgba(${e.red}, ${e.green}, ${e.blue}, ${e.alpha})`:`rgb(${e.red}, ${e.green}, ${e.blue})`,Sn=e=>{const t=Object.keys(e).filter(n=>n.startsWith("jQuery")).reduce((n,r)=>({...n,...e[r]}),{});return{...e.dataset,...t}},Hr=e=>{const t=document.getElementsByClassName(e)[0];if(!t)throw new Error("Could not find the DOM node via class name");return Sn(t)},In={[o.Aac]:"audio/aac",[o.Ac3]:"audio/ac3",[o.Ai]:"application/postscript",[o.Aif]:"audio/x-aiff",[o.Aifc]:"audio/x-aiff",[o.Aiff]:"audio/x-aiff",[o.Artboard]:"application/octet-stream",[o.Asc]:"text/plain",[o.Atom]:"application/atom+xml",[o.Au]:"audio/basic",[o.Avi]:"video/x-msvideo",[o.Bcpio]:"application/x-bcpio",[o.Bin]:"application/octet-stream",[o.Bmp]:"image/bmp",[o.Cdf]:"application/x-netcdf",[o.Cgm]:"image/cgm",[o.Class]:"application/octet-stream",[o.Cpio]:"application/x-cpio",[o.Cpt]:"application/mac-compactpro",[o.Csh]:"application/x-csh",[o.Css]:"text/css",[o.Dcr]:"application/x-director",[o.Dif]:"video/x-dv",[o.Dir]:"application/x-director",[o.Djv]:"image/vnd.djvu",[o.Djvu]:"image/vnd.djvu",[o.Dll]:"application/octet-stream",[o.Dmg]:"application/octet-stream",[o.Dms]:"application/octet-stream",[o.Dng]:"image/dng",[o.Doc]:"application/msword",[o.Docm]:"application/vnd.ms-word.document.macroEnabled.12",[o.Docx]:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",[o.Dotm]:"application/vnd.ms-word.template.macroEnabled.12",[o.Dotx]:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",[o.Dtd]:"application/xml-dtd",[o.Dv]:"video/x-dv",[o.Dvi]:"application/x-dvi",[o.Dxr]:"application/x-director",[o.Eps]:"application/postscript",[o.Etx]:"text/x-setext",[o.Exe]:"application/octet-stream",[o.Ez]:"application/andrew-inset",[o.Flac]:"audio/x-flac",[o.Flv]:"video/x-flv",[o.Gif]:"image/gif",[o.Gram]:"application/srgs",[o.Grxml]:"application/srgs+xml",[o.Gtar]:"application/x-gtar",[o.Hdf]:"application/x-hdf",[o.Heif]:"mage/heif",[o.Hqx]:"application/mac-binhex40",[o.Htm]:"text/html",[o.Html]:"text/html",[o.Ice]:"x-conference/x-cooltalk",[o.Ico]:"image/x-icon",[o.Ics]:"text/calendar",[o.Idml]:"application/vnd.adobe.indesign-idml-package",[o.Ief]:"image/ief",[o.Ifb]:"text/calendar",[o.Iges]:"model/iges",[o.Igs]:"model/iges",[o.Indd]:"application/octet-stream",[o.Indt]:"application/octet-stream",[o.Jnlp]:"application/x-java-jnlp-file",[o.Jp2]:"image/jp2",[o.Jpe]:"image/jpeg",[o.Jpeg]:"image/jpeg",[o.Jpg]:"image/jpeg",[o.Js]:"application/x-javascript",[o.Kar]:"audio/midi",[o.Latex]:"application/x-latex",[o.Lha]:"application/octet-stream",[o.Lzh]:"application/octet-stream",[o.M3u]:"audio/x-mpegurl",[o.M4a]:"audio/mp4a-latm",[o.M4b]:"audio/mp4a-latm",[o.M4p]:"audio/mp4a-latm",[o.M4r]:"audio/x-m4r",[o.M4u]:"video/vnd.mpegurl",[o.M4v]:"video/x-m4v",[o.Mac]:"image/x-macpaint",[o.Man]:"application/x-troff-man",[o.Mathml]:"application/mathml+xml",[o.Me]:"application/x-troff-me",[o.Mesh]:"model/mesh",[o.Mid]:"audio/midi",[o.Midi]:"audio/midi",[o.Mif]:"application/vnd.mif",[o.Mkv]:"video/x-matroska",[o.Mov]:"video/quicktime",[o.Movie]:"video/x-sgi-movie",[o.Mp2]:"audio/mpeg",[o.Mp3]:"audio/mpeg",[o.Mp4]:"video/mp4",[o.Mpe]:"video/mpeg",[o.Mpeg]:"video/mpeg",[o.Mpg]:"video/mpeg",[o.Mpga]:"audio/mpeg",[o.Ms]:"application/x-troff-ms",[o.Msh]:"model/mesh",[o.Mts]:"model/vnd.mts",[o.Mxu]:"video/vnd.mpegurl",[o.Nc]:"application/x-netcdf",[o.Oda]:"application/oda",[o.Ogg]:"application/ogg",[o.Pbm]:"image/x-portable-bitmap",[o.Pct]:"image/pict",[o.Pdb]:"chemical/x-pdb",[o.Pdf]:"application/pdf",[o.Pgm]:"image/x-portable-graymap",[o.Pgn]:"application/x-chess-pgn",[o.Pic]:"image/pict",[o.Pict]:"image/pict",[o.Png]:"image/png",[o.Pnm]:"image/x-portable-anymap",[o.Pnt]:"image/x-macpaint",[o.Pntg]:"image/x-macpaint",[o.Potm]:"application/vnd.ms-powerpoint.template.macroEnabled.12",[o.Potx]:"application/vnd.openxmlformats-officedocument.presentationml.template",[o.Ppam]:"application/vnd.ms-powerpoint.addin.macroEnabled.12",[o.Ppm]:"image/x-portable-pixmap",[o.Ppsm]:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",[o.Ppsx]:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",[o.Ppt]:"application/vnd.ms-powerpoint",[o.Pptm]:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",[o.Pptx]:"application/vnd.openxmlformats-officedocument.presentationml.presentation",[o.Ps]:"application/postscript",[o.Psd]:"image/vnd.adobe.photoshop",[o.Qt]:"video/quicktime",[o.Qti]:"image/x-quicktime",[o.Qtif]:"image/x-quicktime",[o.Ra]:"audio/x-pn-realaudio",[o.Ram]:"audio/x-pn-realaudio",[o.Ras]:"image/x-cmu-raster",[o.Rdf]:"application/rdf+xml",[o.Rgb]:"image/x-rgb",[o.Rm]:"application/vnd.rn-realmedia",[o.Roff]:"application/x-troff",[o.Rtf]:"text/rtf",[o.Rtx]:"text/richtext",[o.Sgm]:"text/sgml",[o.Sgml]:"text/sgml",[o.Sh]:"application/x-sh",[o.Shar]:"application/x-shar",[o.Silo]:"model/mesh",[o.Sit]:"application/x-stuffit",[o.Skd]:"application/x-koan",[o.Sketch]:"application/zip",[o.Skm]:"application/x-koan",[o.Skp]:"application/x-koan",[o.Skt]:"application/x-koan",[o.Smi]:"application/smil",[o.Smil]:"application/smil",[o.Snd]:"audio/basic",[o.So]:"application/octet-stream",[o.Spl]:"application/x-futuresplash",[o.Src]:"application/x-wais-source",[o.Sv4cpio]:"application/x-sv4cpio",[o.Sv4crc]:"application/x-sv4crc",[o.Svg]:"image/svg+xml",[o.Swf]:"application/x-shockwave-flash",[o.T]:"application/x-troff",[o.Tar]:"application/x-tar",[o.Tcl]:"application/x-tcl",[o.Tex]:"application/x-tex",[o.Texi]:"application/x-texinfo",[o.Texinfo]:"application/x-texinfo",[o.Tif]:"image/tiff",[o.Tiff]:"image/tiff",[o.Tpl]:"text/xml",[o.Tr]:"application/x-troff",[o.Tsv]:"text/tab-separated-values",[o.Txt]:"text/plain",[o.Ustar]:"application/x-ustar",[o.Vcd]:"application/x-cdlink",[o.Vrml]:"model/vrml",[o.Vxml]:"application/voicexml+xml",[o.Wav]:"audio/x-wav",[o.Wbmp]:"image/vnd.wap.wbmp",[o.Wbmxl]:"application/vnd.wap.wbxml",[o.Webm]:"video/webm",[o.Webp]:"image/webp",[o.Wml]:"text/vnd.wap.wml",[o.Wmlc]:"application/vnd.wap.wmlc",[o.Wmls]:"text/vnd.wap.wmlscript",[o.Wmlsc]:"application/vnd.wap.wmlscriptc",[o.Wmv]:"video/x-ms-wmv",[o.Wrl]:"model/vrml",[o.Xbm]:"image/x-xbitmap",[o.Xht]:"application/xhtml+xml",[o.Xhtml]:"application/xhtml+xml",[o.Xlam]:"application/vnd.ms-excel.addin.macroEnabled.12",[o.Xls]:"application/vnd.ms-excel",[o.Xlsb]:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",[o.Xlsm]:"application/vnd.ms-excel.sheet.macroEnabled.12",[o.Xlsx]:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",[o.Xltm]:"application/vnd.ms-excel.template.macroEnabled.12",[o.Xltx]:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",[o.Xml]:"application/xml",[o.Xpm]:"image/x-xpixmap",[o.Xsl]:"application/xml",[o.Xslt]:"application/xslt+xml",[o.Xul]:"application/vnd.mozilla.xul+xml",[o.Xwd]:"image/x-xwindowdump",[o.Xyz]:"chemical/x-xyz",[o.Zip]:"application/zip"},Yr=e=>e.map(t=>In[t]).filter(t=>t!==void 0),Re=(e=6)=>Math.random().toString(20).substr(2,e);class Gn extends Error{constructor(t,n,r){super(`Status code ${n} - ${t}`),this.code=0,this.name="HttpClientError",this.code=n,this.responseBody=r}}const le=async(e,t,n,r)=>{const s={method:e,headers:{"Content-Type":"application/json; charset=utf-8",...r},...n&&{body:JSON.stringify(n)}},a=await window.fetch(`${window.location.origin}${t}`,s),i=await a.json();if(!a.ok)throw new Gn(i,a.status,i.error);return{result:i}};class kn{static getCsrfToken(){const t=document.getElementsByName("x-csrf-token");if(t.length>0)return t[0].content}static async get(t){return le("GET",t,"",{"X-CSRF-TOKEN":this.getCsrfToken()})}static async post(t,n){return le("POST",t,n,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async put(t,n){return le("PUT",t,n,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async patch(t,n){return le("PATCH",t,n,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async delete(t,n){return le("DELETE",t,n,{"X-CSRF-TOKEN":this.getCsrfToken()})}}function $(e,t,n,r){const s=window.top;s==null||s.postMessage({topic:e,token:t,data:n},(r==null?void 0:r.origin)||"*")}function Jr(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function Ae(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var At=Object.create,Qr=function(){function e(){}return function(t){if(!Ae(t))return{};if(At)return At(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Fr=Qr;function qr(e){return function(t,n,r){for(var s=-1,a=Object(t),i=r(t),c=i.length;c--;){var f=i[e?c:++s];if(n(a[f],f,a)===!1)break}return t}}var eo=qr();const to=eo;function no(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var ro=typeof global=="object"&&global&&global.Object===Object&&global;const xn=ro;var oo=typeof self=="object"&&self&&self.Object===Object&&self,so=xn||oo||Function("return this")();const W=so;var ao=W.Symbol;const Q=ao;var Mn=Object.prototype,io=Mn.hasOwnProperty,co=Mn.toString,de=Q?Q.toStringTag:void 0;function uo(e){var t=io.call(e,de),n=e[de];try{e[de]=void 0;var r=!0}catch{}var s=co.call(e);return r&&(t?e[de]=n:delete e[de]),s}var lo=Object.prototype,mo=lo.toString;function po(e){return mo.call(e)}var go="[object Null]",fo="[object Undefined]",Dt=Q?Q.toStringTag:void 0;function ce(e){return e==null?e===void 0?fo:go:Dt&&Dt in Object(e)?uo(e):po(e)}function ie(e){return e!=null&&typeof e=="object"}var ho="[object Arguments]";function vt(e){return ie(e)&&ce(e)==ho}var On=Object.prototype,wo=On.hasOwnProperty,bo=On.propertyIsEnumerable,yo=vt(function(){return arguments}())?vt:function(e){return ie(e)&&wo.call(e,"callee")&&!bo.call(e,"callee")};const Ln=yo;var Ao=Array.isArray;const E=Ao;function Do(){return!1}var Bn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Tt=Bn&&typeof module=="object"&&module&&!module.nodeType&&module,vo=Tt&&Tt.exports===Bn,Ct=vo?W.Buffer:void 0,To=Ct?Ct.isBuffer:void 0,Co=To||Do;const Le=Co;var _o=9007199254740991,Po=/^(?:0|[1-9]\d*)$/;function Un(e,t){var n=typeof e;return t=t??_o,!!t&&(n=="number"||n!="symbol"&&Po.test(e))&&e>-1&&e%1==0&&e<t}var So=9007199254740991;function ut(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=So}var Io="[object Arguments]",Go="[object Array]",ko="[object Boolean]",xo="[object Date]",Mo="[object Error]",Oo="[object Function]",Lo="[object Map]",Bo="[object Number]",Uo="[object Object]",Ro="[object RegExp]",No="[object Set]",$o="[object String]",Eo="[object WeakMap]",Zo="[object ArrayBuffer]",jo="[object DataView]",zo="[object Float32Array]",Ko="[object Float64Array]",Wo="[object Int8Array]",Xo="[object Int16Array]",Vo="[object Int32Array]",Ho="[object Uint8Array]",Yo="[object Uint8ClampedArray]",Jo="[object Uint16Array]",Qo="[object Uint32Array]",I={};I[zo]=I[Ko]=I[Wo]=I[Xo]=I[Vo]=I[Ho]=I[Yo]=I[Jo]=I[Qo]=!0;I[Io]=I[Go]=I[Zo]=I[ko]=I[jo]=I[xo]=I[Mo]=I[Oo]=I[Lo]=I[Bo]=I[Uo]=I[Ro]=I[No]=I[$o]=I[Eo]=!1;function Fo(e){return ie(e)&&ut(e.length)&&!!I[ce(e)]}function qo(e){return function(t){return e(t)}}var Rn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,pe=Rn&&typeof module=="object"&&module&&!module.nodeType&&module,es=pe&&pe.exports===Rn,ze=es&&xn.process,ts=function(){try{var e=pe&&pe.require&&pe.require("util").types;return e||ze&&ze.binding&&ze.binding("util")}catch{}}();const _t=ts;var Pt=_t&&_t.isTypedArray,ns=Pt?qo(Pt):Fo;const lt=ns;var rs=Object.prototype,os=rs.hasOwnProperty;function ss(e,t){var n=E(e),r=!n&&Ln(e),s=!n&&!r&&Le(e),a=!n&&!r&&!s&&lt(e),i=n||r||s||a,c=i?no(e.length,String):[],f=c.length;for(var h in e)(t||os.call(e,h))&&!(i&&(h=="length"||s&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Un(h,f)))&&c.push(h);return c}var as=Object.prototype;function is(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||as;return e===n}function Nn(e,t){return function(n){return e(t(n))}}var cs=Nn(Object.keys,Object);const us=cs;var ls=Object.prototype,ds=ls.hasOwnProperty;function ms(e){if(!is(e))return us(e);var t=[];for(var n in Object(e))ds.call(e,n)&&n!="constructor"&&t.push(n);return t}var ps="[object AsyncFunction]",gs="[object Function]",fs="[object GeneratorFunction]",hs="[object Proxy]";function dt(e){if(!Ae(e))return!1;var t=ce(e);return t==gs||t==fs||t==ps||t==hs}function ws(e){return e!=null&&ut(e.length)&&!dt(e)}function mt(e){return ws(e)?ss(e):ms(e)}function bs(e,t){return e&&to(e,t,mt)}function ys(){this.__data__=[],this.size=0}function $n(e,t){return e===t||e!==e&&t!==t}function Ne(e,t){for(var n=e.length;n--;)if($n(e[n][0],t))return n;return-1}var As=Array.prototype,Ds=As.splice;function vs(e){var t=this.__data__,n=Ne(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Ds.call(t,n,1),--this.size,!0}function Ts(e){var t=this.__data__,n=Ne(t,e);return n<0?void 0:t[n][1]}function Cs(e){return Ne(this.__data__,e)>-1}function _s(e,t){var n=this.__data__,r=Ne(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function X(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}X.prototype.clear=ys;X.prototype.delete=vs;X.prototype.get=Ts;X.prototype.has=Cs;X.prototype.set=_s;function Ps(){this.__data__=new X,this.size=0}function Ss(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Is(e){return this.__data__.get(e)}function Gs(e){return this.__data__.has(e)}var ks=W["__core-js_shared__"];const Ke=ks;var St=function(){var e=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function xs(e){return!!St&&St in e}var Ms=Function.prototype,Os=Ms.toString;function oe(e){if(e!=null){try{return Os.call(e)}catch{}try{return e+""}catch{}}return""}var Ls=/[\\^$.*+?()[\]{}|]/g,Bs=/^\[object .+?Constructor\]$/,Us=Function.prototype,Rs=Object.prototype,Ns=Us.toString,$s=Rs.hasOwnProperty,Es=RegExp("^"+Ns.call($s).replace(Ls,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zs(e){if(!Ae(e)||xs(e))return!1;var t=dt(e)?Es:Bs;return t.test(oe(e))}function js(e,t){return e==null?void 0:e[t]}function ue(e,t){var n=js(e,t);return Zs(n)?n:void 0}var zs=ue(W,"Map");const fe=zs;var Ks=ue(Object,"create");const he=Ks;function Ws(){this.__data__=he?he(null):{},this.size=0}function Xs(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Vs="__lodash_hash_undefined__",Hs=Object.prototype,Ys=Hs.hasOwnProperty;function Js(e){var t=this.__data__;if(he){var n=t[e];return n===Vs?void 0:n}return Ys.call(t,e)?t[e]:void 0}var Qs=Object.prototype,Fs=Qs.hasOwnProperty;function qs(e){var t=this.__data__;return he?t[e]!==void 0:Fs.call(t,e)}var ea="__lodash_hash_undefined__";function ta(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=he&&t===void 0?ea:t,this}function re(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}re.prototype.clear=Ws;re.prototype.delete=Xs;re.prototype.get=Js;re.prototype.has=qs;re.prototype.set=ta;function na(){this.size=0,this.__data__={hash:new re,map:new(fe||X),string:new re}}function ra(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function $e(e,t){var n=e.__data__;return ra(t)?n[typeof t=="string"?"string":"hash"]:n.map}function oa(e){var t=$e(this,e).delete(e);return this.size-=t?1:0,t}function sa(e){return $e(this,e).get(e)}function aa(e){return $e(this,e).has(e)}function ia(e,t){var n=$e(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function V(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}V.prototype.clear=na;V.prototype.delete=oa;V.prototype.get=sa;V.prototype.has=aa;V.prototype.set=ia;var ca=200;function ua(e,t){var n=this.__data__;if(n instanceof X){var r=n.__data__;if(!fe||r.length<ca-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new V(r)}return n.set(e,t),this.size=n.size,this}function K(e){var t=this.__data__=new X(e);this.size=t.size}K.prototype.clear=Ps;K.prototype.delete=Ss;K.prototype.get=Is;K.prototype.has=Gs;K.prototype.set=ua;var la="__lodash_hash_undefined__";function da(e){return this.__data__.set(e,la),this}function ma(e){return this.__data__.has(e)}function Be(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new V;++t<n;)this.add(e[t])}Be.prototype.add=Be.prototype.push=da;Be.prototype.has=ma;function pa(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ga(e,t){return e.has(t)}var fa=1,ha=2;function En(e,t,n,r,s,a){var i=n&fa,c=e.length,f=t.length;if(c!=f&&!(i&&f>c))return!1;var h=a.get(e),w=a.get(t);if(h&&w)return h==t&&w==e;var d=-1,u=!0,m=n&ha?new Be:void 0;for(a.set(e,t),a.set(t,e);++d<c;){var b=e[d],D=t[d];if(r)var v=i?r(D,b,d,t,e,a):r(b,D,d,e,t,a);if(v!==void 0){if(v)continue;u=!1;break}if(m){if(!pa(t,function(T,A){if(!ga(m,A)&&(b===T||s(b,T,n,r,a)))return m.push(A)})){u=!1;break}}else if(!(b===D||s(b,D,n,r,a))){u=!1;break}}return a.delete(e),a.delete(t),u}var wa=W.Uint8Array;const It=wa;function ba(e){var t=-1,n=Array(e.size);return e.forEach(function(r,s){n[++t]=[s,r]}),n}function ya(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Aa=1,Da=2,va="[object Boolean]",Ta="[object Date]",Ca="[object Error]",_a="[object Map]",Pa="[object Number]",Sa="[object RegExp]",Ia="[object Set]",Ga="[object String]",ka="[object Symbol]",xa="[object ArrayBuffer]",Ma="[object DataView]",Gt=Q?Q.prototype:void 0,We=Gt?Gt.valueOf:void 0;function Oa(e,t,n,r,s,a,i){switch(n){case Ma:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case xa:return!(e.byteLength!=t.byteLength||!a(new It(e),new It(t)));case va:case Ta:case Pa:return $n(+e,+t);case Ca:return e.name==t.name&&e.message==t.message;case Sa:case Ga:return e==t+"";case _a:var c=ba;case Ia:var f=r&Aa;if(c||(c=ya),e.size!=t.size&&!f)return!1;var h=i.get(e);if(h)return h==t;r|=Da,i.set(e,t);var w=En(c(e),c(t),r,s,a,i);return i.delete(e),w;case ka:if(We)return We.call(e)==We.call(t)}return!1}function La(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}function Ba(e,t,n){var r=t(e);return E(e)?r:La(r,n(e))}function Ua(e,t){for(var n=-1,r=e==null?0:e.length,s=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[s++]=i)}return a}function Ra(){return[]}var Na=Object.prototype,$a=Na.propertyIsEnumerable,kt=Object.getOwnPropertySymbols,Ea=kt?function(e){return e==null?[]:(e=Object(e),Ua(kt(e),function(t){return $a.call(e,t)}))}:Ra;const Za=Ea;function xt(e){return Ba(e,mt,Za)}var ja=1,za=Object.prototype,Ka=za.hasOwnProperty;function Wa(e,t,n,r,s,a){var i=n&ja,c=xt(e),f=c.length,h=xt(t),w=h.length;if(f!=w&&!i)return!1;for(var d=f;d--;){var u=c[d];if(!(i?u in t:Ka.call(t,u)))return!1}var m=a.get(e),b=a.get(t);if(m&&b)return m==t&&b==e;var D=!0;a.set(e,t),a.set(t,e);for(var v=i;++d<f;){u=c[d];var T=e[u],A=t[u];if(r)var _=i?r(A,T,u,t,e,a):r(T,A,u,e,t,a);if(!(_===void 0?T===A||s(T,A,n,r,a):_)){D=!1;break}v||(v=u=="constructor")}if(D&&!v){var C=e.constructor,P=t.constructor;C!=P&&"constructor"in e&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof P=="function"&&P instanceof P)&&(D=!1)}return a.delete(e),a.delete(t),D}var Xa=ue(W,"DataView");const Ye=Xa;var Va=ue(W,"Promise");const Je=Va;var Ha=ue(W,"Set");const Qe=Ha;var Ya=ue(W,"WeakMap");const Fe=Ya;var Mt="[object Map]",Ja="[object Object]",Ot="[object Promise]",Lt="[object Set]",Bt="[object WeakMap]",Ut="[object DataView]",Qa=oe(Ye),Fa=oe(fe),qa=oe(Je),ei=oe(Qe),ti=oe(Fe),q=ce;(Ye&&q(new Ye(new ArrayBuffer(1)))!=Ut||fe&&q(new fe)!=Mt||Je&&q(Je.resolve())!=Ot||Qe&&q(new Qe)!=Lt||Fe&&q(new Fe)!=Bt)&&(q=function(e){var t=ce(e),n=t==Ja?e.constructor:void 0,r=n?oe(n):"";if(r)switch(r){case Qa:return Ut;case Fa:return Mt;case qa:return Ot;case ei:return Lt;case ti:return Bt}return t});const Rt=q;var ni=1,Nt="[object Arguments]",$t="[object Array]",Pe="[object Object]",ri=Object.prototype,Et=ri.hasOwnProperty;function oi(e,t,n,r,s,a){var i=E(e),c=E(t),f=i?$t:Rt(e),h=c?$t:Rt(t);f=f==Nt?Pe:f,h=h==Nt?Pe:h;var w=f==Pe,d=h==Pe,u=f==h;if(u&&Le(e)){if(!Le(t))return!1;i=!0,w=!1}if(u&&!w)return a||(a=new K),i||lt(e)?En(e,t,n,r,s,a):Oa(e,t,f,n,r,s,a);if(!(n&ni)){var m=w&&Et.call(e,"__wrapped__"),b=d&&Et.call(t,"__wrapped__");if(m||b){var D=m?e.value():e,v=b?t.value():t;return a||(a=new K),s(D,v,n,r,a)}}return u?(a||(a=new K),Wa(e,t,n,r,s,a)):!1}function pt(e,t,n,r,s){return e===t?!0:e==null||t==null||!ie(e)&&!ie(t)?e!==e&&t!==t:oi(e,t,n,r,pt,s)}var si=1,ai=2;function ii(e,t,n,r){var s=n.length,a=s,i=!r;if(e==null)return!a;for(e=Object(e);s--;){var c=n[s];if(i&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<a;){c=n[s];var f=c[0],h=e[f],w=c[1];if(i&&c[2]){if(h===void 0&&!(f in e))return!1}else{var d=new K;if(r)var u=r(h,w,f,e,t,d);if(!(u===void 0?pt(w,h,si|ai,r,d):u))return!1}}return!0}function Zn(e){return e===e&&!Ae(e)}function ci(e){for(var t=mt(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,Zn(s)]}return t}function jn(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function ui(e){var t=ci(e);return t.length==1&&t[0][2]?jn(t[0][0],t[0][1]):function(n){return n===e||ii(n,e,t)}}var li="[object Symbol]";function gt(e){return typeof e=="symbol"||ie(e)&&ce(e)==li}var di=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mi=/^\w*$/;function ft(e,t){if(E(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||gt(e)?!0:mi.test(e)||!di.test(e)||t!=null&&e in Object(t)}var pi="Expected a function";function ht(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(pi);var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],a=n.cache;if(a.has(s))return a.get(s);var i=e.apply(this,r);return n.cache=a.set(s,i)||a,i};return n.cache=new(ht.Cache||V),n}ht.Cache=V;var gi=500;function fi(e){var t=ht(e,function(r){return n.size===gi&&n.clear(),r}),n=t.cache;return t}var hi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wi=/\\(\\)?/g,bi=fi(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(hi,function(n,r,s,a){t.push(s?a.replace(wi,"$1"):r||n)}),t});const yi=bi;function Ai(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}var Di=1/0,Zt=Q?Q.prototype:void 0,jt=Zt?Zt.toString:void 0;function zn(e){if(typeof e=="string")return e;if(E(e))return Ai(e,zn)+"";if(gt(e))return jt?jt.call(e):"";var t=e+"";return t=="0"&&1/e==-Di?"-0":t}function De(e){return e==null?"":zn(e)}function Kn(e,t){return E(e)?e:ft(e,t)?[e]:yi(De(e))}var vi=1/0;function Ee(e){if(typeof e=="string"||gt(e))return e;var t=e+"";return t=="0"&&1/e==-vi?"-0":t}function Wn(e,t){t=Kn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Ee(t[n++])];return n&&n==r?e:void 0}function Ti(e,t,n){var r=e==null?void 0:Wn(e,t);return r===void 0?n:r}function Ci(e,t){return e!=null&&t in Object(e)}function _i(e,t,n){t=Kn(t,e);for(var r=-1,s=t.length,a=!1;++r<s;){var i=Ee(t[r]);if(!(a=e!=null&&n(e,i)))break;e=e[i]}return a||++r!=s?a:(s=e==null?0:e.length,!!s&&ut(s)&&Un(i,s)&&(E(e)||Ln(e)))}function Pi(e,t){return e!=null&&_i(e,t,Ci)}var Si=1,Ii=2;function Gi(e,t){return ft(e)&&Zn(t)?jn(Ee(e),t):function(n){var r=Ti(n,e);return r===void 0&&r===t?Pi(n,e):pt(t,r,Si|Ii)}}function ki(e){return e}function xi(e){return function(t){return t==null?void 0:t[e]}}function Mi(e){return function(t){return Wn(t,e)}}function Oi(e){return ft(e)?xi(Ee(e)):Mi(e)}function Li(e){return typeof e=="function"?e:e==null?ki:typeof e=="object"?E(e)?Gi(e[0],e[1]):ui(e):Oi(e)}var Bi=Nn(Object.getPrototypeOf,Object);const Ui=Bi;function Ri(e,t,n){var r=E(e),s=r||Le(e)||lt(e);if(t=Li(t),n==null){var a=e&&e.constructor;s?n=r?new a:[]:Ae(e)?n=dt(a)?Fr(Ui(e)):{}:n={}}return(s?Jr:bs)(e,function(i,c,f){return t(n,i,c,f)}),n}function Ni(e,t,n,r){var s=-1,a=e==null?0:e.length;for(r&&a&&(n=e[++s]);++s<a;)n=t(n,e[s],s,e);return n}function $i(e){return function(t){return e==null?void 0:e[t]}}var Ei={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Zi=$i(Ei);const ji=Zi;var zi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ki="\\u0300-\\u036f",Wi="\\ufe20-\\ufe2f",Xi="\\u20d0-\\u20ff",Vi=Ki+Wi+Xi,Hi="["+Vi+"]",Yi=RegExp(Hi,"g");function Ji(e){return e=De(e),e&&e.replace(zi,ji).replace(Yi,"")}var Qi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Fi(e){return e.match(Qi)||[]}var qi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function ec(e){return qi.test(e)}var Xn="\\ud800-\\udfff",tc="\\u0300-\\u036f",nc="\\ufe20-\\ufe2f",rc="\\u20d0-\\u20ff",oc=tc+nc+rc,Vn="\\u2700-\\u27bf",Hn="a-z\\xdf-\\xf6\\xf8-\\xff",sc="\\xac\\xb1\\xd7\\xf7",ac="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ic="\\u2000-\\u206f",cc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yn="A-Z\\xc0-\\xd6\\xd8-\\xde",uc="\\ufe0e\\ufe0f",Jn=sc+ac+ic+cc,Qn="['’]",zt="["+Jn+"]",lc="["+oc+"]",Fn="\\d+",dc="["+Vn+"]",qn="["+Hn+"]",er="[^"+Xn+Jn+Fn+Vn+Hn+Yn+"]",mc="\\ud83c[\\udffb-\\udfff]",pc="(?:"+lc+"|"+mc+")",gc="[^"+Xn+"]",tr="(?:\\ud83c[\\udde6-\\uddff]){2}",nr="[\\ud800-\\udbff][\\udc00-\\udfff]",ae="["+Yn+"]",fc="\\u200d",Kt="(?:"+qn+"|"+er+")",hc="(?:"+ae+"|"+er+")",Wt="(?:"+Qn+"(?:d|ll|m|re|s|t|ve))?",Xt="(?:"+Qn+"(?:D|LL|M|RE|S|T|VE))?",rr=pc+"?",or="["+uc+"]?",wc="(?:"+fc+"(?:"+[gc,tr,nr].join("|")+")"+or+rr+")*",bc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ac=or+rr+wc,Dc="(?:"+[dc,tr,nr].join("|")+")"+Ac,vc=RegExp([ae+"?"+qn+"+"+Wt+"(?="+[zt,ae,"$"].join("|")+")",hc+"+"+Xt+"(?="+[zt,ae+Kt,"$"].join("|")+")",ae+"?"+Kt+"+"+Wt,ae+"+"+Xt,yc,bc,Fn,Dc].join("|"),"g");function Tc(e){return e.match(vc)||[]}function Cc(e,t,n){return e=De(e),t=n?void 0:t,t===void 0?ec(e)?Tc(e):Fi(e):e.match(t)||[]}var _c="['’]",Pc=RegExp(_c,"g");function sr(e){return function(t){return Ni(Cc(Ji(t).replace(Pc,"")),e,"")}}var Sc=sr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const Ic=Sc;function Gc(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(s);++r<s;)a[r]=e[r+t];return a}function kc(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:Gc(e,t,n)}var xc="\\ud800-\\udfff",Mc="\\u0300-\\u036f",Oc="\\ufe20-\\ufe2f",Lc="\\u20d0-\\u20ff",Bc=Mc+Oc+Lc,Uc="\\ufe0e\\ufe0f",Rc="\\u200d",Nc=RegExp("["+Rc+xc+Bc+Uc+"]");function ar(e){return Nc.test(e)}function $c(e){return e.split("")}var ir="\\ud800-\\udfff",Ec="\\u0300-\\u036f",Zc="\\ufe20-\\ufe2f",jc="\\u20d0-\\u20ff",zc=Ec+Zc+jc,Kc="\\ufe0e\\ufe0f",Wc="["+ir+"]",qe="["+zc+"]",et="\\ud83c[\\udffb-\\udfff]",Xc="(?:"+qe+"|"+et+")",cr="[^"+ir+"]",ur="(?:\\ud83c[\\udde6-\\uddff]){2}",lr="[\\ud800-\\udbff][\\udc00-\\udfff]",Vc="\\u200d",dr=Xc+"?",mr="["+Kc+"]?",Hc="(?:"+Vc+"(?:"+[cr,ur,lr].join("|")+")"+mr+dr+")*",Yc=mr+dr+Hc,Jc="(?:"+[cr+qe+"?",qe,ur,lr,Wc].join("|")+")",Qc=RegExp(et+"(?="+et+")|"+Jc+Yc,"g");function Fc(e){return e.match(Qc)||[]}function qc(e){return ar(e)?Fc(e):$c(e)}function eu(e){return function(t){t=De(t);var n=ar(t)?qc(t):void 0,r=n?n[0]:t.charAt(0),s=n?kc(n,1).join(""):t.slice(1);return r[e]()+s}}var tu=eu("toUpperCase");const nu=tu;function ru(e){return nu(De(e).toLowerCase())}var ou=sr(function(e,t,n){return t=t.toLowerCase(),e+(n?ru(t):t)});const su=ou,F=(e,t)=>{if(!e||!t||typeof e!="object"||typeof t!="object")return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n)if(typeof e[s]=="object"&&!F(e[s],t[s])||typeof e[s]!="object"&&e[s]!==t[s])return!1;return!0},ge=e=>e&&typeof e=="object"&&!Array.isArray(e),J=(e,...t)=>{if(t.length===0)return e;const n=t.shift();if(ge(e)&&ge(n))for(const r in n)ge(n[r])?(e[r]||Object.assign(e,{[r]:{}}),J(e[r],n[r])):Object.assign(e,{[r]:n[r]});return J(e,...t)},U=(e,t)=>{const n={camel:su,snake:Ic};return Ri(e,(r,s,a,i)=>{const c=Array.isArray(i)?a:n[t](a);r[c]=ge(s)||Array.isArray(s)?U(s,t):s})};class pr extends Error{constructor(t){super(`Call with topic ${t} failed.`),this.name="FetchError"}}class wt extends Error{constructor(t){super(`Timeout for call with topic "${t}" expired. Call was aborted.`),this.name="TimeoutReachedError"}}const bt=3*1e3;function z(e,t,n){return new Promise((r,s)=>{const a=i=>{const c=i.data;c.token===t&&c.topic===e&&c.success?r(c.data||!0):s(new pr(e)),window.removeEventListener("message",a)};window.addEventListener("message",a),setTimeout(()=>{s(new wt(e))},(n==null?void 0:n.timeout)||bt)})}const L=Re(),au=3*1e3,Vt=5*60*1e3;class iu{getAppState(){return $(x.GetAppState,L),z(x.GetAppState,L)}async putAppState(t){return $(x.PutAppState,L,t),z(x.PutAppState,L)}async deleteAppState(){return $(x.DeleteAppState,L),z(x.DeleteAppState,L)}getAssetById(t){return $(x.GetAssetById,L,{assetId:t}),z(x.GetAssetById,L)}async postExternalAssets(t){const r=t.filter(s=>s.previewUrl).length>0?Vt:au;return $(x.PostExternalAssets,L,t),z(x.PostExternalAssets,L,{timeout:r})}getThirdPartyOauth2Tokens(){return $(x.GetThirdPartyOauth2Tokens,L),z(x.GetThirdPartyOauth2Tokens,L,{timeout:Vt})}getRefreshedThirdpartyOauth2Tokens(t){return $(x.GetRefreshedThirdpartyOauth2Token,L,{refreshToken:t}),z(x.GetRefreshedThirdpartyOauth2Token,L)}closeApp(){$(x.CloseApp,L)}openAssetChooser(){$(x.OpenAssetChooser,L)}}class yt extends Error{constructor(t){super(`Initialization failed. ${t}`),this.name="InitializationError"}}class gr extends Error{constructor(t){super(`Validation failed. ${t}`),this.name="ValidationError"}}class Ht{constructor(t){this.port=t,this.messageBucket=[],this.port.onmessage=n=>{const{token:r}=n.data,s=this.messageBucket.findIndex(a=>a.token===r);s>-1&&this.messageBucket.splice(s,1)[0].resolve(n.data.message)}}post(t){return new Promise((n,r)=>{const s=Re();this.messageBucket.push({message:t,resolve:n,token:s}),this.port.postMessage({message:t,token:s}),setTimeout(()=>{r(new wt("operation"))},bt*10)})}}class Yt{post(){throw new yt('First use await platformApp.dispatch({ name: "openConnection" })')}}const Jt=e=>{const t=n=>{const r={};for(const[s,a]of n)r[s]=a;return r};try{const n=new URL(e);return t(n.searchParams.entries())}catch{throw new gr(`"${e}" is not a valid url`)}},cu=e=>({name:"createAsset",payload:e}),uu=e=>({name:"getAssetResourceInformation",payload:e}),lu=e=>({name:"getCurrentUser",payload:e}),du=e=>({name:"openAssetChooser",payload:e}),mu=()=>({name:"closeAssetChooser"}),pu=({token:e})=>({name:"openAssetViewer",payload:{token:e}}),gu=e=>({name:"downloadAsset",payload:e}),fu=()=>({name:"openNavigationManager"}),hu=()=>({name:"openTemplateChooser"}),wu=()=>({name:"closeTemplateChooser"}),bu=e=>({name:"openNewPublication",payload:e}),fr=()=>({name:"openConnection"});class hr{constructor(){this.apiMessageBus=new Yt,this.stateMessageBus=new Yt,this.initialized=!1,this.localState={settings:{}},this.subscribeMap={"State.*":new Map,"State.settings":new Map,"Context.*":new Map,"Context.marketplaceServiceAppId":new Map,"Context.token":new Map,"Context.assetId":new Map,"Context.brandId":new Map,"Context.parentId":new Map,"Context.domain":new Map,"Context.type":new Map,"Context.connected":new Map}}api(t){return this.apiMessageBus.post({parameter:t})}guardForInitialization(){if(!Jt(window.location.href).token)throw new yt;return this.initialized}async dispatch(t){if(t.name===fr().name){if(this.guardForInitialization())return;const n=Re();$(x.Init,n,{token:Jt(window.location.href).token,appBridgeVersion:"v3"}),z(x.Init,n).then(({statePort:r,apiPort:s,context:a,state:i})=>{this.apiMessageBus=new Ht(s),this.stateMessageBus=new Ht(r),this.localContext=a,this.localState=i,this.initialized=!0,this.callSubscribedTopic("Context.connected",[!0,!1]),this.callSubscribedTopic("Context.*",[this.localContext,this.localContext]),this.callSubscribedTopic("State.*",[this.localState,this.localState])})}}context(t){return typeof t>"u"?{get:()=>this.localContext,subscribe:n=>this.subscribe("Context.*",n)}:{get:()=>this.localContext?this.localContext[t]:{},subscribe:n=>this.subscribe(`Context.${t}`,n)}}async setInternalState(t){const n=this.localState;this.localState=await t,this.callSubscribedTopic("State.*",[this.localState,n])}state(t){return typeof t>"u"?{get:()=>this.localState,set:n=>{const r=this.stateMessageBus.post({parameter:{nextState:n}});this.setInternalState(r)},subscribe:n=>this.subscribe("State.*",n)}:{get:()=>this.localState[t],set:n=>{const r=this.stateMessageBus.post({parameter:{nextState:n}});this.setInternalState(r)},subscribe:n=>this.subscribe(`State.${t}`,n)}}subscribe(t,n){return t in this.subscribeMap||(this.subscribeMap[t]=new Map),this.subscribeMap[t].set(n,!0),()=>{this.subscribeMap[t].delete(n)}}callSubscribedTopic(t,n){const r=this.subscribeMap[t];if(r&&(r==null?void 0:r.size)!==void 0)for(const[s]of r.entries())s(...Array.isArray(n)?n:[n])}}var wr=(e=>(e.Init="init",e.Started="started",e.Pending="pending",e.Ready="ready",e.Error="error",e))(wr||{});const yu=e=>{const t=p.useRef(null),[n,r]=p.useState("init"),[s,a]=p.useState(null),i=async h=>{try{r("started");const{assetBulkDownloadToken:w}=await e.api({name:"getAssetBulkDownloadToken",payload:{settingIds:h,documentBlockId:e.getBlockId()}});a(null),c(w)}catch(w){r("error"),console.error(w)}},c=async h=>{try{const w=await e.getBulkDownloadByToken(h);w.downloadUrl?(a(w.downloadUrl),r("ready")):(r("pending"),t.current=f(w.signature))}catch(w){r("error"),console.error(w)}},f=h=>window.setInterval(()=>{(async()=>{try{const w=await e.getBulkDownloadBySignature(h);w.downloadUrl&&(r("ready"),a(w.downloadUrl),t.current&&clearInterval(t.current))}catch(w){r("error"),console.error(w),t.current&&clearInterval(t.current)}})()},2500);return{generateBulkDownload:i,status:n,downloadUrl:s}},Au=e=>({openAssetChooser:e.openAssetChooser.bind(e),closeAssetChooser:e.closeAssetChooser.bind(e)}),br="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2xldCByPVtdLHA9W10sYT1bXSxpPVtdLGY9e2xvYWRlZDowLHRvdGFsOjB9O2NvbnN0IG09W107bGV0IGQ9ITE7ZnVuY3Rpb24geSgpe20ubGVuZ3RoPD0wfHxtLnNoaWZ0KCkuc3RhcnQoKX1mdW5jdGlvbiBiKGUsbyl7Y29uc3Qgcz1uZXcgWE1MSHR0cFJlcXVlc3Q7dHJ5e3MudXBsb2FkLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24obil7Zi5sb2FkZWQrPW4ubG9hZGVkLWlbZS5pbmRleF1bZS5jaHVua10ubG9hZGVkLGlbZS5pbmRleF1bZS5jaHVua10ubG9hZGVkPW4ubG9hZGVkO2xldCB0PTA7aVtlLmluZGV4XS5mb3JFYWNoKGw9Pnt0Kz1sLmxvYWRlZH0pLHNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvblByb2dyZXNzIixsb2FkZWQ6dCx0b3RhbDplLnRvdGFsLGxlbmd0aENvbXB1dGFibGU6bi5sZW5ndGhDb21wdXRhYmxlLGluZGV4OmUuaW5kZXh9KSxzZWxmLnBvc3RNZXNzYWdlKHtldmVudDoib25Qcm9ncmVzc0FsbCIsbG9hZGVkOmYubG9hZGVkLHRvdGFsOmYudG90YWx9KX19Y2F0Y2h7cy5vbnByb2dyZXNzPWZ1bmN0aW9uKHQpe3NlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvblByb2dyZXNzQWxsIixsb2FkZWQ6dC5sb2FkZWQsdG90YWw6dC50b3RhbH0pfX1yZXR1cm4gcy5vcGVuKCJQVVQiLGUudXJsLCEwKSxzLm9ubG9hZD1mdW5jdGlvbigpe2lbZS5pbmRleF1bZS5jaHVua10uZmluaXNoZWQ9ITA7bGV0IG49ITA7Zm9yKGxldCB0PTE7dDxpW2UuaW5kZXhdLmxlbmd0aDt0KyspaVtlLmluZGV4XVt0XS5maW5pc2hlZHx8KG49ITEpO2lmKG4pe3JbZS5pbmRleF0uZmluaXNoZWQ9ITA7Y29uc3QgdD1uZXcgWE1MSHR0cFJlcXVlc3Q7dC5vcGVuKCJQT1NUIixgJHtzZWxmLmxvY2F0aW9uLm9yaWdpbn0vYXBpL2ZpbGUvcHJvZ3Jlc3NgLCEwKSx0LnNldFJlcXVlc3RIZWFkZXIoImNvbnRlbnQtdHlwZSIsImFwcGxpY2F0aW9uL2pzb24iKSx0Lm9ubG9hZD1mdW5jdGlvbigpe2xldCBsO3RyeXtsPUpTT04ucGFyc2UodC5yZXNwb25zZVRleHQpfWNhdGNoe2w9e319bC5ldmVudD0ib25Eb25lIixsLmluZGV4PWUuaW5kZXgsc2VsZi5wb3N0TWVzc2FnZShsKSx4KCl9LHQuc2VuZChKU09OLnN0cmluZ2lmeShlKSl9eSgpfSx7c3RhcnQoKXtzLnNlbmQobyl9fX1mdW5jdGlvbiBOKCl7Y29uc3QgZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKCJQT1NUIixgJHtzZWxmLmxvY2F0aW9uLm9yaWdpbn0vYXBpL2ZpbGUvaW5pdGAsITApLGUuc2V0UmVxdWVzdEhlYWRlcigiY29udGVudC10eXBlIiwiYXBwbGljYXRpb24vanNvbiIpLGUub25sb2FkPWZ1bmN0aW9uKCl7bGV0IG87dHJ5e289SlNPTi5wYXJzZShlLnJlc3BvbnNlVGV4dCl9Y2F0Y2h7bz17c3VjY2VzczohMX19aWYoIW8uc3VjY2Vzc3x8IShvLmZpbGVzJiZvLmZpbGVzLmxlbmd0aD4wKSl7c2VsZi5wb3N0TWVzc2FnZSh7ZXZlbnQ6Im9uRmFpbCJ9KTtyZXR1cm59cD1wLmNvbmNhdChvLmZpbGVzKSxkfHwoZD0hMCx4KCkpfSxlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2ZpbGVzOmF9KSl9ZnVuY3Rpb24geCgpe2xldCBlPSExO2ZvcihsZXQgbz0wO288ci5sZW5ndGg7bysrKXtjb25zdCBzPXJbb107IWUmJiFzLmZpbmlzaGVkJiYoZT0hMCxrKG8scltvXSxwW29dKSl9ZXx8UCgpfWZ1bmN0aW9uIGsoZSxvLHMpe2lmKHR5cGVvZiBzIT0ib2JqZWN0Iil7UyhlLG8se30pO3JldHVybn1pZighcy5zdWNjZXNzKXtTKGUsbyxzKTtyZXR1cm59aVtlXT1bXTtjb25zdCBuPW8sdD0xNSoxMDI0KjEwMjQsbD1uLnNpemU7bGV0IHU9MCxjPXQsaD0xO2Zvcig7dTxsOyl7Y29uc3QgZz1uLnNsaWNlKHUsYyk7aVtlXVtoXT17ZmluaXNoZWQ6ITEsbG9hZGVkOjB9LG0ucHVzaChiKHtpbmRleDplLHN0YXJ0OnUsdXBsb2FkOnMudXBsb2FkLG9iamVjdDpzLm9iamVjdCx1cmw6cy51cGxvYWQudXJsc1toXSxtb3JlOmM8bCxlbmQ6TWF0aC5taW4oYyxsLTEpLHRvdGFsOmwsY2h1bms6aH0sZykpLHU9YyxjPXUrdCxoKyt9Zm9yKGxldCBnPTA7Zzw0O2crKyl5KCl9ZnVuY3Rpb24gUyhlLG8scyl7Y29uc3Qgbj0ocz09bnVsbD92b2lkIDA6cy5lcnJvcik/PyJVbmFibGUgdG8gcHJvY2VzcyBmaWxlLiI7c2VsZi5wb3N0TWVzc2FnZSh7ZXZlbnQ6Im9uRmlsZUZhaWwiLGluZGV4OmUsZmlsZTpvLGZpbGVfbWV0YWRhdGE6cyxlcnJvcjpufSksZD0hMSxvLmZpbmlzaGVkPSEwLHgoKX1mdW5jdGlvbiBQKCl7cj1bXSxwPVtdLGE9W10saT1bXSxmPXtsb2FkZWQ6MCx0b3RhbDowfSxkPSExLHNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvbkRvbmVBbGwifSl9c2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7YT1bXTtmb3IobGV0IG89MDtvPGUuZGF0YS5maWxlcy5sZW5ndGg7bysrKXtjb25zdCBzPWUuZGF0YS5maWxlc1tvXTtsZXQgbj17bmFtZTpzLm5hbWUsc2l6ZTpzLnNpemUsdHlwZTpzLnR5cGV9O3R5cGVvZiBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZT09ImZ1bmN0aW9uIiYmKG4ubmFtZT1uLm5hbWUubm9ybWFsaXplKCJORkMiKSksZi50b3RhbCs9cy5zaXplLGUuZGF0YS5mb3JtRGF0YSYmKG49ey4uLm4sLi4uZS5kYXRhLmZvcm1EYXRhW29dfSksci5wdXNoKHMpLGEucHVzaChuKX1OKCl9fSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBsb2FkLndvcmtlci05N2NmNDgzYi5qcy5tYXAK",Qt=typeof window<"u"&&window.Blob&&new Blob([atob(br)],{type:"text/javascript;charset=utf-8"});function Du(){let e;try{if(e=Qt&&(window.URL||window.webkitURL).createObjectURL(Qt),!e)throw"";return new Worker(e)}catch{return new Worker("data:application/javascript;base64,"+br)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const yr=e=>{const t=p.useRef([]),[n,r]=p.useState(!1),{onUploadProgress:s,onUploadProgressAll:a,onUploadDone:i,onUploadDoneAll:c,onUploadFail:f,onUploadFileFail:h}=e??{},w=p.useRef();p.useEffect(()=>{const C=new Du;return w.current=C,C.addEventListener("message",P=>{switch(P.data.event){case"onProgress":d(P);break;case"onProgressAll":u(P);break;case"onDone":m(P);break;case"onDoneAll":b();break;case"onFail":D();break;case"onFileFail":v(P);break;default:throw new Error(`${P.data.event} is not handled`)}}),()=>{C.terminate()}},[]);const d=C=>{s==null||s(C)},u=C=>{a==null||a(C)},m=C=>{i==null||i(C),t.current=[...t.current,C.data]},b=()=>{c==null||c(t.current),r(!0)},D=()=>{throw f==null||f(),new Error("File upload failed")},v=C=>{h==null||h(C)},T=C=>{const P=[];return C instanceof File&&P.push(C),C instanceof FileList&&P.push(...Array.from(C)),P},A=()=>{r(!1),t.current=[]};return[C=>{A();const P=T(C);if(P.length===0)return;const H={files:P};w!=null&&w.current&&w.current.postMessage(H)},{results:t.current,doneAll:n}]},vu=async(e,t,n)=>{const{result:r}=await kn.post("/api/asset",{file_id:e,project_id:t,set_id:n});return{...r.data,...Tu(r.data)}},Tu=e=>({id:e.id,objectType:e.object_type,extension:e.ext,creatorName:e.creator_name,externalUrl:e.external_url,genericUrl:e.generic_url,previewUrl:e.preview_url,originUrl:e.file_origin_url,fileName:e.file_name,fileSize:e.file_size,fileSizeHumanReadable:e.file_size_formatted,height:e.height,width:e.width,projectId:e.project_id,status:e.status,title:e.title,fileId:e.file_id,token:e.token,projectType:e.project_type,revisionId:e.revision_id}),Cu=e=>{var H,se,Y,ve,Te;const t=p.useRef([]),n=p.useRef([]),[r,s]=p.useState(!1),{onUploadProgress:a,onUploadProgressAll:i,onUploadDone:c,onUploadDoneAll:f,onUploadFail:h,onUploadAssetFail:w}=e??{},d=(Te=(ve=(Y=(se=(H=window.application)==null?void 0:H.sandbox)==null?void 0:se.config)==null?void 0:Y.context)==null?void 0:ve.project)==null?void 0:Te.id,u=R=>{a==null||a(R)},m=R=>{i==null||i(R)},b=async R=>{const Ce=_(R.data.file_id);n.current.push(Ce),c==null||c(R),t.current=[...t.current,await Ce]},D=async()=>{await Promise.all(n.current),f==null||f(t.current),s(!0)},v=()=>{h==null||h()},T=R=>{w==null||w(R)},A=()=>{s(!1),t.current=[]},_=async R=>await vu(R,d),[C]=yr({onUploadProgress:u,onUploadProgressAll:m,onUploadDone:b,onUploadDoneAll:D,onUploadFail:v,onUploadFileFail:T});return[R=>{A(),C(R)},{results:t.current,doneAll:r}]},_u=e=>({open:async({token:n})=>{e.openAssetViewer(n)}}),Pu=e=>{const t=e.getBlockId(),[n,r]=p.useState({}),s=h=>{h.blockId===t&&!F(h.blockAssets,h.prevBlockAssets)&&r(h.blockAssets)};p.useEffect(()=>{let h=!0;return t&&((async()=>{const d=await e.getBlockAssets();h&&r(d)})(),window.emitter.on("AppBridge:BlockAssetsUpdated",s)),()=>{h=!1,window.emitter.off("AppBridge:BlockAssetsUpdated",s)}},[e]);const a=async()=>{window.emitter.emit("AppBridge:BlockAssetsUpdated",{blockId:t,blockAssets:await e.getBlockAssets(),prevBlockAssets:{...n}})};return{blockAssets:n,addAssetIdsToKey:async(h,w)=>{await e.addAssetIdsToBlockAssetKey(h,w),a()},deleteAssetIdsFromKey:async(h,w)=>{await e.deleteAssetIdsFromBlockAssetKey(h,w),a()},updateAssetIdsFromKey:async(h,w)=>{var m;const u=((m=(await e.getBlockAssets())[h])==null?void 0:m.map(b=>b.id))??[];try{await e.deleteAssetIdsFromBlockAssetKey(h,u),await e.addAssetIdsToBlockAssetKey(h,w)}catch(b){console.error(b)}a()}}},Su=e=>{const t=e.getBlockId(),[n,r]=p.useState({}),[s,a]=p.useState(null),i=u=>{u.blockId===t&&!F(u.blockTemplates,u.prevBlockTemplates)&&r(u.blockTemplates)},c=u=>{let m;u instanceof Error?m=u.message:typeof u=="string"?m=u:m=String(u),a(m)};p.useEffect(()=>{let u=!0;return t&&((async()=>{try{const b=await e.getBlockTemplates();u&&r(b)}catch(b){c(b)}})(),window.emitter.on("AppBridge:BlockTemplatesUpdated",i)),()=>{u=!1,window.emitter.off("AppBridge:BlockTemplatesUpdated",i)}},[e]);const f=async()=>{let u;try{u=await e.getBlockTemplates()}catch(m){c(m)}u&&window.emitter.emit("AppBridge:BlockTemplatesUpdated",{blockId:t,blockTemplates:u,prevBlockTemplates:{...n}})};return{blockTemplates:n,addTemplateIdsToKey:async(u,m)=>{try{await e.addTemplateIdsToBlockTemplateKey(u,m)}catch(b){c(b)}f()},deleteTemplateIdsFromKey:async(u,m)=>{try{await e.deleteTemplateIdsFromBlockTemplateKey(u,m)}catch(b){c(b)}f()},updateTemplateIdsFromKey:async(u,m)=>{var v;const D=((v=(await e.getBlockTemplates())[u])==null?void 0:v.map(T=>T.id))??[];try{await e.deleteTemplateIdsFromBlockTemplateKey(u,D),await e.addTemplateIdsToBlockTemplateKey(u,m)}catch(T){c(T)}f()},error:s}},Iu=e=>{const t=e.getBlockId(),[n,r]=p.useState(structuredClone(window.blockSettings[t]));return p.useEffect(()=>{const a=i=>{i.blockId===t&&r({...i.blockSettings})};return window.emitter.on("AppBridge:BlockSettingsUpdated",a),()=>{window.emitter.off("AppBridge:BlockSettingsUpdated",a)}},[t]),[n,async a=>{try{await e.updateBlockSettings(a),window.emitter.emit("AppBridge:BlockSettingsUpdated",{blockId:t,blockSettings:J(n,a)})}catch(i){console.error(i)}}]},Gu={enabled:!1,label:"",url:""},ku=(e,t={enabled:!0})=>{const[n,r]=p.useState(null),[s,a]=p.useState(!0);return p.useEffect(()=>{const i=async()=>{a(!0),r(await e.getBrandportalLink()),a(!1)};t.enabled&&i().catch(console.error)},[e,t.enabled]),p.useEffect(()=>{const i=c=>{r(f=>c.action==="update"?{...Gu,...f,...c.brandportalLink}:f)};return window.emitter.on("AppBridge:GuidelineBrandportalLink:Action",i),()=>{window.emitter.off("AppBridge:GuidelineBrandportalLink:Action",i)}},[e]),{brandportalLink:n,isLoading:s}},Ar=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,xu=(e,t,n={enabled:!0})=>{const[r,s]=p.useState(new Map([])),[a,i]=p.useState(!0),c=p.useCallback(async()=>{i(!0),s(await Lu(e,t)),i(!1)},[e,t]);return p.useEffect(()=>{n.enabled&&c()},[n.enabled,c]),p.useEffect(()=>{const f=d=>{for(const u of d.payload.pageIds)if(r.has(u)){c();break}},h=d=>{!r.has(d.documentPage.id)||!d.categoryId||s(M.produce(u=>{Mu(u,d.documentPage,d.position)}))},w=({action:d,documentPage:u})=>{d==="update"&&r.has(u.id)||d==="add"&&u.categoryId===t?c():(d==="delete"||d==="move")&&r.has(u.id)&&s(M.produce(m=>{d==="move"?Ou(m,u):d==="delete"&&m.delete(u.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentPage:Action",w),window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",f),window.emitter.on("AppBridge:GuidelineDocumentPage:MoveEvent",h),()=>{window.emitter.off("AppBridge:GuidelineDocumentPage:Action",w),window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",f),window.emitter.off("AppBridge:GuidelineDocumentPage:MoveEvent",h)}},[t,c,r]),{documentPages:Array.from(r.values()),refetch:c,isLoading:a}},Mu=(e,t,n)=>{if(!t.sort||!n)return e;const r=e.get(t.id),s=[...e.values()].sort(Ar);e.clear();let a=1,i=!0;for(const c of s)c.id!==t.id&&(r&&a===n&&(e.set(t.id,{...r,sort:n}),i=!1),e.set(c.id,{...c,sort:a}),a++);return r&&i&&e.set(t.id,{...r,sort:a}),e},Ou=(e,t)=>{const n=[...e.values()];let r=!0;e.clear();for(const s of n)s.id!==t.id&&(e.size===t.sort-1&&(e.set(t.id,t),r=!1),e.set(s.id,s));return r&&e.set(t.id,t),e},Lu=async(e,t)=>{const n=await e.getDocumentPagesByDocumentCategoryId(t);return new Map([...n].sort(Ar).map(r=>[r.id,r]))},Bu=(e,t)=>{const n=e.getBlockId(),[r,s]=p.useState([]),a=d=>{d.blockId===n&&!F(d.colorPalettes,d.prevColorPalettes)&&s(d.colorPalettes)};p.useEffect(()=>{let d=!0;return n&&((async()=>{const m=await e.getColorPalettesWithColors(t);d&&s(m)})(),window.emitter.on("AppBridge:ColorPalettesUpdated",a)),()=>{d=!1,window.emitter.off("AppBridge:ColorPalettesUpdated",a)}},[e,n,t]);const i=async()=>{window.emitter.emit("AppBridge:ColorPalettesUpdated",{blockId:n,colorPalettes:await e.getColorPalettesWithColors(t),prevColorPalettes:{...r}})};return{colorPalettes:r,createColorPalette:async d=>{await e.createColorPalette(d),i()},updateColorPalette:async(d,u)=>{await e.updateColorPalette(d,u),i()},deleteColorPalette:async d=>{await e.deleteColorPalette(d),i()},downloadColorKit:d=>e.downloadColorKit(d)}},Uu=(e,t)=>{const n=e.getBlockId(),[r,s]=p.useState([]);p.useEffect(()=>{let h=!0;const w=d=>{if(d.blockId===n&&!F(d.colors,d.prevColors)){const u=[...d.colors].sort((m,b)=>m.sort-b.sort);s(u)}};return n&&((async()=>{const u=await e.getColorsByColorPaletteId(t);if(h){const m=[...u].sort((b,D)=>b.sort-D.sort);s(m)}})(),window.emitter.on("AppBridge:ColorsUpdated",w)),()=>{h=!1,window.emitter.off("AppBridge:ColorsUpdated",w)}},[e,n,t]);const a=async()=>{window.emitter.emit("AppBridge:ColorsUpdated",{blockId:n,colors:await e.getColorsByColorPaletteId(t),prevColors:{...r}})};return{colorsByPaletteId:r,createColor:async h=>{await e.createColor(h),a()},updateColor:async(h,w)=>{await e.updateColor(h,w),a()},deleteColor:async h=>{await e.deleteColor(h),a()}}},Ru=(e,t={enabled:!0})=>{const[n,r]=p.useState(null),[s,a]=p.useState(!0),i=p.useCallback(async()=>{a(!0),r(await e.getCoverPage()),a(!1)},[e]);return p.useEffect(()=>{t.enabled&&i().catch(console.error)},[e,i,t.enabled]),p.useEffect(()=>{const c=f=>{if(f.action==="add"){i().catch(console.error);return}r(h=>f.action==="delete"?null:f.action==="update"&&f.coverPage?{...h,...f.coverPage}:h)};return window.emitter.on("AppBridge:GuidelineCoverPage:Action",c),()=>{window.emitter.off("AppBridge:GuidelineCoverPage:Action",c)}},[e,i]),{coverPage:n,isLoading:s}},Dr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Nu=(e,t,n={enabled:!0})=>{const[r,s]=p.useState(new Map([])),[a,i]=p.useState(!0),c=p.useCallback(async()=>{i(!0),s(await ju(e,t)),i(!1)},[e,t]);return p.useEffect(()=>{n.enabled&&c()},[c,n.enabled]),p.useEffect(()=>{const f=d=>{r.has(d.documentPage.categoryId)&&s(M.produce(u=>{const m=`${d.action}-page`;return(Ft[m]||Ft.default)(u,d.documentPage)}))},h=d=>{r.has(d.documentCategory.id)&&s(M.produce(u=>{$u(u,d.documentCategory,d.position)}))},w=({action:d,documentCategory:u})=>{d==="update"&&r.has(u.id)||d==="add"&&u.documentId===t?c():d==="delete"&&r.has(u.id)&&s(M.produce(m=>{m.delete(u.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentCategory:Action",w),window.emitter.on("AppBridge:GuidelineDocumentCategory:DocumentPageAction",f),window.emitter.on("AppBridge:GuidelineDocumentCategory:MoveEvent",h),()=>{window.emitter.off("AppBridge:GuidelineDocumentCategory:Action",w),window.emitter.off("AppBridge:GuidelineDocumentCategory:DocumentPageAction",f),window.emitter.off("AppBridge:GuidelineDocumentCategory:MoveEvent",h)}},[r,t,c]),{documentCategories:Array.from(r.values()),refetch:c,isLoading:a}},$u=(e,t,n)=>{if(!t.sort||!n)return e;const r=e.get(t.id),s=[...e.values()].sort(Dr);e.clear();let a=1,i=!0;for(const c of s)c.id!==t.id&&(r&&a===n&&(e.set(t.id,{...r,sort:n}),i=!1),e.set(c.id,{...c,sort:a}),a++);return r&&i&&e.set(t.id,{...r,sort:a}),e},Eu=(e,t)=>{if(!t.categoryId)return e;const n=e.get(t.categoryId);if(!n)return e;const r={...n,numberOfDocumentPages:n.numberOfDocumentPages+1};return e.set(n.id,r)},Zu=(e,t)=>{if(!t.categoryId)return e;const n=e.get(t.categoryId);if(!n)return e;const r={...n,numberOfDocumentPages:n.numberOfDocumentPages-1};return e.set(n.id,r)},Ft={"add-page":Eu,"delete-page":Zu,default:e=>e},ju=async(e,t)=>{const n=await e.getDocumentCategoriesByDocumentId(t);return new Map([...n].sort(Dr).map(r=>[r.id,r]))},we=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,zu=(e,t={enabled:!0})=>{const[n,r]=p.useState(new Map([])),[s,a]=p.useState(!0),i=p.useCallback(async()=>{a(!0),r(await Hu(e)),a(!1)},[e]);return p.useEffect(()=>{t.enabled&&i()},[t.enabled,i]),p.useEffect(()=>{const c=d=>{r(M.produce(u=>{const m=`${d.action}-document`;return(qt[m]||qt.default)(u,d.document)}))},f=d=>{((d==null?void 0:d.action)==="move"||(d==null?void 0:d.action)==="add")&&n.size>0&&i()},h=d=>{r(M.produce(u=>Ku(u,d.document,d.position,d.newGroupId)))},w=d=>{r(M.produce(u=>Wu(u,d.documentGroup,d.position)))};return window.emitter.on("AppBridge:GuidelineDocumentGroup:Action",i),window.emitter.on("AppBridge:GuidelineDocumentGroup:DocumentAction",c),window.emitter.on("AppBridge:GuidelineDocument:Action",f),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",h),window.emitter.on("AppBridge:GuidelineDocumentGroup:MoveEvent",w),()=>{window.emitter.off("AppBridge:GuidelineDocumentGroup:Action",i),window.emitter.off("AppBridge:GuidelineDocumentGroup:DocumentAction",c),window.emitter.off("AppBridge:GuidelineDocument:Action",f),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",h),window.emitter.off("AppBridge:GuidelineDocumentGroup:MoveEvent",w)}},[n.size,i]),{documentGroups:Array.from(n.values()),refetch:i,isLoading:s}},Ku=(e,t,n,r)=>{if(r||!t.sort)return e;const s=t.sort,a=[...e.values()].sort(we),i=[];e.clear();for(const f of a){const h=f.sort??0;let w=0;n<h?w=s>h||s===0?1:0:w=s<=h?-1:0,i.push({...f,sort:h+w})}const c=[...i].sort(we);for(const f of c)e.set(f.id,f);return e},Wu=(e,t,n)=>{if(!t.sort)return e;const r=t.sort,s=[...e.values()].sort(we),a=[];e.clear();for(const c of s){if(c.id===t.id){a.push({...c,sort:n});continue}const f=c.sort??0;let h=0;n<=f&&(h=r>f?1:0),a.push({...c,sort:f+h})}const i=[...a].sort(we);for(const c of i)e.set(c.id,c);return e},Xu=(e,t)=>{if(!t.documentGroupId)return e;const n=e.get(t.documentGroupId);if(!n)return e;const r={...n,numberOfDocuments:n.numberOfDocuments+1};return e.set(n.id,r)},Vu=(e,t)=>{if(!t.documentGroupId)return e;const n=e.get(t.documentGroupId);if(!n)return e;const r={...n,numberOfDocuments:n.numberOfDocuments-1};return e.set(n.id,r)},qt={"add-document":Xu,"delete-document":Vu,default:e=>e},Hu=async e=>{const t=await e.getDocumentGroups();return new Map([...t].sort(we).map(n=>[n.id,n]))},Yu=(e,t)=>{const[n,r]=p.useState(null),[s,a]=p.useState(!0);return p.useEffect(()=>{(async()=>{a(!0),r(await e.getDocumentPageTargets(t)),a(!1)})()},[e,t]),p.useEffect(()=>{const i=c=>{c.payload.pageIds.includes(t)&&r(f=>Ju(f,c.payload.targets))};return window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",i),()=>{window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",i)}},[t]),{documentPageTargets:n,isLoading:s}},Ju=(e,t)=>e&&{...e,hasSelectedTargets:t.length>0,targets:e.targets.map(n=>({...n,target:{...n.target,checked:t.includes(n.target.id)}}))},Qu=(e,t)=>{const[n,r]=p.useState([]);return p.useEffect(()=>{(async a=>{r(await e.getDocumentSectionsByDocumentPageId(a))})(t)},[e,t]),{documentSections:n}},Fu=(e,t)=>{const[n,r]=p.useState(null),[s,a]=p.useState(!0);return p.useEffect(()=>{(async()=>{a(!0),r(await e.getDocumentTargets(t)),a(!1)})()},[e,t]),p.useEffect(()=>{const i=c=>{c.payload.documentIds.includes(t)&&r(f=>qu(f,c.payload.targets))};return window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",i),()=>{window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",i)}},[t]),{documentTargets:n,isLoading:s}},qu=(e,t)=>e&&{...e,hasSelectedTargets:t.length>0,targets:e.targets.map(n=>({...n,target:{...n.target,checked:t.includes(n.target.id)}}))},el=e=>{const[t,n]=p.useState(e.getEditorState());return p.useEffect(()=>{const r=()=>n(e.getEditorState()),s=new MutationObserver(a=>{for(const i of a)i.attributeName==="class"&&r()});return s.observe(document.body,{attributes:!0}),()=>{s.disconnect()}},[]),t},tl=({accept:e,multiple:t})=>{const[n,r]=p.useState(null),s=i=>{if(i.target){const c=i.target.files;r(c)}};return[()=>{const i=document.createElement("input");i.type="file",e&&(i.accept=e),i.multiple=!!t,i.addEventListener("change",s),i.dispatchEvent(new MouseEvent("click"))},{selectedFiles:n}]},vr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,nl=(e,t,n={enabled:!0})=>{const[r,s]=p.useState(new Map([])),[a,i]=p.useState(!0),c=p.useCallback(async()=>{i(!0),s(await cl(e,t)),i(!1)},[e,t]);return p.useEffect(()=>{n.enabled&&c()},[n.enabled,c]),p.useEffect(()=>{const f=u=>{r.has(u.documentPage.documentId)&&s(M.produce(m=>{const b=`${u.action}-page`;return(Se[b]||Se.default)(m,u.documentPage)}))},h=u=>{r.has(u.documentCategory.documentId)&&s(M.produce(m=>{const b=`${u.action}-category`;return(Se[b]||Se.default)(m,u.documentCategory)}))},w=u=>{!r.has(u.document.id)||u.newGroupId!==t||s(M.produce(m=>rl(m,u.document,u.position,u.newGroupId)))},d=({action:u,document:m})=>{(u==="update"||u==="move")&&r.has(m.id)||u==="add"&&m.documentGroupId===t?c():u==="delete"&&r.has(m.id)&&s(M.produce(b=>{u==="delete"&&b.delete(m.id)}))};return window.emitter.on("AppBridge:GuidelineDocument:Action",d),window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",c),window.emitter.on("AppBridge:GuidelineDocument:DocumentPageAction",f),window.emitter.on("AppBridge:GuidelineDocument:DocumentCategoryAction",h),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",w),()=>{window.emitter.off("AppBridge:GuidelineDocument:Action",d),window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",c),window.emitter.off("AppBridge:GuidelineDocument:DocumentPageAction",f),window.emitter.off("AppBridge:GuidelineDocument:DocumentCategoryAction",h),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",w)}},[t,r,n.enabled,c]),{documents:Array.from(r.values()),refetch:c,isLoading:a}},rl=(e,t,n,r)=>{if(!t.sort)return e;const s=e.get(t.id),a=[...e.values()].sort(vr);e.clear();let i=1,c=!0;for(const f of a)f.id===t.id||f.documentGroupId!==r||(s&&i===n&&(e.set(t.id,{...s,sort:n}),c=!1),e.set(f.id,{...f,sort:i}),i++);return s&&c&&e.set(t.id,{...s,sort:i}),e},ol=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfUncategorizedDocumentPages:n.numberOfUncategorizedDocumentPages+1};return e.set(n.id,r)},sl=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfUncategorizedDocumentPages:n.numberOfUncategorizedDocumentPages-1};return e.set(n.id,r)},al=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfDocumentPageCategories:n.numberOfDocumentPageCategories+1};return e.set(n.id,r)},il=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfDocumentPageCategories:n.numberOfDocumentPageCategories-1};return e.set(n.id,r)},Se={"add-page":ol,"delete-page":sl,"add-category":al,"delete-category":il,default:e=>e},cl=async(e,t)=>{const n=await e.getDocumentsByDocumentGroupId(t);return new Map([...n].sort(vr).map(r=>[r.id,r]))},ul=e=>{const t=p.useCallback(async g=>{const y=await e.createLink(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...y,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"add"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:y.id,documentGroupId:g.documentGroupId},action:"add"}),y},[e]),n=p.useCallback(async g=>{const y=await e.updateLink(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...y,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"update"}),y},[e]),r=p.useCallback(async g=>{await e.deleteLink(g.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:g,action:"delete"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...g,documentGroupId:g.documentGroupId},action:"delete"})},[e]),s=p.useCallback(async g=>{const y=await e.createLibrary(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...y,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"add"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:y.id,documentGroupId:g.documentGroupId},action:"add"}),y},[e]),a=p.useCallback(async g=>{const y=await e.updateLibrary(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...y,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"update"}),y},[e]),i=p.useCallback(async g=>{await e.deleteLibrary(g.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:g,action:"delete"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...g,documentGroupId:g.documentGroupId},action:"delete"})},[e]),c=p.useCallback(async g=>{const y=await e.createStandardDocument(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...y,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"add"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:y.id,documentGroupId:g.documentGroupId},action:"add"}),y},[e]),f=p.useCallback(async g=>{const y=await e.updateStandardDocument(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...y,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"update"}),y},[e]),h=p.useCallback(async g=>{await e.deleteStandardDocument(g.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:g,action:"delete"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...g,documentGroupId:g.documentGroupId},action:"delete"})},[e]),w=p.useCallback(async g=>{const y=await e.createDocumentGroup(g);return window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:y,action:"add"}),y},[e]),d=p.useCallback(async g=>{const y=await e.updateDocumentGroup(g);window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:y,action:"update"})},[e]),u=p.useCallback(async g=>{await e.deleteDocumentGroup(g.id),window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:g,action:"delete"})},[e]),m=p.useCallback(async g=>{const y=await e.createDocumentPage(g);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:y,action:"add"}),g.categoryId&&window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{id:y.id,categoryId:g.categoryId},action:"add"}),y},[e]),b=p.useCallback(async g=>{const y=await e.updateDocumentPage(g);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:y,action:"update"}),y},[e]),D=p.useCallback(async g=>{await e.deleteDocumentPage(g.id),window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:{...g,categoryId:g.categoryId??null},action:"delete"}),g.categoryId?window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{...g,categoryId:g.categoryId},action:"delete"}):window.emitter.emit("AppBridge:GuidelineDocument:DocumentPageAction",{documentPage:g,action:"delete"})},[e]),v=p.useCallback(async({id:g,documentId:y,categoryId:G})=>{const N=await e.duplicateDocumentPage(g);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:{...N,title:N.name,documentId:y,categoryId:G},action:"add"}),G&&window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{id:N.id,categoryId:G},action:"add"}),N},[e]),T=p.useCallback(async g=>{const y=await e.createDocumentCategory(g);return window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:y,action:"add"}),window.emitter.emit("AppBridge:GuidelineDocument:DocumentCategoryAction",{documentCategory:y,action:"add"}),y},[e]),A=p.useCallback(async g=>{const y=await e.updateDocumentCategory(g);window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:y,action:"update"})},[e]),_=p.useCallback(async g=>{await e.deleteDocumentCategory(g.id),window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:g,action:"delete"}),window.emitter.emit("AppBridge:GuidelineDocument:DocumentCategoryAction",{documentCategory:g,action:"delete"})},[e]),C=p.useCallback(async g=>{const y=await e.createCoverPage(g);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:y,action:"add"}),y},[e]),P=p.useCallback(async g=>{const y=await e.updateCoverPage(g);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:y,action:"update"}),y},[e]),H=p.useCallback(async g=>{const y={...g.title&&{brandhome_title:g.title},...g.draft!==void 0&&{brandhome_draft:g.draft},...g.hideInNav!==void 0&&{brandhome_hide_in_nav:g.hideInNav}},G=await e.updateLegacyCoverPage(y);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:g,action:"update"}),G},[e]),se=p.useCallback(async()=>{await e.deleteCoverPage(),window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{action:"delete"})},[e]),Y=p.useCallback(async g=>{const y=await e.updateBrandportalLink(g);return y&&window.emitter.emit("AppBridge:GuidelineBrandportalLink:Action",{brandportalLink:y,action:"update"}),y},[e]),ve=p.useCallback(async(g,y,G)=>{const N="AppBridge:GuidelineDocument:MoveEvent";window.emitter.emit(N,{document:g,position:y,newGroupId:G,action:"movePreview"});const _e=await e.moveDocument(g.id,y,G),Z="AppBridge:GuidelineDocument:Action";g.documentGroupId===G?window.emitter.emit(Z,{document:{..._e,sort:y},action:"move"}):(window.emitter.emit(Z,{document:g,action:"delete"}),window.emitter.emit(Z,{document:_e,action:"add"}))},[e]),Te=p.useCallback(async(g,y)=>{const G="AppBridge:GuidelineDocumentGroup:MoveEvent";window.emitter.emit(G,{documentGroup:g,position:y,action:"movePreview"}),await e.moveDocumentGroup(g.id,y),window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:{...g,sort:y},action:"update"})},[e]),R=p.useCallback(async(g,y,G)=>{const N="AppBridge:GuidelineDocumentCategory:MoveEvent";window.emitter.emit(N,{documentCategory:g,documentId:y,position:G,action:"movePreview"}),await e.moveDocumentCategory(g.id,y,G),window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:{...g,documentId:y,sort:G},action:"update"})},[e]),Ce=p.useCallback(async(g,y,G,N=null)=>{const _e="AppBridge:GuidelineDocumentPage:MoveEvent";window.emitter.emit(_e,{documentPage:g,documentId:y,position:G,categoryId:N,action:"movePreview"});const Z=await e.moveDocumentPage(g.id,y,G,N??void 0),je="AppBridge:GuidelineDocumentPage:Action";g.categoryId===N&&g.documentId===y?window.emitter.emit(je,{documentPage:{...Z,sort:G??Z.sort},action:"move"}):(window.emitter.emit(je,{documentPage:{...g,categoryId:g.categoryId??null},action:"delete"}),window.emitter.emit(je,{documentPage:Z,action:"add"}));const jr=g.categoryId?"AppBridge:GuidelineDocumentCategory:DocumentPageAction":"AppBridge:GuidelineDocument:DocumentPageAction",zr=Z.categoryId?"AppBridge:GuidelineDocumentCategory:DocumentPageAction":"AppBridge:GuidelineDocument:DocumentPageAction";window.emitter.emit(jr,{documentPage:g,action:"delete"}),window.emitter.emit(zr,{documentPage:Z,action:"add"})},[e]),Er=p.useCallback(async(g,y)=>{const G=await e.updateDocumentPageTargets(g,y);return window.emitter.emit("AppBridge:GuidelineDocumentPageTargets:Action",{payload:{targets:g,pageIds:y},action:"update"}),G},[e]),Zr=p.useCallback(async(g,y)=>{const G=await e.updateDocumentTargets(g,y);return window.emitter.emit("AppBridge:GuidelineDocumentTargets:Action",{payload:{targets:g,documentIds:y},action:"update"}),G},[e]);return{createLink:t,updateLink:n,deleteLink:r,createDocumentPage:m,updateDocumentPage:b,deleteDocumentPage:D,duplicateDocumentPage:v,moveDocumentPage:Ce,createLibrary:s,updateLibrary:a,deleteLibrary:i,createDocumentCategory:T,updateDocumentCategory:A,deleteDocumentCategory:_,moveDocumentCategory:R,createCoverPage:C,updateCoverPage:P,deleteCoverPage:se,updateLegacyCoverPage:H,moveDocumentGroup:Te,createDocumentGroup:w,updateDocumentGroup:d,deleteDocumentGroup:u,updateBrandportalLink:Y,createDocument:c,updateDocument:f,deleteDocument:h,moveDocument:ve,updateDocumentPageTargets:Er,updateDocumentTargets:Zr}},ll=e=>{const{openNavigationManager:t}=e;return{openNavigationManager:()=>t()}},dl=(e,t,n)=>{const{themeSettings:r}=Cr(e),[s,a]=p.useState(null),[i,c]=p.useState(!1),[f,h]=p.useState([]),[w,d]=p.useState(null);return p.useEffect(()=>{const m=D=>{a({...D.pageTemplateSettings})};return(async()=>{c(!0);let D=null;if(t==="cover")D=await e.getCoverPageTemplateSettings();else if(n===void 0){console.error(`Document ID is required for ${t} template settings`),d(null),c(!1);return}else t==="documentPage"?D=await e.getDocumentPageTemplateSettings(n):t==="library"&&(D=await e.getLibraryPageTemplateSettings(n));c(!1),a(D)})(),window.emitter.on("AppBridge:PageTemplateSettingsUpdated",m),()=>{window.emitter.off("AppBridge:PageTemplateSettingsUpdated",m)}},[e,n,t]),p.useEffect(()=>{if(!r||!s)return;const m=[],b={...s};for(const D of Object.keys(r))s[D]!==null&&s[D]!==void 0?m.push(D):b[D]=r[D];h(m),d(b)},[r,s]),{pageTemplateSettings:w,customizedPageTemplateSettingsKeys:f,updatePageTemplateSettings:async m=>{try{if(t==="cover")await e.updateCoverPageTemplateSettings(m);else if(n===void 0){console.error(`Document ID is required for ${t} template settings`),c(!1);return}else t==="documentPage"?await e.updateDocumentPageTemplateSettings(n,m):t==="library"&&await e.updateLibraryPageTemplateSettings(n,m);window.emitter.emit("AppBridge:PageTemplateSettingsUpdated",{pageTemplateSettings:{...s,...m}})}catch(b){console.error(b)}},isLoading:i}},ml=e=>{const[t,n]=p.useState(e.getPrivacySettings());return p.useEffect(()=>{const r=s=>n({...t,...s});return window.emitter.on("AppBridge:PrivacySettingsChanged",r),()=>{window.emitter.off("AppBridge:PrivacySettingsChanged",r)}},[t]),t},pl=e=>{const[t,n]=p.useState(!1);return p.useEffect(()=>{const s=document.querySelector(`.block[data-block="${e.getBlockId()}"]`);if(!s){console.error("Could not find block wrapper:",e.getBlockId());return}s.setAttribute("data-ready",t.toString())},[e,t]),{isReadyForPrint:t,setIsReadyForPrint:s=>{n(s)}}},Xe=async({appBridge:e,template:t,documentId:n,documentPageId:r})=>t==="cover"?await e.getCoverPageTemplateAssets():t==="documentPage"&&r?await e.getDocumentPageTemplateAssets(r):t==="library"&&n?await e.getLibraryPageTemplateAssets(n):{},en=async(e,t,{appBridge:n,template:r,documentId:s,documentPageId:a})=>{r==="cover"?await n.addAssetIdsToCoverPageTemplateAssetKey(e,t):r==="documentPage"&&a?await n.addAssetIdsToDocumentPageTemplateAssetKey(a,e,t):r==="library"&&s&&await n.addAssetIdsToLibraryPageTemplateAssetKey(s,e,t)},tn=async(e,t,{appBridge:n,template:r,documentId:s,documentPageId:a})=>{r==="cover"?await n.deleteAssetIdsFromCoverPageTemplateAssetKey(e,t):r==="documentPage"&&a?await n.deleteAssetIdsFromDocumentPageTemplateAssetKey(a,e,t):r==="library"&&s&&await n.deleteAssetIdsFromLibraryPageTemplateAssetKey(s,e,t)},gl=(e,t,n,r)=>{const[s,a]=p.useState({}),{themeAssets:i}=Tr(e),[c,f]=p.useState([]),[h,w]=p.useState({});p.useEffect(()=>{let D=!0;const v=T=>{T.template===t&&T.documentId===n&&T.documentPageId===r&&!F(T.templateAssets,T.prevTemplateAssets)&&a(T.templateAssets)};return t&&((async()=>{const A=await Xe({appBridge:e,template:t,documentId:n,documentPageId:r});D&&a(A)})(),window.emitter.on("AppBridge:TemplateAssetsUpdated",v)),()=>{D=!1,window.emitter.off("AppBridge:TemplateAssetsUpdated",v)}},[e,n,r,t]),p.useEffect(()=>{const D=[],v={...s};for(const T in i)s[T]!==null&&s[T]!==void 0?D.push(T):i[T].length>0&&(v[T]=i[T]);f(D),w(v)},[i,s]);const d=async()=>{window.emitter.emit("AppBridge:TemplateAssetsUpdated",{template:t,documentId:n,documentPageId:r,templateAssets:await Xe({appBridge:e,template:t,documentId:n,documentPageId:r}),prevTemplateAssets:{...s}})};return{templateAssets:h,customizedTemplateAssetsKeys:c,addAssetIdsToKey:async(D,v)=>{await en(D,v,{appBridge:e,template:t,documentId:n,documentPageId:r}),d()},deleteAssetIdsFromKey:async(D,v)=>{await tn(D,v,{appBridge:e,template:t,documentId:n,documentPageId:r}),d()},updateAssetIdsFromKey:async(D,v)=>{var _;const A=((_=(await Xe({appBridge:e,template:t,documentId:n,documentPageId:r}))[D])==null?void 0:_.map(C=>C.id))??[];try{await tn(D,A,{appBridge:e,template:t,documentId:n,documentPageId:r}),await en(D,v,{appBridge:e,template:t,documentId:n,documentPageId:r})}catch(C){console.error(C)}d()}}},Tr=e=>{const t=e.getPortalId(),[n,r]=p.useState({}),s=u=>{u.portalId===t&&!F(u.themeAssets,u.prevThemeAssets)&&r(u.themeAssets)},a=async()=>await e.getThemeAssets(),i=async(u,m)=>{await e.addAssetIdsToThemeAssetKey(u,m)},c=async(u,m)=>{await e.deleteAssetIdsFromThemeAssetKey(u,m)};p.useEffect(()=>{let u=!0;return t&&((async()=>{const b=await a();u&&r(b)})(),window.emitter.on("AppBridge:ThemeAssetsUpdated",s)),()=>{u=!1,window.emitter.off("AppBridge:ThemeAssetsUpdated",s)}},[e]);const f=async()=>{window.emitter.emit("AppBridge:ThemeAssetsUpdated",{portalId:t,themeAssets:await a(),prevThemeAssets:{...n}})};return{themeAssets:n,addAssetIdsToKey:async(u,m)=>{await i(u,m),f()},deleteAssetIdsFromKey:async(u,m)=>{await c(u,m),f()},updateAssetIdsFromKey:async(u,m)=>{var v;const D=((v=(await a())[u])==null?void 0:v.map(T=>T.id))??[];try{await c(u,D),await i(u,m)}catch(T){console.error(T)}f()}}},Cr=e=>{const[t,n]=p.useState(null),[r,s]=p.useState(!0);return p.useEffect(()=>{const i=f=>{n({...f.themeSettings})};return(async()=>{s(!0);const f=await e.getThemeSettings();n(f),s(!1)})(),window.emitter.on("AppBridge:ThemeSettingsUpdated",i),()=>{window.emitter.off("AppBridge:ThemeSettingsUpdated",i)}},[e]),{themeSettings:t,updateThemeSettings:async i=>{try{await e.updateThemeSettings(i),window.emitter.emit("AppBridge:ThemeSettingsUpdated",{themeSettings:{...t,...i}})}catch(c){console.error(c)}},isLoading:r}},fl=e=>({openTemplateChooser:e.openTemplateChooser.bind(e),closeTemplateChooser:e.closeTemplateChooser.bind(e)}),_r=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,hl=(e,t,n={enabled:!0})=>{const[r,s]=p.useState(new Map([])),[a,i]=p.useState(!0),c=p.useCallback(async()=>{i(!0),s(await yl(e,t)),i(!1)},[e,t]);return p.useEffect(()=>{n.enabled&&c()},[n.enabled,c]),p.useEffect(()=>{const f=d=>{for(const u of d.payload.pageIds)if(r.has(u)){c();break}},h=d=>{!r.has(d.documentPage.id)||d.categoryId||s(M.produce(u=>{wl(u,d.documentPage,d.position)}))},w=({action:d,documentPage:u})=>{d==="update"&&r.has(u.id)||d==="add"&&u.documentId===t&&!u.categoryId?c():(d==="delete"||d==="move")&&r.has(u.id)&&s(M.produce(m=>{d==="move"?bl(m,u):d==="delete"&&m.delete(u.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentPage:Action",w),window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",f),window.emitter.on("AppBridge:GuidelineDocumentPage:MoveEvent",h),()=>{window.emitter.off("AppBridge:GuidelineDocumentPage:Action",w),window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",f),window.emitter.off("AppBridge:GuidelineDocumentPage:MoveEvent",h)}},[t,c,r]),{documentPages:Array.from(r.values()),refetch:c,isLoading:a}},wl=(e,t,n)=>{if(!t.sort||!n)return e;const r=e.get(t.id),s=[...e.values()].sort(_r);e.clear();let a=1,i=!0;for(const c of s)c.id!==t.id&&(r&&a===n&&(e.set(t.id,{...r,sort:n}),i=!1),e.set(c.id,{...c,sort:a}),a++);return r&&i&&e.set(t.id,{...r,sort:a}),e},bl=(e,t)=>{const n=[...e.values()];let r=!0;e.clear();for(const s of n)s.id!==t.id&&(e.size===t.sort-1&&(e.set(t.id,t),r=!1),e.set(s.id,s));return r&&e.set(t.id,t),e},yl=async(e,t)=>{const n=await e.getUncategorizedDocumentPagesByDocumentId(t);return new Map([...n].sort(_r).map(r=>[r.id,r]))},be=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Al=(e,t={enabled:!0})=>{const[n,r]=p.useState(new Map([])),[s,a]=p.useState(!0),i=p.useCallback(async()=>{a(!0),r(await Sl(e)),a(!1)},[e]);return p.useEffect(()=>{t.enabled&&i()},[t.enabled,i]),p.useEffect(()=>{const c=m=>{n.has(m.documentPage.documentId)&&r(M.produce(b=>{const D=`${m.action}-page`;return(Ie[D]||Ie.default)(b,m.documentPage)}))},f=m=>{n.has(m.documentCategory.documentId)&&r(M.produce(b=>{const D=`${m.action}-category`;return(Ie[D]||Ie.default)(b,m.documentCategory)}))},h=m=>{(m==null?void 0:m.action)==="update"&&n.size>0&&i()},w=m=>{!n.has(m.document.id)||m.newGroupId||m.document.documentGroupId||r(M.produce(b=>Dl(b,m.document,m.position)))},d=m=>{r(M.produce(b=>vl(b,m==null?void 0:m.documentGroup,m.position)))},u=({action:m,document:b})=>{(m==="update"||m==="move")&&n.has(b.id)||m==="add"&&!b.documentGroupId?i():m==="delete"&&n.has(b.id)&&r(M.produce(D=>{m==="delete"&&D.delete(b.id)}))};return window.emitter.on("AppBridge:GuidelineDocument:Action",u),window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",i),window.emitter.on("AppBridge:GuidelineDocument:DocumentPageAction",c),window.emitter.on("AppBridge:GuidelineDocument:DocumentCategoryAction",f),window.emitter.on("AppBridge:GuidelineDocumentGroup:Action",h),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",w),window.emitter.on("AppBridge:GuidelineDocumentGroup:MoveEvent",d),()=>{window.emitter.off("AppBridge:GuidelineDocument:Action",u),window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",i),window.emitter.off("AppBridge:GuidelineDocument:DocumentPageAction",c),window.emitter.off("AppBridge:GuidelineDocument:DocumentCategoryAction",f),window.emitter.off("AppBridge:GuidelineDocumentGroup:Action",h),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",w),window.emitter.off("AppBridge:GuidelineDocumentGroup:MoveEvent",d)}},[n,t.enabled,i]),{documents:Array.from(n.values()),refetch:i,isLoading:s}},Dl=(e,t,n)=>{if(!t.sort||!n)return e;const r=t.sort,s=[...e.values()].sort(be),a=[];e.clear();for(const c of s){if(c.id===t.id){a.push({...c,sort:n});continue}const f=c.sort??0;let h=0;n<=f&&(h=r>f||r===0?1:0),a.push({...c,sort:f+h})}const i=[...a].sort(be);for(const c of i)e.set(c.id,c);return e},vl=(e,t,n)=>{if(!t.sort)return e;const r=t.sort,s=[...e.values()].sort(be),a=[];e.clear();for(const c of s){const f=c.sort??0;let h=0;n<=f&&(h=r>f?1:0),a.push({...c,sort:f+h})}const i=[...a].sort(be);for(const c of i)e.set(c.id,c);return e},Tl=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfUncategorizedDocumentPages:n.numberOfUncategorizedDocumentPages+1};return e.set(n.id,r)},Cl=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfUncategorizedDocumentPages:n.numberOfUncategorizedDocumentPages-1};return e.set(n.id,r)},_l=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfDocumentPageCategories:n.numberOfDocumentPageCategories+1};return e.set(n.id,r)},Pl=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfDocumentPageCategories:n.numberOfDocumentPageCategories-1};return e.set(n.id,r)},Ie={"add-page":Tl,"delete-page":Cl,"add-category":_l,"delete-category":Pl,default:e=>e},Sl=async e=>{const t=await e.getUngroupedDocuments();return new Map([...t].sort(be).map(n=>[n.id,n]))},Il=()=>{const[e,t]=p.useState();return p.useEffect(()=>{(async()=>{const n=new hr;n.subscribe("Context.connected",()=>{t(n)}),n.dispatch({name:"openConnection"})})()},[]),e};class Ue{static with(t){return{id:t,creatorName:"Creator Name",extension:"png",externalUrl:null,fileName:"fileName.png",title:"A title",status:"FINISHED",objectType:"IMAGE",height:480,width:640,genericUrl:"https://generic.url",previewUrl:"https://preview.url",originUrl:"https://origin.url",projectId:23,fileSize:256,fileSizeHumanReadable:"123.45 MB",fileId:"x1x1x1x1x1x1",token:"--token--",projectType:"STYLEGUIDE",revisionId:1}}}class Pr{static with(t){return{id:t,name:"Frontify Dummy User",email:"test@frontify.test",created:"2020-01-01T00:00:00.000Z",image:{image:"https://dummy.frontify.test/image.png",original:"https://dummy.frontify.test/original_image.png",x:"10",y:"20",width:"30",height:"40"},organization:"Frontify",role:"user",timezone:"UTC",language:"en"}}}class O{static red(t=767){return{id:t,name:"Red",sort:1,nameCss:"red",hex:"ff0000",red:255,green:0,blue:0,alpha:255,hue:361,saturation:100,lightness:46,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}static yellow(t=768){return{id:t,name:"Yellow",sort:2,nameCss:"yellow",red:255,green:255,blue:0,hex:"ffff00",alpha:255,hue:361,saturation:100,lightness:46,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}static green(t=769){return{id:t,name:"Green",sort:3,nameCss:"green",red:0,green:255,blue:0,hex:"00ff00",alpha:255,hue:361,saturation:100,lightness:46,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}}class Gl{static red(){return{colorPaletteId:23,red:255,green:0,blue:0,alpha:255}}}class kl{static red(){return{name:"Red",sort:1,nameCss:"red",red:255,green:0,blue:0,alpha:255,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}}class B{static with(t,n="Color Palette Name"){return{id:t,name:n,description:"Color Palette Description",colors:[O.red(),O.yellow(),O.green()]}}}class xl{static with(t="New Color Palette Name",n="New Color Palette Description"){return{name:t,description:n}}}class Ml{static with(){return{name:"Updated Color Palette Name",description:"Updated Color Palette Description"}}}class tt{static default(){return{downloadUrl:"dummy-url",signature:"dummy-signature"}}}class Sr{static with(t){return{id:t,name:"A template",description:"A description",previewUrl:"https://preview.url",projectId:23,pages:[U({preview_url:"https://preview.url",width:1024,height:768},"camel")]}}}const Ve=3452,Ol=2341,Ll=4561,nn=345214,Ir=({blockSettings:e={},blockAssets:t={},editorState:n=!1,openAssetChooser:r=()=>null,closeAssetChooser:s=()=>null,blockId:a=Ve,sectionId:i=Ol,projectId:c=nn,user:f=Pr.with(Ll),language:h="en",privacySettings:w={assetViewerEnabled:!1,assetDownloadEnabled:!1},blockTemplates:d={}}={})=>{window.emitter=l.spy(vn()),window.blockSettings??(window.blockSettings={}),window.blockSettings[a]=e;const u={},m={},b={},D={};return{getBlockId:l.stub().returns(a),getSectionId:l.stub().returns(i),getProjectId:l.stub().returns(c),getEditorState:l.stub().returns(n),getBlockSettings:l.stub().resolves(window.blockSettings),getAvailablePalettes:l.stub().resolves([B.with(678,"Palette 1"),B.with(427,"Palette 2"),B.with(679,"Palette 3")]),getColorPalettes:l.stub().resolves([B.with(678,"Palette 1"),B.with(427,"Palette 2"),B.with(679,"Palette 3")]),createColorPalette:l.stub().resolves(B.with(678)),updateColorPalette:l.stub().resolves(B.with(678)),getColorsByIds:l.stub().resolves([O.red(9834),O.green(342),O.yellow(9314)]),getColorsByColorPaletteId:l.stub().resolves([O.red(9834),O.green(342),O.yellow(9314)]),getColorPalettesWithColors:l.stub().resolves([B.with(678,"Palette 1"),B.with(427,"Palette 2"),B.with(679,"Palette 3")]),deleteColorPalette:l.stub().resolves(),getAvailableColors:l.stub().resolves([]),getCurrentLoggedUser:l.stub().resolves(f),downloadColorKit:l.stub().returns(`/api/color/export/${nn}/zip/500`),getAssetById:l.stub().callsFake(v=>Promise.resolve(Ue.with(v))),closeAssetChooser:l.stub().callsFake(()=>{s()}),openAssetChooser:l.stub().callsFake(v=>{r(v)}),getBlockAssets:l.stub().callsFake(async()=>Object.entries(t).reduce((v,[T,A])=>{const _=m[T]??[],C=u[T]??[];return v[T]=[...A.filter(P=>!C.includes(P.id)),..._.map(P=>Ue.with(P))],v},{})),addAssetIdsToBlockAssetKey:l.stub().callsFake(async(v,T)=>{m[v]=[...m[v]??[],...T]}),deleteAssetIdsFromBlockAssetKey:l.stub().callsFake(async(v,T)=>{u[v]=[...u[v]??[],...T]}),getBlockTemplates:l.stub().callsFake(async()=>Object.entries(d).reduce((v,[T,A])=>{const _=D[T]??[],C=b[T]??[];return v[T]=[...A.filter(P=>!C.includes(P.id)),..._.map(P=>Sr.with(P))],v},{})),addTemplateIdsToBlockTemplateKey:l.stub().callsFake(async(v,T)=>{D[v]=[...D[v]??[],...T]}),deleteTemplateIdsFromBlockTemplateKey:l.stub().callsFake(async(v,T)=>{b[v]=[...b[v]??[],...T]}),getTranslationLanguage:l.stub().returns(h),getColors:l.stub().resolves([O.red(9834),O.green(342),O.yellow(9314)]),updateColor:l.stub().callsFake(v=>Promise.resolve(O.red(v))),getBulkDownloadBySignature:l.stub().resolves(tt.default()),getBulkDownloadByToken:l.stub().resolves(tt.default()),getPrivacySettings:l.stub().returns(w),api:l.stub().withArgs().resolves().withArgs({name:"getAssetBulkDownloadToken",payload:{settingIds:["settings1","settings2"],documentBlockId:Ve}}).resolves({assetBulkDownloadToken:"token"}).withArgs({name:"getAssetBulkDownloadToken",payload:{settingIds:void 0,documentBlockId:Ve}}).resolves({assetBulkDownloadToken:"token"}),closeTemplateChooser:l.stub(),openTemplateChooser:l.stub(),createColor:l.stub().resolves(O.red()),deleteColor:l.stub().resolves(),getTemplateById:l.stub().resolves({}),openAssetViewer:l.stub(),updateBlockSettings:l.stub().resolves(),getAllDocuments:l.stub().resolves(),getUngroupedDocuments:l.stub().resolves(),getDocumentsByDocumentGroupId:l.stub().resolves(),getDocumentGroups:l.stub().resolves(),getDocumentPagesByDocumentId:l.stub().resolves(),getDocumentPagesByDocumentCategoryId:l.stub().resolves(),getDocumentCategoriesByDocumentId:l.stub().resolves(),getUncategorizedDocumentPagesByDocumentId:l.stub().resolves(),getDocumentSectionsByDocumentPageId:l.stub().resolves(),getDocumentTargets:l.stub().resolves(),getDocumentPageTargets:l.stub().resolves(),state:l.stub().resolves(),context:l.stub().resolves(),subscribe:l.stub().resolves(),dispatch:l.stub().resolves()}},Bl=()=>({api:l.stub().resolves(),state:l.stub().resolves(),context:l.stub().resolves(),subscribe:l.stub().resolves(),dispatch:l.stub().resolves()});class Gr{static with(t){return{highlights:[t],type:"BLOCK",object_id:1,page_id:1,page_slug:"page-slug",page_title:"Page Title",page_category_slug:"page-category-slug",block_id:1,document_id:1,document_slug:"document-slug",document_title:"Document Title",portal_id:1,portal_token:"portal-token",section_id:null,section_slug:null,section_title:null,color_hex:void 0}}}class xe{static with(t){return U(Gr.with(t),"camel")}}const Ul=234551,Rl=3452,rn=7777,j=5332,Nl=95694,$l=345882,Ge=6456,on=34532,sn=3455345,an=2342,cn=2343445,un=2434,ln=552,dn=1145,mn=32345,He=147,El=258,Zl=369,ke=23442,pn=235345,gn=12352,fn=55221,hn=24324,wn=3532,bn=98954,jl=3421,zl=65725,Kl=95934,Wl=2341,yn=653543,An=23411,Dn=56657,kr=({editorState:e=!1,brandId:t=Ul,portalId:n=rn,projectId:r=Rl,pageTemplateSettings:s={},pageTemplateAssets:a={},themeSettings:i={},themeAssets:c={},language:f="en",openAssetChooser:h=()=>null,closeAssetChooser:w=()=>null}={})=>{window.emitter=l.spy(vn());let d=s,u=i;const m={},b={},D=async A=>Object.entries(A).reduce((_,[C,P])=>{const H=b[C]??[],se=m[C]??[];return _[C]=[...P.filter(Y=>!se.includes(Y.id)),...H.map(Y=>Ue.with(Y))],_},{}),v=async()=>D(a),T=async()=>D(c);return{getPortalId:l.stub().returns(n),getProjectId:l.stub().returns(r),getEditorState:l.stub().returns(e),getCoverPage:l.stub().resolves(me.with(rn)),getAllDocuments:l.stub().resolves([S.with(Ge),S.with(on),S.with(sn),S.with(an),S.with(cn),S.withDocumentGroupId(un,j),S.withDocumentGroupId(ln,j),S.withDocumentGroupId(dn,j),S.withDocumentGroupId(mn,j)]),getUngroupedDocuments:l.stub().resolves([S.with(Ge),S.with(on),S.with(sn),S.with(an),S.with(cn)]),getDocumentsByDocumentGroupId:l.stub().resolves([S.withDocumentGroupId(un,j),S.withDocumentGroupId(ln,j),S.withDocumentGroupId(dn,j),S.withDocumentGroupId(mn,j)]),getDocumentGroups:l.stub().resolves([te.with(j,3),te.with(Nl,0),te.with($l,2)]),getDocumentPagesByDocumentId:l.stub().resolves([k.with(ke),k.with(pn),k.with(hn),k.with(gn),k.with(wn),k.with(fn),k.with(bn)]),getDocumentPagesByDocumentCategoryId:l.stub().callsFake(A=>Promise.resolve([k.withFields({id:ke,categoryId:A,sort:1}),k.withFields({id:pn,categoryId:A,sort:2}),k.withFields({id:gn,categoryId:A,sort:3}),k.withFields({id:fn,categoryId:A,sort:4})])),getDocumentCategoriesByDocumentId:l.stub().callsFake(A=>Promise.resolve([ee.withDocumentIdAndNumberOfDocumentPages(He,A,2),ee.withDocumentIdAndNumberOfDocumentPages(El,A,0),ee.withDocumentIdAndNumberOfDocumentPages(Zl,A,2)])),getUncategorizedDocumentPagesByDocumentId:l.stub().callsFake(A=>Promise.resolve([k.withFields({id:hn,documentId:A,categoryId:null,sort:1}),k.withFields({id:wn,documentId:A,categoryId:null,sort:2}),k.withFields({id:bn,documentId:A,categoryId:null,sort:3})])),getDocumentSectionsByDocumentPageId:l.stub().resolves([Oe.with(jl),Oe.with(zl),Oe.with(Kl)]),getColorPalettes:l.stub().resolves([B.with(678,"Palette 1"),B.with(427,"Palette 2"),B.with(679,"Palette 3")]),getColorsByColorPaletteId:l.stub().resolves([O.red(9834),O.green(342),O.yellow(9314)]),duplicateDocumentPage:l.stub().resolves(Br.with(Wl)),getDocumentTargets:l.stub().resolves(Nr.with(Ge)),getDocumentPageTargets:l.stub().resolves($r.with(ke)),addAssetIdsToCoverPageTemplateAssetKey:l.stub().callsFake(async(A,_)=>(b[A]=[...b[A]??[],..._],a)),addAssetIdsToThemeAssetKey:l.stub().callsFake(async(A,_)=>(b[A]=[...b[A]??[],..._],a)),addAssetIdsToLibraryPageTemplateAssetKey:l.stub().callsFake(async(A,_,C)=>(b[_]=[...b[_]??[],...C],a)),addAssetIdsToDocumentPageTemplateAssetKey:l.stub().callsFake(async(A,_,C)=>(b[_]=[...b[_]??[],...C],a)),getCoverPageTemplateAssets:l.stub().callsFake(v),getThemeAssets:l.stub().callsFake(T),getLibraryPageTemplateAssets:l.stub().callsFake(v),getDocumentPageTemplateAssets:l.stub().callsFake(v),deleteAssetIdsFromCoverPageTemplateAssetKey:l.stub().callsFake(async(A,_)=>{m[A]=[...m[A]??[],..._]}),deleteAssetIdsFromThemeAssetKey:l.stub().callsFake(async(A,_)=>{m[A]=[...m[A]??[],..._]}),deleteAssetIdsFromLibraryPageTemplateAssetKey:l.stub().callsFake(async(A,_,C)=>{m[_]=[...m[_]??[],...C]}),deleteAssetIdsFromDocumentPageTemplateAssetKey:l.stub().callsFake(async(A,_,C)=>{m[_]=[...m[_]??[],...C]}),getCoverPageTemplateSettings:l.stub().resolves(d),getDocumentPageTemplateSettings:l.stub().resolves(d),getLibraryPageTemplateSettings:l.stub().resolves(d),getThemeSettings:l.stub().resolves(u),createLink:l.stub().resolves(S.with(1)),createLibrary:l.stub().resolves(S.with(1)),createStandardDocument:l.stub().resolves(S.with(1)),createDocumentPage:l.stub().resolves(k.with(1)),createDocumentGroup:l.stub().resolves(te.with(1,0)),createDocumentCategory:l.stub().resolves(ee.with(1)),createCoverPage:l.stub().resolves(me.with(1)),updateLink:l.stub().resolves(S.with(1)),updateLibrary:l.stub().resolves(S.with(1)),updateStandardDocument:l.stub().resolves(S.with(1)),updateDocumentPage:l.stub().resolves(k.with(1)),updateDocumentGroup:l.stub().resolves(te.with(1,0)),updateDocumentCategory:l.stub().resolves(ee.with(1)),updateCoverPage:l.stub().resolves(me.with(1)),updateLegacyCoverPage:l.stub().resolves(me.withLegacy(1)),updateBrandportalLink:l.stub().resolves(nt.with()),updateCoverPageTemplateSettings:l.stub().callsFake(async A=>{d=J(d,A)}),updateDocumentPageTemplateSettings:l.stub().callsFake(async A=>{d=J(d,A)}),updateLibraryPageTemplateSettings:l.stub().callsFake(async A=>{d=J(d,A)}),updateThemeSettings:l.stub().callsFake(async A=>{u=J(u,A)}),deleteCoverPage:l.stub().resolves(),deleteDocumentCategory:l.stub().resolves(),deleteDocumentGroup:l.stub().resolves(),deleteDocumentPage:l.stub().resolves(),deleteLibrary:l.stub().resolves(),deleteLink:l.stub().resolves(),deleteStandardDocument:l.stub().resolves(),getBrandId:l.stub().returns(t),getBrandportalLink:l.stub().resolves(nt.with()),getTranslationLanguage:l.stub().returns(f),moveDocument:l.stub().resolves(S.with(Ge)),moveDocumentCategory:l.stub().resolves(ee.with(He)),moveDocumentGroup:l.stub().resolves(te.with(He,0)),moveDocumentPage:l.stub().resolves(k.with(ke)),openNavigationManager:l.stub(),updateDocumentPageTargets:l.stub().resolves(ot.with([yn,An,Dn])),updateDocumentTargets:l.stub().resolves(ot.with([yn,An,Dn])),searchInGuideline:l.stub().callsFake(async A=>Promise.resolve([xe.with(`${A}-1`),xe.with(`${A}-1`),xe.with(`${A}-3`)])),closeAssetChooser:l.stub().callsFake(()=>{w()}),openAssetChooser:l.stub().callsFake(A=>{h(A)}),api:l.stub().resolves(),state:l.stub().resolves(),context:l.stub().resolves(),subscribe:l.stub().resolves(),dispatch:l.stub().resolves()}};class Xl{static with(t){return{id:t,creator_name:"Creator Name",ext:"png",external_url:null,file_id:"x1x1x1x1x1x1",file_name:"fileName.png",generic_url:"https://generic.url",height:480,object_type:"IMAGE",file_origin_url:"https://origin.url",preview_url:"https://preview.url",project_id:23,project_name:null,project_type:"STYLEGUIDE",file_size:256,file_size_formatted:"123.45 MB",status:"FINISHED",title:"A title",width:640,token:"--token--",revision_id:1}}}class Vl{static default(){return{projectTypes:Object.values(it),objectTypes:[ct.Canvas],extensions:[o.Jpg,o.Png,o.Svg],multiSelection:!0,urlContains:"abc.xyz"}}static withSingleSelectedValue(t){return{...this.default(),multiSelection:!1,selectedValueId:t}}static withMultiSelectedValues(t){return{...this.default(),multiSelection:!0,selectedValueIds:t}}}class Hl{static with(t){return{id:t,creator_name:"Creator Name",ext:"png",external_url:null,file_id:"x1x1x1x1x1x1",file_name:"fileName.png",generic_url:"https://generic.url",height:480,object_type:"IMAGE",file_origin_url:"https://origin.url",preview_url:"https://preview.url",project:23,project_name:null,project_type:"STYLEGUIDE",filesize:256,file_size_formatted:"123.45 MB",status:"FINISHED",title:"A title",width:640,token:"--token--",revision_id:1}}}class xr{static get(){return{brand_portal:{enabled:!0,label:"Brandportal Link",url:"/url"}}}}class nt{static with(t){return{...U(xr.get().brand_portal,"camel"),...t}}}class Me{static red(t=767){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Red",name_css:"red",sort:1,r:255,g:0,b:0,hex:"ff0000",alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}static yellow(t=768){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Yellow",name_css:"yellow",sort:2,hex:"ffff00",r:255,g:255,b:0,alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}static green(t=769){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Green",name_css:"green",sort:3,hex:"00ff00",r:0,g:255,b:0,alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}}class Yl{static red(){return{project_color_palette_id:23,red:255,green:0,blue:0,alpha:255}}}class Jl{static red(){return{name:"Red",sort:1,name_css:"red",red:255,green:0,blue:0,alpha:255,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}static yellow(){return{name:"Yellow",sort:2,name_css:"yellow",red:255,green:255,blue:0,alpha:255,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}static green(){return{name:"Green",sort:3,name_css:"green",red:0,green:255,blue:0,alpha:255,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}}class Ql{static with(t,n="Color Palette Name"){return{id:t,name:n,description:"Color Palette Description",colors:[Me.red(),Me.yellow(),Me.green()]}}}class Fl{static with(t=322){return{project_id:t,name:"New Color Palette Name",description:"New Color Palette Description"}}}class ql{static with(){return{name:"Updated Color Palette Name",description:"Updated Color Palette Description"}}}class Mr{static with(t,n="Cover Page Name"){return{template:"hub",document_id:"1",brandhome:{id:t,title:n,active:!0,draft:1,enabled:1,url:`/hub/${t}`,hide_in_nav:!1}}}}class me{static with(t,n="Cover Page Name"){const r=Mr.with(t,n);return{...U(r.brandhome,"camel"),template:r.template,documentId:r.document_id,draft:!!r.brandhome.draft,enabled:!!r.brandhome.enabled}}static withLegacy(t,n="Legacy Cover Page"){return{brandhome_draft:!0,brandhome_title:n,brandhome_hide_in_nav:!1}}}class rt{static with(t){return{id:t,creator:9,created:"2022-03-03t15:41:33.000+00:00",modifier:null,modified:null,project_id:345,valid_from:"2022-03-03t15:41:33.000+00:00",valid_to:null,visibility:"private",portal_id:3495,title:`Document ${t}`,slug:`document-${t}`,heading:"Document Dummy heading",subheading:"Document Dummy subHeading",description:null,logo:null,sort:5,lazy:!0,link_type:st.Internal,link_url:null,link_settings:null,view_count:0,mode:"DEFAULT",appearance:null,settings:{},logo_file_id:null,logo_settings:[],background_file_id:null,background_settings:[],change_processed:null,change_processed_by:null,change_skipped:null,change_skipped_by:null,change_comment:null,change_comment_by:null,change_title:null,targets:[],token:"a-dummy-token",permanent_link:`/r/document-${t}`,number_of_document_page_categories:0,number_of_uncategorized_document_pages:0}}}class ye{static with(t,n=[]){return{id:t,creator:9,created:"2022-08-15T11:47:47.000+00:00",modifier:null,modified:null,document_id:456,valid_from:"2022-08-15T11:47:47.000+00:00",valid_to:null,title:`Document Category Dummy ${t}`,slug:`document-category-dummy-${t}`,sort:1,number_of_document_pages:n.length}}static withDocumentIdAndNumberOfDocumentPages(t,n,r){return{...ye.with(t),document_id:n,number_of_document_pages:r}}}class ee{static with(t){return U(ye.with(t),"camel")}static withDocumentIdAndNumberOfDocumentPages(t,n,r){return U(ye.withDocumentIdAndNumberOfDocumentPages(t,n,r),"camel")}static withFields(t){return{...t}}}class S{static with(t){return U(rt.with(t),"camel")}static withDocumentGroupId(t,n){return{...U(rt.with(t),"camel"),documentGroupId:n}}static withFields(t){return{...t}}}class Or{static with(t,n=0){return{id:t,creator:9,created:"2022-07-11 14:00:49",modified:"2022-08-15 07:59:28",modifier:9,valid_to:null,project_id:113,portal_id:175,name:`Document Group Dummy ${t}`,sort:1,number_of_documents:n}}}class te{static with(t,n=0){return U(Or.with(t,n),"camel")}static withFields(t){return{...t}}}class Ze{static with(t){return{id:t,creator:9,created:"2022-08-15T11:47:57.000+00:00",modifier:null,modified:null,document_id:145,category_id:29,parent_id:null,valid_from:"2022-08-15T11:47:57.000+00:00",valid_to:null,title:`Document Page Dummy ${t}`,slug:`document-page-dummy-${t}`,sort:1,link_type:"INTERNAL",link_url:null,view_count:0,visibility:at.Everyone,change_processed:null,change_processed_by:null,change_skipped:null,change_skipped_by:null,change_comment:null,change_comment_by:null,change_title:null,targets:null,permanent_link:`/r/document-page-${t}`}}static withFields(t){return{...Ze.with(t.id),...t}}}class Lr{static with(t){return{page:{id:t,link_type:"INTERNAL",name:"Document page duplicate dummy",sections:[],url:`document-page-duplicate-dummy-${t}`,visibility:"EVERYONE"}}}}class k{static with(t){return U(Ze.with(t),"camel")}static withFields(t){return{...k.with(t.id),...t}}}class Br{static with(t){return U(Lr.with(t).page,"camel")}}class ed{static with(t){return{id:t,creator:9,created:"2022-04-04T15:36:36.000+00:00",modifier:9,modified:"2022-04-04T15:36:43.000+00:00",document_id:1,page_id:6,revision:null,valid_from:"2022-04-04T15:36:36.000+00:00",valid_to:null,title:`Document Section Dummy ${t}`,slug:`document-section-dummy-${t}`,sort:1,permanent_link:`/r/document-section-${t}`}}}class Oe{static with(t){return{id:t,title:`Document Section Dummy ${t}`,slug:`document-section-dummy-${t}`,sort:1,permanentLink:`/r/document-section-${t}`}}}class td{static successWith(t){return{result:{success:!0,data:t}}}static success(){return{result:{success:!0,data:void 0}}}static failure(){return{result:{success:!1,data:void 0}}}}class ne{static target(t){return{checked:!1,disabled:!1,indeterminate:!1,label:String(t),target:{account_id:1,asset_ids:[],created:"2022-06-10T12:35:52.000+00:00",creator:1,description:"Target description",group_ids:[],id:t,modified:null,modifier:null,name:`Target ${t}`,sort:1,total_groups:null,total_links:null,total_users:null,user_ids:[]},value:t}}}class Ur{static with(t){return{appearance:{},background_file_id:null,background_url:null,heading:null,id:t,link_type:null,link_url:null,logo_file_id:null,logo_url:null,mode:null,portal_title:"Portal title",subheading:null,success:!0,targets:{disabled:[],has_selected_targets:!0,targets:[ne.target(1),ne.target(2),ne.target(3)]},title:"Test document"}}}class nd{static with(t){return{success:!0,data:!0,targets:t}}}class Rr{static with(t){return{default:!1,disabled:[],has_selected_targets:!0,id:t,success:!0,targets:[ne.target(1),ne.target(2),ne.target(3)]}}}class Nr{static with(t){return U(Ur.with(t).targets,"camel")}}class $r{static with(t){return U(Rr.with(t),"camel")}}class ot{static with(t){return{success:!0,data:!0,targets:t}}}class rd{static with(t){return{asset_created:"2022-04-06",asset_modified:"2022-04-06",categories:[],description:"A description",height:480,id:t,name:"A template",preview:"https://preview.url",project:23,project_name:"A project",project_type:"A project type",published:1,screen_id:1,sector:"A sector",token:"--token--",unit:"px",width:640}}}class od{static with(t){return{id:t,title:"A template",description:"A description",previewUrl:"https://preview.url",projectId:23,height:480,width:640,published:!0}}}class sd{static with(t){return{id:t,name:"Frontify Dummy User",email:"test@frontify.test",created:"2020-01-01T00:00:00.000Z",image:{image:"https://dummy.frontify.test/image.png",original:"https://dummy.frontify.test/original_image.png",x:"10",y:"20",width:"30",height:"40"},organization:"Frontify",role:"user",timezone:"UTC",language:"en"}}}function ad(e,t){const n=Ir(t??{}),r=a=>p.createElement(e,{appBridge:n,...a}),s=e.displayName||e.name||"Component";return r.displayName=`withAppBridgeBlockStubs(${s})`,[r,n]}function id(e,t){const n=kr(t??{}),r=a=>p.createElement(e,{appBridge:n,...a}),s=e.displayName||e.name||"Component";return r.displayName=`withAppBridgeThemeStubs(${s})`,[r,n]}M.enableMapSet();exports.AppBridgeCreateAsset=iu;exports.AppBridgePlatformApp=hr;exports.AssetApiDummy=Xl;exports.AssetBulkDownloadState=wr;exports.AssetChooserObjectType=ct;exports.AssetChooserOptionsDummy=Vl;exports.AssetChooserProjectType=it;exports.AssetChooserResultDummy=Hl;exports.AssetDummy=Ue;exports.BrandportalLinkApiDummy=xr;exports.BrandportalLinkDummy=nt;exports.BulkDownloadDummy=tt;exports.ColorApiCreateDummy=Yl;exports.ColorApiDummy=Me;exports.ColorApiPatchDummy=Jl;exports.ColorCreateDummy=Gl;exports.ColorDummy=O;exports.ColorPaletteApiCreateDummy=Fl;exports.ColorPaletteApiDummy=Ql;exports.ColorPaletteApiPatchDummy=ql;exports.ColorPaletteCreateDummy=xl;exports.ColorPaletteDummy=B;exports.ColorPalettePatchDummy=Ml;exports.ColorPatchDummy=kl;exports.CoverPageApiDummy=Mr;exports.CoverPageDummy=me;exports.DocumentApiDummy=rt;exports.DocumentCategoryApiDummy=ye;exports.DocumentCategoryDummy=ee;exports.DocumentDummy=S;exports.DocumentGroupApiDummy=Or;exports.DocumentGroupDummy=te;exports.DocumentPageApiDummy=Ze;exports.DocumentPageDummy=k;exports.DocumentPageDuplicateApiDummy=Lr;exports.DocumentPageDuplicateDummy=Br;exports.DocumentPageTargetsApiDummy=Rr;exports.DocumentPageTargetsDummy=$r;exports.DocumentPageVisibility=at;exports.DocumentSectionApiDummy=ed;exports.DocumentSectionDummy=Oe;exports.DocumentTargetsApiDummy=Ur;exports.DocumentTargetsDummy=Nr;exports.FetchError=pr;exports.FileExtension=o;exports.FileExtensionSets=Kr;exports.FileType=_n;exports.GuidelineSearchResultApiDummy=Gr;exports.GuidelineSearchResultDummy=xe;exports.GuidelineSearchResultTypeMap=Wr;exports.HttpClient=kn;exports.HttpClientError=Gn;exports.HttpUtilResponseDummy=td;exports.InitializationError=yt;exports.LinkSettingsDisplay=Tn;exports.LinkSettingsIconPosition=Cn;exports.LinkType=st;exports.SUBSCRIBE_TIMEOUT=bt;exports.SingleTargetApiDummy=ne;exports.TemplateApiLegacyDummy=rd;exports.TemplateDummy=Sr;exports.TemplateLegacyDummy=od;exports.TerrificEvent=Pn;exports.TimeoutReachedError=wt;exports.Topic=x;exports.UpdateTargetsApiDummy=nd;exports.UpdateTargetsDummy=ot;exports.UserApiDummy=sd;exports.UserDummy=Pr;exports.ValidationError=gr;exports.closeAssetChooser=mu;exports.closeTemplateChooser=wu;exports.compareObjects=F;exports.convertObjectCase=U;exports.createAsset=cu;exports.downloadAsset=gu;exports.generateRandomString=Re;exports.getAppBridgeBlockStub=Ir;exports.getAppBridgePlatformAppStub=Bl;exports.getAppBridgeThemeStub=kr;exports.getAssetResourceInformation=uu;exports.getCurrentUser=lu;exports.getDatasetByClassName=Hr;exports.getDatasetByElement=Sn;exports.getMimeType=Yr;exports.isObject=ge;exports.mergeDeep=J;exports.mimeTypes=In;exports.notify=$;exports.openAssetChooser=du;exports.openAssetViewer=pu;exports.openConnection=fr;exports.openNavigationManager=fu;exports.openNewPublication=bu;exports.openTemplateChooser=hu;exports.rgbObjectToRgbString=Vr;exports.rgbStringToRgbObject=Xr;exports.subscribe=z;exports.useAssetBulkDownload=yu;exports.useAssetChooser=Au;exports.useAssetUpload=Cu;exports.useAssetViewer=_u;exports.useBlockAssets=Pu;exports.useBlockSettings=Iu;exports.useBlockTemplates=Su;exports.useBrandportalLink=ku;exports.useCategorizedDocumentPages=xu;exports.useColorPalettes=Bu;exports.useColors=Uu;exports.useCoverPage=Ru;exports.useDocumentCategories=Nu;exports.useDocumentGroups=zu;exports.useDocumentPageTargets=Yu;exports.useDocumentSection=Qu;exports.useDocumentTargets=Fu;exports.useEditorState=el;exports.useFileInput=tl;exports.useFileUpload=yr;exports.useGroupedDocuments=nl;exports.useGuidelineActions=ul;exports.useNavigationManager=ll;exports.usePageTemplateSettings=dl;exports.usePlatformAppBridge=Il;exports.usePrivacySettings=ml;exports.useReadyForPrint=pl;exports.useTemplateAssets=gl;exports.useTemplateChooser=fl;exports.useThemeAssets=Tr;exports.useThemeSettings=Cr;exports.useUncategorizedDocumentPages=hl;exports.useUngroupedDocuments=Al;exports.withAppBridgeBlockStubs=ad;exports.withAppBridgeThemeStubs=id;
//# sourceMappingURL=index.cjs.js.map
