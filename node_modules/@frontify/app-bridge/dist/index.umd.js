(function(c,k){typeof exports=="object"&&typeof module<"u"?k(exports,require("immer"),require("react"),require("mitt"),require("sinon")):typeof define=="function"&&define.amd?define(["exports","immer","react","mitt","sinon"],k):(c=typeof globalThis<"u"?globalThis:c||self,k(c.AppBridge={},c.immer,c.React,c.mitt,c.sinon))})(this,function(c,k,p,Dt,d){"use strict";var Ke=(e=>(e.External="EXTERNAL",e.Internal="INTERNAL",e))(Ke||{}),vt=(e=>(e.TextAndIcon="ICON_TEXT",e.IconOnly="ICON",e.TextOnly="TEXT",e))(vt||{}),Tt=(e=>(e.Right="RIGHT",e.Left="LEFT",e))(Tt||{}),We=(e=>(e.Everyone="EVERYONE",e.Editor="EDITOR",e))(We||{}),o=(e=>(e.Aac="aac",e.Ac3="ac3",e.Ai="ai",e.Aif="aif",e.Aifc="aifc",e.Aiff="aiff",e.Artboard="artboard",e.Asc="asc",e.Atom="atom",e.Au="au",e.Avi="avi",e.Bcpio="bcpio",e.Bin="bin",e.Bmp="bmp",e.Cdf="cdf",e.Cgm="cgm",e.Class="class",e.Cpio="cpio",e.Cpt="cpt",e.Csh="csh",e.Css="css",e.Dcr="dcr",e.Dif="dif",e.Dir="dir",e.Djv="djv",e.Djvu="djvu",e.Dll="dll",e.Dmg="dmg",e.Dms="dms",e.Dng="dng",e.Doc="doc",e.Docx="docx",e.Dotx="dotx",e.Docm="docm",e.Dotm="dotm",e.Dtd="dtd",e.Dv="dv",e.Dvi="dvi",e.Dxr="dxr",e.Eps="eps",e.Etx="etx",e.Exe="exe",e.Ez="ez",e.Flac="flac",e.Flv="flv",e.Gif="gif",e.Gram="gram",e.Grxml="grxml",e.Gtar="gtar",e.Hdf="hdf",e.Heif="heif",e.Hqx="hqx",e.Htm="htm",e.Html="html",e.Ice="ice",e.Ico="ico",e.Ics="ics",e.Idml="idml",e.Ief="ief",e.Ifb="ifb",e.Iges="iges",e.Igs="igs",e.Indd="indd",e.Indt="indt",e.Jnlp="jnlp",e.Jp2="jp2",e.Jpe="jpe",e.Jpeg="jpeg",e.Jpg="jpg",e.Js="js",e.Kar="kar",e.Latex="latex",e.Lha="lha",e.Lzh="lzh",e.M3u="m3u",e.M4a="m4a",e.M4b="m4b",e.M4p="m4p",e.M4r="m4r",e.M4u="m4u",e.M4v="m4v",e.Mac="mac",e.Man="man",e.Mathml="mathml",e.Me="me",e.Mesh="mesh",e.Mid="mid",e.Midi="midi",e.Mif="mif",e.Mkv="mkv",e.Mov="mov",e.Movie="movie",e.Mp2="mp2",e.Mp3="mp3",e.Mp4="mp4",e.Mpe="mpe",e.Mpeg="mpeg",e.Mpg="mpg",e.Mpga="mpga",e.Ms="ms",e.Msh="msh",e.Mts="mts",e.Mxu="mxu",e.Nc="nc",e.Oda="oda",e.Ogg="ogg",e.Pbm="pbm",e.Pct="pct",e.Pdb="pdb",e.Pdf="pdf",e.Pgm="pgm",e.Pgn="pgn",e.Pic="pic",e.Pict="pict",e.Png="png",e.Pnm="pnm",e.Pnt="pnt",e.Pntg="pntg",e.Ppm="ppm",e.Ppt="ppt",e.Pptx="pptx",e.Potx="potx",e.Ppsx="ppsx",e.Ppam="ppam",e.Pptm="pptm",e.Potm="potm",e.Ppsm="ppsm",e.Ps="ps",e.Psd="psd",e.Qt="qt",e.Qti="qti",e.Qtif="qtif",e.Ra="ra",e.Ram="ram",e.Ras="ras",e.Rdf="rdf",e.Rgb="rgb",e.Rm="rm",e.Roff="roff",e.Rtf="rtf",e.Rtx="rtx",e.Sgm="sgm",e.Sgml="sgml",e.Sh="sh",e.Shar="shar",e.Silo="silo",e.Sit="sit",e.Skd="skd",e.Sketch="sketch",e.Skm="skm",e.Skp="skp",e.Skt="skt",e.Smi="smi",e.Smil="smil",e.Snd="snd",e.So="so",e.Spl="spl",e.Src="src",e.Sv4cpio="sv4cpio",e.Sv4crc="sv4crc",e.Svg="svg",e.Swf="swf",e.T="t",e.Tar="tar",e.Tcl="tcl",e.Tex="tex",e.Texi="texi",e.Texinfo="texinfo",e.Tif="tif",e.Tiff="tiff",e.Tr="tr",e.Tsv="tsv",e.Txt="txt",e.Ustar="ustar",e.Vcd="vcd",e.Vrml="vrml",e.Vxml="vxml",e.Wav="wav",e.Wbmp="wbmp",e.Wbmxl="wbmxl",e.Webm="webm",e.Webp="webp",e.Wml="wml",e.Wmlc="wmlc",e.Wmls="wmls",e.Wmlsc="wmlsc",e.Wmv="wmv",e.Wrl="wrl",e.Xbm="xbm",e.Xht="xht",e.Xhtml="xhtml",e.Xls="xls",e.Xml="xml",e.Xpm="xpm",e.Xsl="xsl",e.Xlsx="xlsx",e.Xltx="xltx",e.Xlsm="xlsm",e.Xltm="xltm",e.Xlam="xlam",e.Xlsb="xlsb",e.Xslt="xslt",e.Xul="xul",e.Xwd="xwd",e.Xyz="xyz",e.Zip="zip",e.Tpl="tpl",e))(o||{});const jn={Audio:[o.Aac,o.Ac3,o.Aif,o.Aifc,o.Aiff,o.Flac,o.M4a,o.M4r,o.Mp3,o.Ogg,o.Wav],Documents:[o.Doc,o.Docx,o.Dotx,o.Pdf,o.Potx,o.Ppt,o.Pptx,o.Xls,o.Xlsx,o.Xltx],Images:[o.Ai,o.Bmp,o.Dng,o.Eps,o.Gif,o.Heif,o.Ico,o.Jpeg,o.Jpg,o.Png,o.Psd,o.Svg,o.Tif,o.Tiff,o.Webp],Videos:[o.Avi,o.Flv,o.M4v,o.Mkv,o.Mov,o.Mp4,o.Mpg,o.Mts,o.Webm,o.Wmv],Templates:[o.Artboard,o.Idml,o.Indd,o.Indt,o.Sketch]};var Ct=(e=>(e.Audio="audio",e.Documents="documents",e.Images="images",e.Videos="videos",e.Templates="templates",e))(Ct||{});const zn={block:"BLOCK",section:"SECTION",page:"PAGE",color:"COLOR"};var _t=(e=>(e.OpenModal="onOpenModal",e.CloseModal="onCloseModal",e))(_t||{}),Xe=(e=>(e.MediaLibrary="MediaLibrary",e.LogoLibrary="LogoLibrary",e.IconLibrary="IconLibrary",e.DocumentLibrary="DocumentLibrary",e.TemplateLibrary="TemplateLibrary",e.PatternLibrary="PatternLibrary",e.Styleguide="Styleguide",e.Workspace="Workspace",e))(Xe||{}),Re=(e=>(e.File="FILE",e.Canvas="CANVAS",e.ImageVideo="IMAGE",e.TextSnippet="TEXT_SNIPPET",e.Url="URL",e))(Re||{}),O=(e=>(e.CloseApp="closeApp",e.DeleteAppState="deleteAppState",e.GetAppState="getAppState",e.GetAssetById="getAssetById",e.GetProjectId="getProjectId",e.GetRefreshedThirdpartyOauth2Token="getRefreshedThirdpartyOauth2Token",e.GetThirdPartyOauth2Tokens="getThirdPartyOauth2Tokens",e.OpenAssetChooser="openAssetChooser",e.PostExternalAssets="postExternalAssets",e.PutAppState="putAppState",e.Init="Init",e))(O||{});const Kn=e=>{const t=s=>{const i=s.trim();return i.startsWith("rgba(")||i.startsWith("rgb(")},r=e.split("(")[1].split(")")[0].split(","),n=r.slice(0,2).every(s=>s.trim()===parseInt(s).toString());if(!t(e)||!n)throw new Error(`String is not a valid color (passed: "${e}").`);const a=r.map(s=>parseFloat(s));return{red:a[0],green:a[1],blue:a[2],alpha:(a==null?void 0:a[3])||1}},Wn=e=>"alpha"in e?`rgba(${e.red}, ${e.green}, ${e.blue}, ${e.alpha})`:`rgb(${e.red}, ${e.green}, ${e.blue})`,Pt=e=>{const t=Object.keys(e).filter(r=>r.startsWith("jQuery")).reduce((r,n)=>({...r,...e[n]}),{});return{...e.dataset,...t}},Xn=e=>{const t=document.getElementsByClassName(e)[0];if(!t)throw new Error("Could not find the DOM node via class name");return Pt(t)},St={[o.Aac]:"audio/aac",[o.Ac3]:"audio/ac3",[o.Ai]:"application/postscript",[o.Aif]:"audio/x-aiff",[o.Aifc]:"audio/x-aiff",[o.Aiff]:"audio/x-aiff",[o.Artboard]:"application/octet-stream",[o.Asc]:"text/plain",[o.Atom]:"application/atom+xml",[o.Au]:"audio/basic",[o.Avi]:"video/x-msvideo",[o.Bcpio]:"application/x-bcpio",[o.Bin]:"application/octet-stream",[o.Bmp]:"image/bmp",[o.Cdf]:"application/x-netcdf",[o.Cgm]:"image/cgm",[o.Class]:"application/octet-stream",[o.Cpio]:"application/x-cpio",[o.Cpt]:"application/mac-compactpro",[o.Csh]:"application/x-csh",[o.Css]:"text/css",[o.Dcr]:"application/x-director",[o.Dif]:"video/x-dv",[o.Dir]:"application/x-director",[o.Djv]:"image/vnd.djvu",[o.Djvu]:"image/vnd.djvu",[o.Dll]:"application/octet-stream",[o.Dmg]:"application/octet-stream",[o.Dms]:"application/octet-stream",[o.Dng]:"image/dng",[o.Doc]:"application/msword",[o.Docm]:"application/vnd.ms-word.document.macroEnabled.12",[o.Docx]:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",[o.Dotm]:"application/vnd.ms-word.template.macroEnabled.12",[o.Dotx]:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",[o.Dtd]:"application/xml-dtd",[o.Dv]:"video/x-dv",[o.Dvi]:"application/x-dvi",[o.Dxr]:"application/x-director",[o.Eps]:"application/postscript",[o.Etx]:"text/x-setext",[o.Exe]:"application/octet-stream",[o.Ez]:"application/andrew-inset",[o.Flac]:"audio/x-flac",[o.Flv]:"video/x-flv",[o.Gif]:"image/gif",[o.Gram]:"application/srgs",[o.Grxml]:"application/srgs+xml",[o.Gtar]:"application/x-gtar",[o.Hdf]:"application/x-hdf",[o.Heif]:"mage/heif",[o.Hqx]:"application/mac-binhex40",[o.Htm]:"text/html",[o.Html]:"text/html",[o.Ice]:"x-conference/x-cooltalk",[o.Ico]:"image/x-icon",[o.Ics]:"text/calendar",[o.Idml]:"application/vnd.adobe.indesign-idml-package",[o.Ief]:"image/ief",[o.Ifb]:"text/calendar",[o.Iges]:"model/iges",[o.Igs]:"model/iges",[o.Indd]:"application/octet-stream",[o.Indt]:"application/octet-stream",[o.Jnlp]:"application/x-java-jnlp-file",[o.Jp2]:"image/jp2",[o.Jpe]:"image/jpeg",[o.Jpeg]:"image/jpeg",[o.Jpg]:"image/jpeg",[o.Js]:"application/x-javascript",[o.Kar]:"audio/midi",[o.Latex]:"application/x-latex",[o.Lha]:"application/octet-stream",[o.Lzh]:"application/octet-stream",[o.M3u]:"audio/x-mpegurl",[o.M4a]:"audio/mp4a-latm",[o.M4b]:"audio/mp4a-latm",[o.M4p]:"audio/mp4a-latm",[o.M4r]:"audio/x-m4r",[o.M4u]:"video/vnd.mpegurl",[o.M4v]:"video/x-m4v",[o.Mac]:"image/x-macpaint",[o.Man]:"application/x-troff-man",[o.Mathml]:"application/mathml+xml",[o.Me]:"application/x-troff-me",[o.Mesh]:"model/mesh",[o.Mid]:"audio/midi",[o.Midi]:"audio/midi",[o.Mif]:"application/vnd.mif",[o.Mkv]:"video/x-matroska",[o.Mov]:"video/quicktime",[o.Movie]:"video/x-sgi-movie",[o.Mp2]:"audio/mpeg",[o.Mp3]:"audio/mpeg",[o.Mp4]:"video/mp4",[o.Mpe]:"video/mpeg",[o.Mpeg]:"video/mpeg",[o.Mpg]:"video/mpeg",[o.Mpga]:"audio/mpeg",[o.Ms]:"application/x-troff-ms",[o.Msh]:"model/mesh",[o.Mts]:"model/vnd.mts",[o.Mxu]:"video/vnd.mpegurl",[o.Nc]:"application/x-netcdf",[o.Oda]:"application/oda",[o.Ogg]:"application/ogg",[o.Pbm]:"image/x-portable-bitmap",[o.Pct]:"image/pict",[o.Pdb]:"chemical/x-pdb",[o.Pdf]:"application/pdf",[o.Pgm]:"image/x-portable-graymap",[o.Pgn]:"application/x-chess-pgn",[o.Pic]:"image/pict",[o.Pict]:"image/pict",[o.Png]:"image/png",[o.Pnm]:"image/x-portable-anymap",[o.Pnt]:"image/x-macpaint",[o.Pntg]:"image/x-macpaint",[o.Potm]:"application/vnd.ms-powerpoint.template.macroEnabled.12",[o.Potx]:"application/vnd.openxmlformats-officedocument.presentationml.template",[o.Ppam]:"application/vnd.ms-powerpoint.addin.macroEnabled.12",[o.Ppm]:"image/x-portable-pixmap",[o.Ppsm]:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",[o.Ppsx]:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",[o.Ppt]:"application/vnd.ms-powerpoint",[o.Pptm]:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",[o.Pptx]:"application/vnd.openxmlformats-officedocument.presentationml.presentation",[o.Ps]:"application/postscript",[o.Psd]:"image/vnd.adobe.photoshop",[o.Qt]:"video/quicktime",[o.Qti]:"image/x-quicktime",[o.Qtif]:"image/x-quicktime",[o.Ra]:"audio/x-pn-realaudio",[o.Ram]:"audio/x-pn-realaudio",[o.Ras]:"image/x-cmu-raster",[o.Rdf]:"application/rdf+xml",[o.Rgb]:"image/x-rgb",[o.Rm]:"application/vnd.rn-realmedia",[o.Roff]:"application/x-troff",[o.Rtf]:"text/rtf",[o.Rtx]:"text/richtext",[o.Sgm]:"text/sgml",[o.Sgml]:"text/sgml",[o.Sh]:"application/x-sh",[o.Shar]:"application/x-shar",[o.Silo]:"model/mesh",[o.Sit]:"application/x-stuffit",[o.Skd]:"application/x-koan",[o.Sketch]:"application/zip",[o.Skm]:"application/x-koan",[o.Skp]:"application/x-koan",[o.Skt]:"application/x-koan",[o.Smi]:"application/smil",[o.Smil]:"application/smil",[o.Snd]:"audio/basic",[o.So]:"application/octet-stream",[o.Spl]:"application/x-futuresplash",[o.Src]:"application/x-wais-source",[o.Sv4cpio]:"application/x-sv4cpio",[o.Sv4crc]:"application/x-sv4crc",[o.Svg]:"image/svg+xml",[o.Swf]:"application/x-shockwave-flash",[o.T]:"application/x-troff",[o.Tar]:"application/x-tar",[o.Tcl]:"application/x-tcl",[o.Tex]:"application/x-tex",[o.Texi]:"application/x-texinfo",[o.Texinfo]:"application/x-texinfo",[o.Tif]:"image/tiff",[o.Tiff]:"image/tiff",[o.Tpl]:"text/xml",[o.Tr]:"application/x-troff",[o.Tsv]:"text/tab-separated-values",[o.Txt]:"text/plain",[o.Ustar]:"application/x-ustar",[o.Vcd]:"application/x-cdlink",[o.Vrml]:"model/vrml",[o.Vxml]:"application/voicexml+xml",[o.Wav]:"audio/x-wav",[o.Wbmp]:"image/vnd.wap.wbmp",[o.Wbmxl]:"application/vnd.wap.wbxml",[o.Webm]:"video/webm",[o.Webp]:"image/webp",[o.Wml]:"text/vnd.wap.wml",[o.Wmlc]:"application/vnd.wap.wmlc",[o.Wmls]:"text/vnd.wap.wmlscript",[o.Wmlsc]:"application/vnd.wap.wmlscriptc",[o.Wmv]:"video/x-ms-wmv",[o.Wrl]:"model/vrml",[o.Xbm]:"image/x-xbitmap",[o.Xht]:"application/xhtml+xml",[o.Xhtml]:"application/xhtml+xml",[o.Xlam]:"application/vnd.ms-excel.addin.macroEnabled.12",[o.Xls]:"application/vnd.ms-excel",[o.Xlsb]:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",[o.Xlsm]:"application/vnd.ms-excel.sheet.macroEnabled.12",[o.Xlsx]:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",[o.Xltm]:"application/vnd.ms-excel.template.macroEnabled.12",[o.Xltx]:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",[o.Xml]:"application/xml",[o.Xpm]:"image/x-xpixmap",[o.Xsl]:"application/xml",[o.Xslt]:"application/xslt+xml",[o.Xul]:"application/vnd.mozilla.xul+xml",[o.Xwd]:"image/x-xwindowdump",[o.Xyz]:"chemical/x-xyz",[o.Zip]:"application/zip"},Rn=e=>e.map(t=>St[t]).filter(t=>t!==void 0),Te=(e=6)=>Math.random().toString(20).substr(2,e);class It extends Error{constructor(t,r,n){super(`Status code ${r} - ${t}`),this.code=0,this.name="HttpClientError",this.code=r,this.responseBody=n}}const de=async(e,t,r,n)=>{const a={method:e,headers:{"Content-Type":"application/json; charset=utf-8",...n},...r&&{body:JSON.stringify(r)}},s=await window.fetch(`${window.location.origin}${t}`,a),i=await s.json();if(!s.ok)throw new It(i,s.status,i.error);return{result:i}};class Gt{static getCsrfToken(){const t=document.getElementsByName("x-csrf-token");if(t.length>0)return t[0].content}static async get(t){return de("GET",t,"",{"X-CSRF-TOKEN":this.getCsrfToken()})}static async post(t,r){return de("POST",t,r,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async put(t,r){return de("PUT",t,r,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async patch(t,r){return de("PATCH",t,r,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async delete(t,r){return de("DELETE",t,r,{"X-CSRF-TOKEN":this.getCsrfToken()})}}function Z(e,t,r,n){const a=window.top;a==null||a.postMessage({topic:e,token:t,data:r},(n==null?void 0:n.origin)||"*")}function Vn(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function me(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var kt=Object.create,Hn=function(){function e(){}return function(t){if(!me(t))return{};if(kt)return kt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Yn=Hn;function Jn(e){return function(t,r,n){for(var a=-1,s=Object(t),i=n(t),u=i.length;u--;){var h=i[e?u:++a];if(r(s[h],h,s)===!1)break}return t}}var Qn=Jn();const Fn=Qn;function qn(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var eo=typeof global=="object"&&global&&global.Object===Object&&global;const Mt=eo;var to=typeof self=="object"&&self&&self.Object===Object&&self,ro=Mt||to||Function("return this")();const z=ro;var no=z.Symbol;const Y=no;var Ot=Object.prototype,oo=Ot.hasOwnProperty,ao=Ot.toString,pe=Y?Y.toStringTag:void 0;function so(e){var t=oo.call(e,pe),r=e[pe];try{e[pe]=void 0;var n=!0}catch{}var a=ao.call(e);return n&&(t?e[pe]=r:delete e[pe]),a}var io=Object.prototype,uo=io.toString;function co(e){return uo.call(e)}var lo="[object Null]",mo="[object Undefined]",Lt=Y?Y.toStringTag:void 0;function se(e){return e==null?e===void 0?mo:lo:Lt&&Lt in Object(e)?so(e):co(e)}function ie(e){return e!=null&&typeof e=="object"}var po="[object Arguments]";function Bt(e){return ie(e)&&se(e)==po}var Ut=Object.prototype,go=Ut.hasOwnProperty,fo=Ut.propertyIsEnumerable,ho=Bt(function(){return arguments}())?Bt:function(e){return ie(e)&&go.call(e,"callee")&&!fo.call(e,"callee")};const Nt=ho;var wo=Array.isArray;const j=wo;function bo(){return!1}var $t=typeof c=="object"&&c&&!c.nodeType&&c,xt=$t&&typeof module=="object"&&module&&!module.nodeType&&module,yo=xt&&xt.exports===$t,Et=yo?z.Buffer:void 0,Ao=Et?Et.isBuffer:void 0,Do=Ao||bo;const Ce=Do;var vo=9007199254740991,To=/^(?:0|[1-9]\d*)$/;function Zt(e,t){var r=typeof e;return t=t??vo,!!t&&(r=="number"||r!="symbol"&&To.test(e))&&e>-1&&e%1==0&&e<t}var Co=9007199254740991;function Ve(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Co}var _o="[object Arguments]",Po="[object Array]",So="[object Boolean]",Io="[object Date]",Go="[object Error]",ko="[object Function]",Mo="[object Map]",Oo="[object Number]",Lo="[object Object]",Bo="[object RegExp]",Uo="[object Set]",No="[object String]",$o="[object WeakMap]",xo="[object ArrayBuffer]",Eo="[object DataView]",Zo="[object Float32Array]",jo="[object Float64Array]",zo="[object Int8Array]",Ko="[object Int16Array]",Wo="[object Int32Array]",Xo="[object Uint8Array]",Ro="[object Uint8ClampedArray]",Vo="[object Uint16Array]",Ho="[object Uint32Array]",G={};G[Zo]=G[jo]=G[zo]=G[Ko]=G[Wo]=G[Xo]=G[Ro]=G[Vo]=G[Ho]=!0,G[_o]=G[Po]=G[xo]=G[So]=G[Eo]=G[Io]=G[Go]=G[ko]=G[Mo]=G[Oo]=G[Lo]=G[Bo]=G[Uo]=G[No]=G[$o]=!1;function Yo(e){return ie(e)&&Ve(e.length)&&!!G[se(e)]}function Jo(e){return function(t){return e(t)}}var jt=typeof c=="object"&&c&&!c.nodeType&&c,ge=jt&&typeof module=="object"&&module&&!module.nodeType&&module,Qo=ge&&ge.exports===jt,He=Qo&&Mt.process,Fo=function(){try{var e=ge&&ge.require&&ge.require("util").types;return e||He&&He.binding&&He.binding("util")}catch{}}();const zt=Fo;var Kt=zt&&zt.isTypedArray,qo=Kt?Jo(Kt):Yo;const Ye=qo;var ea=Object.prototype,ta=ea.hasOwnProperty;function ra(e,t){var r=j(e),n=!r&&Nt(e),a=!r&&!n&&Ce(e),s=!r&&!n&&!a&&Ye(e),i=r||n||a||s,u=i?qn(e.length,String):[],h=u.length;for(var w in e)(t||ta.call(e,w))&&!(i&&(w=="length"||a&&(w=="offset"||w=="parent")||s&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Zt(w,h)))&&u.push(w);return u}var na=Object.prototype;function oa(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||na;return e===r}function Wt(e,t){return function(r){return e(t(r))}}var aa=Wt(Object.keys,Object);const sa=aa;var ia=Object.prototype,ua=ia.hasOwnProperty;function ca(e){if(!oa(e))return sa(e);var t=[];for(var r in Object(e))ua.call(e,r)&&r!="constructor"&&t.push(r);return t}var la="[object AsyncFunction]",da="[object Function]",ma="[object GeneratorFunction]",pa="[object Proxy]";function Je(e){if(!me(e))return!1;var t=se(e);return t==da||t==ma||t==la||t==pa}function ga(e){return e!=null&&Ve(e.length)&&!Je(e)}function Qe(e){return ga(e)?ra(e):ca(e)}function fa(e,t){return e&&Fn(e,t,Qe)}function ha(){this.__data__=[],this.size=0}function Xt(e,t){return e===t||e!==e&&t!==t}function _e(e,t){for(var r=e.length;r--;)if(Xt(e[r][0],t))return r;return-1}var wa=Array.prototype,ba=wa.splice;function ya(e){var t=this.__data__,r=_e(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():ba.call(t,r,1),--this.size,!0}function Aa(e){var t=this.__data__,r=_e(t,e);return r<0?void 0:t[r][1]}function Da(e){return _e(this.__data__,e)>-1}function va(e,t){var r=this.__data__,n=_e(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function K(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}K.prototype.clear=ha,K.prototype.delete=ya,K.prototype.get=Aa,K.prototype.has=Da,K.prototype.set=va;function Ta(){this.__data__=new K,this.size=0}function Ca(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function _a(e){return this.__data__.get(e)}function Pa(e){return this.__data__.has(e)}var Sa=z["__core-js_shared__"];const Fe=Sa;var Rt=function(){var e=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ia(e){return!!Rt&&Rt in e}var Ga=Function.prototype,ka=Ga.toString;function ee(e){if(e!=null){try{return ka.call(e)}catch{}try{return e+""}catch{}}return""}var Ma=/[\\^$.*+?()[\]{}|]/g,Oa=/^\[object .+?Constructor\]$/,La=Function.prototype,Ba=Object.prototype,Ua=La.toString,Na=Ba.hasOwnProperty,$a=RegExp("^"+Ua.call(Na).replace(Ma,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xa(e){if(!me(e)||Ia(e))return!1;var t=Je(e)?$a:Oa;return t.test(ee(e))}function Ea(e,t){return e==null?void 0:e[t]}function ue(e,t){var r=Ea(e,t);return xa(r)?r:void 0}var Za=ue(z,"Map");const fe=Za;var ja=ue(Object,"create");const he=ja;function za(){this.__data__=he?he(null):{},this.size=0}function Ka(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Wa="__lodash_hash_undefined__",Xa=Object.prototype,Ra=Xa.hasOwnProperty;function Va(e){var t=this.__data__;if(he){var r=t[e];return r===Wa?void 0:r}return Ra.call(t,e)?t[e]:void 0}var Ha=Object.prototype,Ya=Ha.hasOwnProperty;function Ja(e){var t=this.__data__;return he?t[e]!==void 0:Ya.call(t,e)}var Qa="__lodash_hash_undefined__";function Fa(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=he&&t===void 0?Qa:t,this}function te(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}te.prototype.clear=za,te.prototype.delete=Ka,te.prototype.get=Va,te.prototype.has=Ja,te.prototype.set=Fa;function qa(){this.size=0,this.__data__={hash:new te,map:new(fe||K),string:new te}}function es(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Pe(e,t){var r=e.__data__;return es(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ts(e){var t=Pe(this,e).delete(e);return this.size-=t?1:0,t}function rs(e){return Pe(this,e).get(e)}function ns(e){return Pe(this,e).has(e)}function os(e,t){var r=Pe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function W(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}W.prototype.clear=qa,W.prototype.delete=ts,W.prototype.get=rs,W.prototype.has=ns,W.prototype.set=os;var as=200;function ss(e,t){var r=this.__data__;if(r instanceof K){var n=r.__data__;if(!fe||n.length<as-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new W(n)}return r.set(e,t),this.size=r.size,this}function X(e){var t=this.__data__=new K(e);this.size=t.size}X.prototype.clear=Ta,X.prototype.delete=Ca,X.prototype.get=_a,X.prototype.has=Pa,X.prototype.set=ss;var is="__lodash_hash_undefined__";function us(e){return this.__data__.set(e,is),this}function cs(e){return this.__data__.has(e)}function Se(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new W;++t<r;)this.add(e[t])}Se.prototype.add=Se.prototype.push=us,Se.prototype.has=cs;function ls(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function ds(e,t){return e.has(t)}var ms=1,ps=2;function Vt(e,t,r,n,a,s){var i=r&ms,u=e.length,h=t.length;if(u!=h&&!(i&&h>u))return!1;var w=s.get(e),b=s.get(t);if(w&&b)return w==t&&b==e;var m=-1,l=!0,g=r&ps?new Se:void 0;for(s.set(e,t),s.set(t,e);++m<u;){var y=e[m],v=t[m];if(n)var T=i?n(v,y,m,t,e,s):n(y,v,m,e,t,s);if(T!==void 0){if(T)continue;l=!1;break}if(g){if(!ls(t,function(C,D){if(!ds(g,D)&&(y===C||a(y,C,r,n,s)))return g.push(D)})){l=!1;break}}else if(!(y===v||a(y,v,r,n,s))){l=!1;break}}return s.delete(e),s.delete(t),l}var gs=z.Uint8Array;const Ht=gs;function fs(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}function hs(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var ws=1,bs=2,ys="[object Boolean]",As="[object Date]",Ds="[object Error]",vs="[object Map]",Ts="[object Number]",Cs="[object RegExp]",_s="[object Set]",Ps="[object String]",Ss="[object Symbol]",Is="[object ArrayBuffer]",Gs="[object DataView]",Yt=Y?Y.prototype:void 0,qe=Yt?Yt.valueOf:void 0;function ks(e,t,r,n,a,s,i){switch(r){case Gs:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Is:return!(e.byteLength!=t.byteLength||!s(new Ht(e),new Ht(t)));case ys:case As:case Ts:return Xt(+e,+t);case Ds:return e.name==t.name&&e.message==t.message;case Cs:case Ps:return e==t+"";case vs:var u=fs;case _s:var h=n&ws;if(u||(u=hs),e.size!=t.size&&!h)return!1;var w=i.get(e);if(w)return w==t;n|=bs,i.set(e,t);var b=Vt(u(e),u(t),n,a,s,i);return i.delete(e),b;case Ss:if(qe)return qe.call(e)==qe.call(t)}return!1}function Ms(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function Os(e,t,r){var n=t(e);return j(e)?n:Ms(n,r(e))}function Ls(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s}function Bs(){return[]}var Us=Object.prototype,Ns=Us.propertyIsEnumerable,Jt=Object.getOwnPropertySymbols,$s=Jt?function(e){return e==null?[]:(e=Object(e),Ls(Jt(e),function(t){return Ns.call(e,t)}))}:Bs;const xs=$s;function Qt(e){return Os(e,Qe,xs)}var Es=1,Zs=Object.prototype,js=Zs.hasOwnProperty;function zs(e,t,r,n,a,s){var i=r&Es,u=Qt(e),h=u.length,w=Qt(t),b=w.length;if(h!=b&&!i)return!1;for(var m=h;m--;){var l=u[m];if(!(i?l in t:js.call(t,l)))return!1}var g=s.get(e),y=s.get(t);if(g&&y)return g==t&&y==e;var v=!0;s.set(e,t),s.set(t,e);for(var T=i;++m<h;){l=u[m];var C=e[l],D=t[l];if(n)var P=i?n(D,C,l,t,e,s):n(C,D,l,e,t,s);if(!(P===void 0?C===D||a(C,D,r,n,s):P)){v=!1;break}T||(T=l=="constructor")}if(v&&!T){var _=e.constructor,S=t.constructor;_!=S&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof S=="function"&&S instanceof S)&&(v=!1)}return s.delete(e),s.delete(t),v}var Ks=ue(z,"DataView");const et=Ks;var Ws=ue(z,"Promise");const tt=Ws;var Xs=ue(z,"Set");const rt=Xs;var Rs=ue(z,"WeakMap");const nt=Rs;var Ft="[object Map]",Vs="[object Object]",qt="[object Promise]",er="[object Set]",tr="[object WeakMap]",rr="[object DataView]",Hs=ee(et),Ys=ee(fe),Js=ee(tt),Qs=ee(rt),Fs=ee(nt),re=se;(et&&re(new et(new ArrayBuffer(1)))!=rr||fe&&re(new fe)!=Ft||tt&&re(tt.resolve())!=qt||rt&&re(new rt)!=er||nt&&re(new nt)!=tr)&&(re=function(e){var t=se(e),r=t==Vs?e.constructor:void 0,n=r?ee(r):"";if(n)switch(n){case Hs:return rr;case Ys:return Ft;case Js:return qt;case Qs:return er;case Fs:return tr}return t});const nr=re;var qs=1,or="[object Arguments]",ar="[object Array]",Ie="[object Object]",ei=Object.prototype,sr=ei.hasOwnProperty;function ti(e,t,r,n,a,s){var i=j(e),u=j(t),h=i?ar:nr(e),w=u?ar:nr(t);h=h==or?Ie:h,w=w==or?Ie:w;var b=h==Ie,m=w==Ie,l=h==w;if(l&&Ce(e)){if(!Ce(t))return!1;i=!0,b=!1}if(l&&!b)return s||(s=new X),i||Ye(e)?Vt(e,t,r,n,a,s):ks(e,t,h,r,n,a,s);if(!(r&qs)){var g=b&&sr.call(e,"__wrapped__"),y=m&&sr.call(t,"__wrapped__");if(g||y){var v=g?e.value():e,T=y?t.value():t;return s||(s=new X),a(v,T,r,n,s)}}return l?(s||(s=new X),zs(e,t,r,n,a,s)):!1}function ot(e,t,r,n,a){return e===t?!0:e==null||t==null||!ie(e)&&!ie(t)?e!==e&&t!==t:ti(e,t,r,n,ot,a)}var ri=1,ni=2;function oi(e,t,r,n){var a=r.length,s=a,i=!n;if(e==null)return!s;for(e=Object(e);a--;){var u=r[a];if(i&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){u=r[a];var h=u[0],w=e[h],b=u[1];if(i&&u[2]){if(w===void 0&&!(h in e))return!1}else{var m=new X;if(n)var l=n(w,b,h,e,t,m);if(!(l===void 0?ot(b,w,ri|ni,n,m):l))return!1}}return!0}function ir(e){return e===e&&!me(e)}function ai(e){for(var t=Qe(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,ir(a)]}return t}function ur(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function si(e){var t=ai(e);return t.length==1&&t[0][2]?ur(t[0][0],t[0][1]):function(r){return r===e||oi(r,e,t)}}var ii="[object Symbol]";function at(e){return typeof e=="symbol"||ie(e)&&se(e)==ii}var ui=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ci=/^\w*$/;function st(e,t){if(j(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||at(e)?!0:ci.test(e)||!ui.test(e)||t!=null&&e in Object(t)}var li="Expected a function";function it(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(li);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var i=e.apply(this,n);return r.cache=s.set(a,i)||s,i};return r.cache=new(it.Cache||W),r}it.Cache=W;var di=500;function mi(e){var t=it(e,function(n){return r.size===di&&r.clear(),n}),r=t.cache;return t}var pi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gi=/\\(\\)?/g,fi=mi(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(pi,function(r,n,a,s){t.push(a?s.replace(gi,"$1"):n||r)}),t});const hi=fi;function wi(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var bi=1/0,cr=Y?Y.prototype:void 0,lr=cr?cr.toString:void 0;function dr(e){if(typeof e=="string")return e;if(j(e))return wi(e,dr)+"";if(at(e))return lr?lr.call(e):"";var t=e+"";return t=="0"&&1/e==-bi?"-0":t}function we(e){return e==null?"":dr(e)}function mr(e,t){return j(e)?e:st(e,t)?[e]:hi(we(e))}var yi=1/0;function Ge(e){if(typeof e=="string"||at(e))return e;var t=e+"";return t=="0"&&1/e==-yi?"-0":t}function pr(e,t){t=mr(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Ge(t[r++])];return r&&r==n?e:void 0}function Ai(e,t,r){var n=e==null?void 0:pr(e,t);return n===void 0?r:n}function Di(e,t){return e!=null&&t in Object(e)}function vi(e,t,r){t=mr(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var i=Ge(t[n]);if(!(s=e!=null&&r(e,i)))break;e=e[i]}return s||++n!=a?s:(a=e==null?0:e.length,!!a&&Ve(a)&&Zt(i,a)&&(j(e)||Nt(e)))}function Ti(e,t){return e!=null&&vi(e,t,Di)}var Ci=1,_i=2;function Pi(e,t){return st(e)&&ir(t)?ur(Ge(e),t):function(r){var n=Ai(r,e);return n===void 0&&n===t?Ti(r,e):ot(t,n,Ci|_i)}}function Si(e){return e}function Ii(e){return function(t){return t==null?void 0:t[e]}}function Gi(e){return function(t){return pr(t,e)}}function ki(e){return st(e)?Ii(Ge(e)):Gi(e)}function Mi(e){return typeof e=="function"?e:e==null?Si:typeof e=="object"?j(e)?Pi(e[0],e[1]):si(e):ki(e)}var Oi=Wt(Object.getPrototypeOf,Object);const Li=Oi;function Bi(e,t,r){var n=j(e),a=n||Ce(e)||Ye(e);if(t=Mi(t),r==null){var s=e&&e.constructor;a?r=n?new s:[]:me(e)?r=Je(s)?Yn(Li(e)):{}:r={}}return(a?Vn:fa)(e,function(i,u,h){return t(r,i,u,h)}),r}function Ui(e,t,r,n){var a=-1,s=e==null?0:e.length;for(n&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}function Ni(e){return function(t){return e==null?void 0:e[t]}}var $i={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},xi=Ni($i);const Ei=xi;var Zi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ji="\\u0300-\\u036f",zi="\\ufe20-\\ufe2f",Ki="\\u20d0-\\u20ff",Wi=ji+zi+Ki,Xi="["+Wi+"]",Ri=RegExp(Xi,"g");function Vi(e){return e=we(e),e&&e.replace(Zi,Ei).replace(Ri,"")}var Hi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Yi(e){return e.match(Hi)||[]}var Ji=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Qi(e){return Ji.test(e)}var gr="\\ud800-\\udfff",Fi="\\u0300-\\u036f",qi="\\ufe20-\\ufe2f",eu="\\u20d0-\\u20ff",tu=Fi+qi+eu,fr="\\u2700-\\u27bf",hr="a-z\\xdf-\\xf6\\xf8-\\xff",ru="\\xac\\xb1\\xd7\\xf7",nu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ou="\\u2000-\\u206f",au=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wr="A-Z\\xc0-\\xd6\\xd8-\\xde",su="\\ufe0e\\ufe0f",br=ru+nu+ou+au,yr="['’]",Ar="["+br+"]",iu="["+tu+"]",Dr="\\d+",uu="["+fr+"]",vr="["+hr+"]",Tr="[^"+gr+br+Dr+fr+hr+wr+"]",cu="\\ud83c[\\udffb-\\udfff]",lu="(?:"+iu+"|"+cu+")",du="[^"+gr+"]",Cr="(?:\\ud83c[\\udde6-\\uddff]){2}",_r="[\\ud800-\\udbff][\\udc00-\\udfff]",ce="["+wr+"]",mu="\\u200d",Pr="(?:"+vr+"|"+Tr+")",pu="(?:"+ce+"|"+Tr+")",Sr="(?:"+yr+"(?:d|ll|m|re|s|t|ve))?",Ir="(?:"+yr+"(?:D|LL|M|RE|S|T|VE))?",Gr=lu+"?",kr="["+su+"]?",gu="(?:"+mu+"(?:"+[du,Cr,_r].join("|")+")"+kr+Gr+")*",fu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",wu=kr+Gr+gu,bu="(?:"+[uu,Cr,_r].join("|")+")"+wu,yu=RegExp([ce+"?"+vr+"+"+Sr+"(?="+[Ar,ce,"$"].join("|")+")",pu+"+"+Ir+"(?="+[Ar,ce+Pr,"$"].join("|")+")",ce+"?"+Pr+"+"+Sr,ce+"+"+Ir,hu,fu,Dr,bu].join("|"),"g");function Au(e){return e.match(yu)||[]}function Du(e,t,r){return e=we(e),t=r?void 0:t,t===void 0?Qi(e)?Au(e):Yi(e):e.match(t)||[]}var vu="['’]",Tu=RegExp(vu,"g");function Mr(e){return function(t){return Ui(Du(Vi(t).replace(Tu,"")),e,"")}}var Cu=Mr(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});const _u=Cu;function Pu(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}function Su(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Pu(e,t,r)}var Iu="\\ud800-\\udfff",Gu="\\u0300-\\u036f",ku="\\ufe20-\\ufe2f",Mu="\\u20d0-\\u20ff",Ou=Gu+ku+Mu,Lu="\\ufe0e\\ufe0f",Bu="\\u200d",Uu=RegExp("["+Bu+Iu+Ou+Lu+"]");function Or(e){return Uu.test(e)}function Nu(e){return e.split("")}var Lr="\\ud800-\\udfff",$u="\\u0300-\\u036f",xu="\\ufe20-\\ufe2f",Eu="\\u20d0-\\u20ff",Zu=$u+xu+Eu,ju="\\ufe0e\\ufe0f",zu="["+Lr+"]",ut="["+Zu+"]",ct="\\ud83c[\\udffb-\\udfff]",Ku="(?:"+ut+"|"+ct+")",Br="[^"+Lr+"]",Ur="(?:\\ud83c[\\udde6-\\uddff]){2}",Nr="[\\ud800-\\udbff][\\udc00-\\udfff]",Wu="\\u200d",$r=Ku+"?",xr="["+ju+"]?",Xu="(?:"+Wu+"(?:"+[Br,Ur,Nr].join("|")+")"+xr+$r+")*",Ru=xr+$r+Xu,Vu="(?:"+[Br+ut+"?",ut,Ur,Nr,zu].join("|")+")",Hu=RegExp(ct+"(?="+ct+")|"+Vu+Ru,"g");function Yu(e){return e.match(Hu)||[]}function Ju(e){return Or(e)?Yu(e):Nu(e)}function Qu(e){return function(t){t=we(t);var r=Or(t)?Ju(t):void 0,n=r?r[0]:t.charAt(0),a=r?Su(r,1).join(""):t.slice(1);return n[e]()+a}}var Fu=Qu("toUpperCase");const qu=Fu;function ec(e){return qu(we(e).toLowerCase())}var tc=Mr(function(e,t,r){return t=t.toLowerCase(),e+(r?ec(t):t)});const rc=tc,J=(e,t)=>{if(!e||!t||typeof e!="object"||typeof t!="object")return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r)if(typeof e[a]=="object"&&!J(e[a],t[a])||typeof e[a]!="object"&&e[a]!==t[a])return!1;return!0},be=e=>e&&typeof e=="object"&&!Array.isArray(e),Q=(e,...t)=>{if(t.length===0)return e;const r=t.shift();if(be(e)&&be(r))for(const n in r)be(r[n])?(e[n]||Object.assign(e,{[n]:{}}),Q(e[n],r[n])):Object.assign(e,{[n]:r[n]});return Q(e,...t)},N=(e,t)=>{const r={camel:rc,snake:_u};return Bi(e,(n,a,s,i)=>{const u=Array.isArray(i)?s:r[t](s);n[u]=be(a)||Array.isArray(a)?N(a,t):a})};class Er extends Error{constructor(t){super(`Call with topic ${t} failed.`),this.name="FetchError"}}class lt extends Error{constructor(t){super(`Timeout for call with topic "${t}" expired. Call was aborted.`),this.name="TimeoutReachedError"}}const dt=3*1e3;function R(e,t,r){return new Promise((n,a)=>{const s=i=>{const u=i.data;u.token===t&&u.topic===e&&u.success?n(u.data||!0):a(new Er(e)),window.removeEventListener("message",s)};window.addEventListener("message",s),setTimeout(()=>{a(new lt(e))},(r==null?void 0:r.timeout)||dt)})}const U=Te(),nc=3*1e3,Zr=5*60*1e3;class oc{getAppState(){return Z(O.GetAppState,U),R(O.GetAppState,U)}async putAppState(t){return Z(O.PutAppState,U,t),R(O.PutAppState,U)}async deleteAppState(){return Z(O.DeleteAppState,U),R(O.DeleteAppState,U)}getAssetById(t){return Z(O.GetAssetById,U,{assetId:t}),R(O.GetAssetById,U)}async postExternalAssets(t){const n=t.filter(a=>a.previewUrl).length>0?Zr:nc;return Z(O.PostExternalAssets,U,t),R(O.PostExternalAssets,U,{timeout:n})}getThirdPartyOauth2Tokens(){return Z(O.GetThirdPartyOauth2Tokens,U),R(O.GetThirdPartyOauth2Tokens,U,{timeout:Zr})}getRefreshedThirdpartyOauth2Tokens(t){return Z(O.GetRefreshedThirdpartyOauth2Token,U,{refreshToken:t}),R(O.GetRefreshedThirdpartyOauth2Token,U)}closeApp(){Z(O.CloseApp,U)}openAssetChooser(){Z(O.OpenAssetChooser,U)}}class mt extends Error{constructor(t){super(`Initialization failed. ${t}`),this.name="InitializationError"}}class jr extends Error{constructor(t){super(`Validation failed. ${t}`),this.name="ValidationError"}}class zr{constructor(t){this.port=t,this.messageBucket=[],this.port.onmessage=r=>{const{token:n}=r.data,a=this.messageBucket.findIndex(s=>s.token===n);a>-1&&this.messageBucket.splice(a,1)[0].resolve(r.data.message)}}post(t){return new Promise((r,n)=>{const a=Te();this.messageBucket.push({message:t,resolve:r,token:a}),this.port.postMessage({message:t,token:a}),setTimeout(()=>{n(new lt("operation"))},dt*10)})}}class Kr{post(){throw new mt('First use await platformApp.dispatch({ name: "openConnection" })')}}const Wr=e=>{const t=r=>{const n={};for(const[a,s]of r)n[a]=s;return n};try{const r=new URL(e);return t(r.searchParams.entries())}catch{throw new jr(`"${e}" is not a valid url`)}},ac=e=>({name:"createAsset",payload:e}),sc=e=>({name:"getAssetResourceInformation",payload:e}),ic=e=>({name:"getCurrentUser",payload:e}),uc=e=>({name:"openAssetChooser",payload:e}),cc=()=>({name:"closeAssetChooser"}),lc=({token:e})=>({name:"openAssetViewer",payload:{token:e}}),dc=e=>({name:"downloadAsset",payload:e}),mc=()=>({name:"openNavigationManager"}),pc=()=>({name:"openTemplateChooser"}),gc=()=>({name:"closeTemplateChooser"}),fc=e=>({name:"openNewPublication",payload:e}),Xr=()=>({name:"openConnection"});class Rr{constructor(){this.apiMessageBus=new Kr,this.stateMessageBus=new Kr,this.initialized=!1,this.localState={settings:{}},this.subscribeMap={"State.*":new Map,"State.settings":new Map,"Context.*":new Map,"Context.marketplaceServiceAppId":new Map,"Context.token":new Map,"Context.assetId":new Map,"Context.brandId":new Map,"Context.parentId":new Map,"Context.domain":new Map,"Context.type":new Map,"Context.connected":new Map}}api(t){return this.apiMessageBus.post({parameter:t})}guardForInitialization(){if(!Wr(window.location.href).token)throw new mt;return this.initialized}async dispatch(t){if(t.name===Xr().name){if(this.guardForInitialization())return;const r=Te();Z(O.Init,r,{token:Wr(window.location.href).token,appBridgeVersion:"v3"}),R(O.Init,r).then(({statePort:n,apiPort:a,context:s,state:i})=>{this.apiMessageBus=new zr(a),this.stateMessageBus=new zr(n),this.localContext=s,this.localState=i,this.initialized=!0,this.callSubscribedTopic("Context.connected",[!0,!1]),this.callSubscribedTopic("Context.*",[this.localContext,this.localContext]),this.callSubscribedTopic("State.*",[this.localState,this.localState])})}}context(t){return typeof t>"u"?{get:()=>this.localContext,subscribe:r=>this.subscribe("Context.*",r)}:{get:()=>this.localContext?this.localContext[t]:{},subscribe:r=>this.subscribe(`Context.${t}`,r)}}async setInternalState(t){const r=this.localState;this.localState=await t,this.callSubscribedTopic("State.*",[this.localState,r])}state(t){return typeof t>"u"?{get:()=>this.localState,set:r=>{const n=this.stateMessageBus.post({parameter:{nextState:r}});this.setInternalState(n)},subscribe:r=>this.subscribe("State.*",r)}:{get:()=>this.localState[t],set:r=>{const n=this.stateMessageBus.post({parameter:{nextState:r}});this.setInternalState(n)},subscribe:r=>this.subscribe(`State.${t}`,r)}}subscribe(t,r){return t in this.subscribeMap||(this.subscribeMap[t]=new Map),this.subscribeMap[t].set(r,!0),()=>{this.subscribeMap[t].delete(r)}}callSubscribedTopic(t,r){const n=this.subscribeMap[t];if(n&&(n==null?void 0:n.size)!==void 0)for(const[a]of n.entries())a(...Array.isArray(r)?r:[r])}}var Vr=(e=>(e.Init="init",e.Started="started",e.Pending="pending",e.Ready="ready",e.Error="error",e))(Vr||{});const hc=e=>{const t=p.useRef(null),[r,n]=p.useState("init"),[a,s]=p.useState(null),i=async w=>{try{n("started");const{assetBulkDownloadToken:b}=await e.api({name:"getAssetBulkDownloadToken",payload:{settingIds:w,documentBlockId:e.getBlockId()}});s(null),u(b)}catch(b){n("error"),console.error(b)}},u=async w=>{try{const b=await e.getBulkDownloadByToken(w);b.downloadUrl?(s(b.downloadUrl),n("ready")):(n("pending"),t.current=h(b.signature))}catch(b){n("error"),console.error(b)}},h=w=>window.setInterval(()=>{(async()=>{try{const b=await e.getBulkDownloadBySignature(w);b.downloadUrl&&(n("ready"),s(b.downloadUrl),t.current&&clearInterval(t.current))}catch(b){n("error"),console.error(b),t.current&&clearInterval(t.current)}})()},2500);return{generateBulkDownload:i,status:r,downloadUrl:a}},wc=e=>({openAssetChooser:e.openAssetChooser.bind(e),closeAssetChooser:e.closeAssetChooser.bind(e)}),Hr="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2xldCByPVtdLHA9W10sYT1bXSxpPVtdLGY9e2xvYWRlZDowLHRvdGFsOjB9O2NvbnN0IG09W107bGV0IGQ9ITE7ZnVuY3Rpb24geSgpe20ubGVuZ3RoPD0wfHxtLnNoaWZ0KCkuc3RhcnQoKX1mdW5jdGlvbiBiKGUsbyl7Y29uc3Qgcz1uZXcgWE1MSHR0cFJlcXVlc3Q7dHJ5e3MudXBsb2FkLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24obil7Zi5sb2FkZWQrPW4ubG9hZGVkLWlbZS5pbmRleF1bZS5jaHVua10ubG9hZGVkLGlbZS5pbmRleF1bZS5jaHVua10ubG9hZGVkPW4ubG9hZGVkO2xldCB0PTA7aVtlLmluZGV4XS5mb3JFYWNoKGw9Pnt0Kz1sLmxvYWRlZH0pLHNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvblByb2dyZXNzIixsb2FkZWQ6dCx0b3RhbDplLnRvdGFsLGxlbmd0aENvbXB1dGFibGU6bi5sZW5ndGhDb21wdXRhYmxlLGluZGV4OmUuaW5kZXh9KSxzZWxmLnBvc3RNZXNzYWdlKHtldmVudDoib25Qcm9ncmVzc0FsbCIsbG9hZGVkOmYubG9hZGVkLHRvdGFsOmYudG90YWx9KX19Y2F0Y2h7cy5vbnByb2dyZXNzPWZ1bmN0aW9uKHQpe3NlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvblByb2dyZXNzQWxsIixsb2FkZWQ6dC5sb2FkZWQsdG90YWw6dC50b3RhbH0pfX1yZXR1cm4gcy5vcGVuKCJQVVQiLGUudXJsLCEwKSxzLm9ubG9hZD1mdW5jdGlvbigpe2lbZS5pbmRleF1bZS5jaHVua10uZmluaXNoZWQ9ITA7bGV0IG49ITA7Zm9yKGxldCB0PTE7dDxpW2UuaW5kZXhdLmxlbmd0aDt0KyspaVtlLmluZGV4XVt0XS5maW5pc2hlZHx8KG49ITEpO2lmKG4pe3JbZS5pbmRleF0uZmluaXNoZWQ9ITA7Y29uc3QgdD1uZXcgWE1MSHR0cFJlcXVlc3Q7dC5vcGVuKCJQT1NUIixgJHtzZWxmLmxvY2F0aW9uLm9yaWdpbn0vYXBpL2ZpbGUvcHJvZ3Jlc3NgLCEwKSx0LnNldFJlcXVlc3RIZWFkZXIoImNvbnRlbnQtdHlwZSIsImFwcGxpY2F0aW9uL2pzb24iKSx0Lm9ubG9hZD1mdW5jdGlvbigpe2xldCBsO3RyeXtsPUpTT04ucGFyc2UodC5yZXNwb25zZVRleHQpfWNhdGNoe2w9e319bC5ldmVudD0ib25Eb25lIixsLmluZGV4PWUuaW5kZXgsc2VsZi5wb3N0TWVzc2FnZShsKSx4KCl9LHQuc2VuZChKU09OLnN0cmluZ2lmeShlKSl9eSgpfSx7c3RhcnQoKXtzLnNlbmQobyl9fX1mdW5jdGlvbiBOKCl7Y29uc3QgZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKCJQT1NUIixgJHtzZWxmLmxvY2F0aW9uLm9yaWdpbn0vYXBpL2ZpbGUvaW5pdGAsITApLGUuc2V0UmVxdWVzdEhlYWRlcigiY29udGVudC10eXBlIiwiYXBwbGljYXRpb24vanNvbiIpLGUub25sb2FkPWZ1bmN0aW9uKCl7bGV0IG87dHJ5e289SlNPTi5wYXJzZShlLnJlc3BvbnNlVGV4dCl9Y2F0Y2h7bz17c3VjY2VzczohMX19aWYoIW8uc3VjY2Vzc3x8IShvLmZpbGVzJiZvLmZpbGVzLmxlbmd0aD4wKSl7c2VsZi5wb3N0TWVzc2FnZSh7ZXZlbnQ6Im9uRmFpbCJ9KTtyZXR1cm59cD1wLmNvbmNhdChvLmZpbGVzKSxkfHwoZD0hMCx4KCkpfSxlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2ZpbGVzOmF9KSl9ZnVuY3Rpb24geCgpe2xldCBlPSExO2ZvcihsZXQgbz0wO288ci5sZW5ndGg7bysrKXtjb25zdCBzPXJbb107IWUmJiFzLmZpbmlzaGVkJiYoZT0hMCxrKG8scltvXSxwW29dKSl9ZXx8UCgpfWZ1bmN0aW9uIGsoZSxvLHMpe2lmKHR5cGVvZiBzIT0ib2JqZWN0Iil7UyhlLG8se30pO3JldHVybn1pZighcy5zdWNjZXNzKXtTKGUsbyxzKTtyZXR1cm59aVtlXT1bXTtjb25zdCBuPW8sdD0xNSoxMDI0KjEwMjQsbD1uLnNpemU7bGV0IHU9MCxjPXQsaD0xO2Zvcig7dTxsOyl7Y29uc3QgZz1uLnNsaWNlKHUsYyk7aVtlXVtoXT17ZmluaXNoZWQ6ITEsbG9hZGVkOjB9LG0ucHVzaChiKHtpbmRleDplLHN0YXJ0OnUsdXBsb2FkOnMudXBsb2FkLG9iamVjdDpzLm9iamVjdCx1cmw6cy51cGxvYWQudXJsc1toXSxtb3JlOmM8bCxlbmQ6TWF0aC5taW4oYyxsLTEpLHRvdGFsOmwsY2h1bms6aH0sZykpLHU9YyxjPXUrdCxoKyt9Zm9yKGxldCBnPTA7Zzw0O2crKyl5KCl9ZnVuY3Rpb24gUyhlLG8scyl7Y29uc3Qgbj0ocz09bnVsbD92b2lkIDA6cy5lcnJvcik/PyJVbmFibGUgdG8gcHJvY2VzcyBmaWxlLiI7c2VsZi5wb3N0TWVzc2FnZSh7ZXZlbnQ6Im9uRmlsZUZhaWwiLGluZGV4OmUsZmlsZTpvLGZpbGVfbWV0YWRhdGE6cyxlcnJvcjpufSksZD0hMSxvLmZpbmlzaGVkPSEwLHgoKX1mdW5jdGlvbiBQKCl7cj1bXSxwPVtdLGE9W10saT1bXSxmPXtsb2FkZWQ6MCx0b3RhbDowfSxkPSExLHNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvbkRvbmVBbGwifSl9c2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7YT1bXTtmb3IobGV0IG89MDtvPGUuZGF0YS5maWxlcy5sZW5ndGg7bysrKXtjb25zdCBzPWUuZGF0YS5maWxlc1tvXTtsZXQgbj17bmFtZTpzLm5hbWUsc2l6ZTpzLnNpemUsdHlwZTpzLnR5cGV9O3R5cGVvZiBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZT09ImZ1bmN0aW9uIiYmKG4ubmFtZT1uLm5hbWUubm9ybWFsaXplKCJORkMiKSksZi50b3RhbCs9cy5zaXplLGUuZGF0YS5mb3JtRGF0YSYmKG49ey4uLm4sLi4uZS5kYXRhLmZvcm1EYXRhW29dfSksci5wdXNoKHMpLGEucHVzaChuKX1OKCl9fSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBsb2FkLndvcmtlci05N2NmNDgzYi5qcy5tYXAK",Yr=typeof window<"u"&&window.Blob&&new Blob([atob(Hr)],{type:"text/javascript;charset=utf-8"});function bc(){let e;try{if(e=Yr&&(window.URL||window.webkitURL).createObjectURL(Yr),!e)throw"";return new Worker(e)}catch{return new Worker("data:application/javascript;base64,"+Hr)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const Jr=e=>{const t=p.useRef([]),[r,n]=p.useState(!1),{onUploadProgress:a,onUploadProgressAll:s,onUploadDone:i,onUploadDoneAll:u,onUploadFail:h,onUploadFileFail:w}=e??{},b=p.useRef();p.useEffect(()=>{const _=new bc;return b.current=_,_.addEventListener("message",S=>{switch(S.data.event){case"onProgress":m(S);break;case"onProgressAll":l(S);break;case"onDone":g(S);break;case"onDoneAll":y();break;case"onFail":v();break;case"onFileFail":T(S);break;default:throw new Error(`${S.data.event} is not handled`)}}),()=>{_.terminate()}},[]);const m=_=>{a==null||a(_)},l=_=>{s==null||s(_)},g=_=>{i==null||i(_),t.current=[...t.current,_.data]},y=()=>{u==null||u(t.current),n(!0)},v=()=>{throw h==null||h(),new Error("File upload failed")},T=_=>{w==null||w(_)},C=_=>{const S=[];return _ instanceof File&&S.push(_),_ instanceof FileList&&S.push(...Array.from(_)),S},D=()=>{n(!1),t.current=[]};return[_=>{D();const S=C(_);if(S.length===0)return;const F={files:S};b!=null&&b.current&&b.current.postMessage(F)},{results:t.current,doneAll:r}]},yc=async(e,t,r)=>{const{result:n}=await Gt.post("/api/asset",{file_id:e,project_id:t,set_id:r});return{...n.data,...Ac(n.data)}},Ac=e=>({id:e.id,objectType:e.object_type,extension:e.ext,creatorName:e.creator_name,externalUrl:e.external_url,genericUrl:e.generic_url,previewUrl:e.preview_url,originUrl:e.file_origin_url,fileName:e.file_name,fileSize:e.file_size,fileSizeHumanReadable:e.file_size_formatted,height:e.height,width:e.width,projectId:e.project_id,status:e.status,title:e.title,fileId:e.file_id,token:e.token,projectType:e.project_type,revisionId:e.revision_id}),Dc=e=>{var F,le,q,Ee,Ze;const t=p.useRef([]),r=p.useRef([]),[n,a]=p.useState(!1),{onUploadProgress:s,onUploadProgressAll:i,onUploadDone:u,onUploadDoneAll:h,onUploadFail:w,onUploadAssetFail:b}=e??{},m=(Ze=(Ee=(q=(le=(F=window.application)==null?void 0:F.sandbox)==null?void 0:le.config)==null?void 0:q.context)==null?void 0:Ee.project)==null?void 0:Ze.id,l=x=>{s==null||s(x)},g=x=>{i==null||i(x)},y=async x=>{const je=P(x.data.file_id);r.current.push(je),u==null||u(x),t.current=[...t.current,await je]},v=async()=>{await Promise.all(r.current),h==null||h(t.current),a(!0)},T=()=>{w==null||w()},C=x=>{b==null||b(x)},D=()=>{a(!1),t.current=[]},P=async x=>await yc(x,m),[_]=Jr({onUploadProgress:l,onUploadProgressAll:g,onUploadDone:y,onUploadDoneAll:v,onUploadFail:T,onUploadFileFail:C});return[x=>{D(),_(x)},{results:t.current,doneAll:n}]},vc=e=>({open:async({token:r})=>{e.openAssetViewer(r)}}),Tc=e=>{const t=e.getBlockId(),[r,n]=p.useState({}),a=w=>{w.blockId===t&&!J(w.blockAssets,w.prevBlockAssets)&&n(w.blockAssets)};p.useEffect(()=>{let w=!0;return t&&((async()=>{const m=await e.getBlockAssets();w&&n(m)})(),window.emitter.on("AppBridge:BlockAssetsUpdated",a)),()=>{w=!1,window.emitter.off("AppBridge:BlockAssetsUpdated",a)}},[e]);const s=async()=>{window.emitter.emit("AppBridge:BlockAssetsUpdated",{blockId:t,blockAssets:await e.getBlockAssets(),prevBlockAssets:{...r}})};return{blockAssets:r,addAssetIdsToKey:async(w,b)=>{await e.addAssetIdsToBlockAssetKey(w,b),s()},deleteAssetIdsFromKey:async(w,b)=>{await e.deleteAssetIdsFromBlockAssetKey(w,b),s()},updateAssetIdsFromKey:async(w,b)=>{var g;const l=((g=(await e.getBlockAssets())[w])==null?void 0:g.map(y=>y.id))??[];try{await e.deleteAssetIdsFromBlockAssetKey(w,l),await e.addAssetIdsToBlockAssetKey(w,b)}catch(y){console.error(y)}s()}}},Cc=e=>{const t=e.getBlockId(),[r,n]=p.useState({}),[a,s]=p.useState(null),i=l=>{l.blockId===t&&!J(l.blockTemplates,l.prevBlockTemplates)&&n(l.blockTemplates)},u=l=>{let g;l instanceof Error?g=l.message:typeof l=="string"?g=l:g=String(l),s(g)};p.useEffect(()=>{let l=!0;return t&&((async()=>{try{const y=await e.getBlockTemplates();l&&n(y)}catch(y){u(y)}})(),window.emitter.on("AppBridge:BlockTemplatesUpdated",i)),()=>{l=!1,window.emitter.off("AppBridge:BlockTemplatesUpdated",i)}},[e]);const h=async()=>{let l;try{l=await e.getBlockTemplates()}catch(g){u(g)}l&&window.emitter.emit("AppBridge:BlockTemplatesUpdated",{blockId:t,blockTemplates:l,prevBlockTemplates:{...r}})};return{blockTemplates:r,addTemplateIdsToKey:async(l,g)=>{try{await e.addTemplateIdsToBlockTemplateKey(l,g)}catch(y){u(y)}h()},deleteTemplateIdsFromKey:async(l,g)=>{try{await e.deleteTemplateIdsFromBlockTemplateKey(l,g)}catch(y){u(y)}h()},updateTemplateIdsFromKey:async(l,g)=>{var T;const v=((T=(await e.getBlockTemplates())[l])==null?void 0:T.map(C=>C.id))??[];try{await e.deleteTemplateIdsFromBlockTemplateKey(l,v),await e.addTemplateIdsToBlockTemplateKey(l,g)}catch(C){u(C)}h()},error:a}},_c=e=>{const t=e.getBlockId(),[r,n]=p.useState(structuredClone(window.blockSettings[t]));return p.useEffect(()=>{const s=i=>{i.blockId===t&&n({...i.blockSettings})};return window.emitter.on("AppBridge:BlockSettingsUpdated",s),()=>{window.emitter.off("AppBridge:BlockSettingsUpdated",s)}},[t]),[r,async s=>{try{await e.updateBlockSettings(s),window.emitter.emit("AppBridge:BlockSettingsUpdated",{blockId:t,blockSettings:Q(r,s)})}catch(i){console.error(i)}}]},Pc={enabled:!1,label:"",url:""},Sc=(e,t={enabled:!0})=>{const[r,n]=p.useState(null),[a,s]=p.useState(!0);return p.useEffect(()=>{const i=async()=>{s(!0),n(await e.getBrandportalLink()),s(!1)};t.enabled&&i().catch(console.error)},[e,t.enabled]),p.useEffect(()=>{const i=u=>{n(h=>u.action==="update"?{...Pc,...h,...u.brandportalLink}:h)};return window.emitter.on("AppBridge:GuidelineBrandportalLink:Action",i),()=>{window.emitter.off("AppBridge:GuidelineBrandportalLink:Action",i)}},[e]),{brandportalLink:r,isLoading:a}},Qr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Ic=(e,t,r={enabled:!0})=>{const[n,a]=p.useState(new Map([])),[s,i]=p.useState(!0),u=p.useCallback(async()=>{i(!0),a(await Mc(e,t)),i(!1)},[e,t]);return p.useEffect(()=>{r.enabled&&u()},[r.enabled,u]),p.useEffect(()=>{const h=m=>{for(const l of m.payload.pageIds)if(n.has(l)){u();break}},w=m=>{!n.has(m.documentPage.id)||!m.categoryId||a(k.produce(l=>{Gc(l,m.documentPage,m.position)}))},b=({action:m,documentPage:l})=>{m==="update"&&n.has(l.id)||m==="add"&&l.categoryId===t?u():(m==="delete"||m==="move")&&n.has(l.id)&&a(k.produce(g=>{m==="move"?kc(g,l):m==="delete"&&g.delete(l.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentPage:Action",b),window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",h),window.emitter.on("AppBridge:GuidelineDocumentPage:MoveEvent",w),()=>{window.emitter.off("AppBridge:GuidelineDocumentPage:Action",b),window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",h),window.emitter.off("AppBridge:GuidelineDocumentPage:MoveEvent",w)}},[t,u,n]),{documentPages:Array.from(n.values()),refetch:u,isLoading:s}},Gc=(e,t,r)=>{if(!t.sort||!r)return e;const n=e.get(t.id),a=[...e.values()].sort(Qr);e.clear();let s=1,i=!0;for(const u of a)u.id!==t.id&&(n&&s===r&&(e.set(t.id,{...n,sort:r}),i=!1),e.set(u.id,{...u,sort:s}),s++);return n&&i&&e.set(t.id,{...n,sort:s}),e},kc=(e,t)=>{const r=[...e.values()];let n=!0;e.clear();for(const a of r)a.id!==t.id&&(e.size===t.sort-1&&(e.set(t.id,t),n=!1),e.set(a.id,a));return n&&e.set(t.id,t),e},Mc=async(e,t)=>{const r=await e.getDocumentPagesByDocumentCategoryId(t);return new Map([...r].sort(Qr).map(n=>[n.id,n]))},Oc=(e,t)=>{const r=e.getBlockId(),[n,a]=p.useState([]),s=m=>{m.blockId===r&&!J(m.colorPalettes,m.prevColorPalettes)&&a(m.colorPalettes)};p.useEffect(()=>{let m=!0;return r&&((async()=>{const g=await e.getColorPalettesWithColors(t);m&&a(g)})(),window.emitter.on("AppBridge:ColorPalettesUpdated",s)),()=>{m=!1,window.emitter.off("AppBridge:ColorPalettesUpdated",s)}},[e,r,t]);const i=async()=>{window.emitter.emit("AppBridge:ColorPalettesUpdated",{blockId:r,colorPalettes:await e.getColorPalettesWithColors(t),prevColorPalettes:{...n}})};return{colorPalettes:n,createColorPalette:async m=>{await e.createColorPalette(m),i()},updateColorPalette:async(m,l)=>{await e.updateColorPalette(m,l),i()},deleteColorPalette:async m=>{await e.deleteColorPalette(m),i()},downloadColorKit:m=>e.downloadColorKit(m)}},Lc=(e,t)=>{const r=e.getBlockId(),[n,a]=p.useState([]);p.useEffect(()=>{let w=!0;const b=m=>{if(m.blockId===r&&!J(m.colors,m.prevColors)){const l=[...m.colors].sort((g,y)=>g.sort-y.sort);a(l)}};return r&&((async()=>{const l=await e.getColorsByColorPaletteId(t);if(w){const g=[...l].sort((y,v)=>y.sort-v.sort);a(g)}})(),window.emitter.on("AppBridge:ColorsUpdated",b)),()=>{w=!1,window.emitter.off("AppBridge:ColorsUpdated",b)}},[e,r,t]);const s=async()=>{window.emitter.emit("AppBridge:ColorsUpdated",{blockId:r,colors:await e.getColorsByColorPaletteId(t),prevColors:{...n}})};return{colorsByPaletteId:n,createColor:async w=>{await e.createColor(w),s()},updateColor:async(w,b)=>{await e.updateColor(w,b),s()},deleteColor:async w=>{await e.deleteColor(w),s()}}},Bc=(e,t={enabled:!0})=>{const[r,n]=p.useState(null),[a,s]=p.useState(!0),i=p.useCallback(async()=>{s(!0),n(await e.getCoverPage()),s(!1)},[e]);return p.useEffect(()=>{t.enabled&&i().catch(console.error)},[e,i,t.enabled]),p.useEffect(()=>{const u=h=>{if(h.action==="add"){i().catch(console.error);return}n(w=>h.action==="delete"?null:h.action==="update"&&h.coverPage?{...w,...h.coverPage}:w)};return window.emitter.on("AppBridge:GuidelineCoverPage:Action",u),()=>{window.emitter.off("AppBridge:GuidelineCoverPage:Action",u)}},[e,i]),{coverPage:r,isLoading:a}},Fr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Uc=(e,t,r={enabled:!0})=>{const[n,a]=p.useState(new Map([])),[s,i]=p.useState(!0),u=p.useCallback(async()=>{i(!0),a(await $c(e,t)),i(!1)},[e,t]);return p.useEffect(()=>{r.enabled&&u()},[u,r.enabled]),p.useEffect(()=>{const h=m=>{n.has(m.documentPage.categoryId)&&a(k.produce(l=>{const g=`${m.action}-page`;return(qr[g]||qr.default)(l,m.documentPage)}))},w=m=>{n.has(m.documentCategory.id)&&a(k.produce(l=>{Nc(l,m.documentCategory,m.position)}))},b=({action:m,documentCategory:l})=>{m==="update"&&n.has(l.id)||m==="add"&&l.documentId===t?u():m==="delete"&&n.has(l.id)&&a(k.produce(g=>{g.delete(l.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentCategory:Action",b),window.emitter.on("AppBridge:GuidelineDocumentCategory:DocumentPageAction",h),window.emitter.on("AppBridge:GuidelineDocumentCategory:MoveEvent",w),()=>{window.emitter.off("AppBridge:GuidelineDocumentCategory:Action",b),window.emitter.off("AppBridge:GuidelineDocumentCategory:DocumentPageAction",h),window.emitter.off("AppBridge:GuidelineDocumentCategory:MoveEvent",w)}},[n,t,u]),{documentCategories:Array.from(n.values()),refetch:u,isLoading:s}},Nc=(e,t,r)=>{if(!t.sort||!r)return e;const n=e.get(t.id),a=[...e.values()].sort(Fr);e.clear();let s=1,i=!0;for(const u of a)u.id!==t.id&&(n&&s===r&&(e.set(t.id,{...n,sort:r}),i=!1),e.set(u.id,{...u,sort:s}),s++);return n&&i&&e.set(t.id,{...n,sort:s}),e},qr={"add-page":(e,t)=>{if(!t.categoryId)return e;const r=e.get(t.categoryId);if(!r)return e;const n={...r,numberOfDocumentPages:r.numberOfDocumentPages+1};return e.set(r.id,n)},"delete-page":(e,t)=>{if(!t.categoryId)return e;const r=e.get(t.categoryId);if(!r)return e;const n={...r,numberOfDocumentPages:r.numberOfDocumentPages-1};return e.set(r.id,n)},default:e=>e},$c=async(e,t)=>{const r=await e.getDocumentCategoriesByDocumentId(t);return new Map([...r].sort(Fr).map(n=>[n.id,n]))},ye=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,xc=(e,t={enabled:!0})=>{const[r,n]=p.useState(new Map([])),[a,s]=p.useState(!0),i=p.useCallback(async()=>{s(!0),n(await jc(e)),s(!1)},[e]);return p.useEffect(()=>{t.enabled&&i()},[t.enabled,i]),p.useEffect(()=>{const u=m=>{n(k.produce(l=>{const g=`${m.action}-document`;return(en[g]||en.default)(l,m.document)}))},h=m=>{((m==null?void 0:m.action)==="move"||(m==null?void 0:m.action)==="add")&&r.size>0&&i()},w=m=>{n(k.produce(l=>Ec(l,m.document,m.position,m.newGroupId)))},b=m=>{n(k.produce(l=>Zc(l,m.documentGroup,m.position)))};return window.emitter.on("AppBridge:GuidelineDocumentGroup:Action",i),window.emitter.on("AppBridge:GuidelineDocumentGroup:DocumentAction",u),window.emitter.on("AppBridge:GuidelineDocument:Action",h),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",w),window.emitter.on("AppBridge:GuidelineDocumentGroup:MoveEvent",b),()=>{window.emitter.off("AppBridge:GuidelineDocumentGroup:Action",i),window.emitter.off("AppBridge:GuidelineDocumentGroup:DocumentAction",u),window.emitter.off("AppBridge:GuidelineDocument:Action",h),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",w),window.emitter.off("AppBridge:GuidelineDocumentGroup:MoveEvent",b)}},[r.size,i]),{documentGroups:Array.from(r.values()),refetch:i,isLoading:a}},Ec=(e,t,r,n)=>{if(n||!t.sort)return e;const a=t.sort,s=[...e.values()].sort(ye),i=[];e.clear();for(const h of s){const w=h.sort??0;let b=0;r<w?b=a>w||a===0?1:0:b=a<=w?-1:0,i.push({...h,sort:w+b})}const u=[...i].sort(ye);for(const h of u)e.set(h.id,h);return e},Zc=(e,t,r)=>{if(!t.sort)return e;const n=t.sort,a=[...e.values()].sort(ye),s=[];e.clear();for(const u of a){if(u.id===t.id){s.push({...u,sort:r});continue}const h=u.sort??0;let w=0;r<=h&&(w=n>h?1:0),s.push({...u,sort:h+w})}const i=[...s].sort(ye);for(const u of i)e.set(u.id,u);return e},en={"add-document":(e,t)=>{if(!t.documentGroupId)return e;const r=e.get(t.documentGroupId);if(!r)return e;const n={...r,numberOfDocuments:r.numberOfDocuments+1};return e.set(r.id,n)},"delete-document":(e,t)=>{if(!t.documentGroupId)return e;const r=e.get(t.documentGroupId);if(!r)return e;const n={...r,numberOfDocuments:r.numberOfDocuments-1};return e.set(r.id,n)},default:e=>e},jc=async e=>{const t=await e.getDocumentGroups();return new Map([...t].sort(ye).map(r=>[r.id,r]))},zc=(e,t)=>{const[r,n]=p.useState(null),[a,s]=p.useState(!0);return p.useEffect(()=>{(async()=>{s(!0),n(await e.getDocumentPageTargets(t)),s(!1)})()},[e,t]),p.useEffect(()=>{const i=u=>{u.payload.pageIds.includes(t)&&n(h=>Kc(h,u.payload.targets))};return window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",i),()=>{window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",i)}},[t]),{documentPageTargets:r,isLoading:a}},Kc=(e,t)=>e&&{...e,hasSelectedTargets:t.length>0,targets:e.targets.map(r=>({...r,target:{...r.target,checked:t.includes(r.target.id)}}))},Wc=(e,t)=>{const[r,n]=p.useState([]);return p.useEffect(()=>{(async s=>{n(await e.getDocumentSectionsByDocumentPageId(s))})(t)},[e,t]),{documentSections:r}},Xc=(e,t)=>{const[r,n]=p.useState(null),[a,s]=p.useState(!0);return p.useEffect(()=>{(async()=>{s(!0),n(await e.getDocumentTargets(t)),s(!1)})()},[e,t]),p.useEffect(()=>{const i=u=>{u.payload.documentIds.includes(t)&&n(h=>Rc(h,u.payload.targets))};return window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",i),()=>{window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",i)}},[t]),{documentTargets:r,isLoading:a}},Rc=(e,t)=>e&&{...e,hasSelectedTargets:t.length>0,targets:e.targets.map(r=>({...r,target:{...r.target,checked:t.includes(r.target.id)}}))},Vc=e=>{const[t,r]=p.useState(e.getEditorState());return p.useEffect(()=>{const n=()=>r(e.getEditorState()),a=new MutationObserver(s=>{for(const i of s)i.attributeName==="class"&&n()});return a.observe(document.body,{attributes:!0}),()=>{a.disconnect()}},[]),t},Hc=({accept:e,multiple:t})=>{const[r,n]=p.useState(null),a=i=>{if(i.target){const u=i.target.files;n(u)}};return[()=>{const i=document.createElement("input");i.type="file",e&&(i.accept=e),i.multiple=!!t,i.addEventListener("change",a),i.dispatchEvent(new MouseEvent("click"))},{selectedFiles:r}]},tn=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Yc=(e,t,r={enabled:!0})=>{const[n,a]=p.useState(new Map([])),[s,i]=p.useState(!0),u=p.useCallback(async()=>{i(!0),a(await Qc(e,t)),i(!1)},[e,t]);return p.useEffect(()=>{r.enabled&&u()},[r.enabled,u]),p.useEffect(()=>{const h=l=>{n.has(l.documentPage.documentId)&&a(k.produce(g=>{const y=`${l.action}-page`;return(ke[y]||ke.default)(g,l.documentPage)}))},w=l=>{n.has(l.documentCategory.documentId)&&a(k.produce(g=>{const y=`${l.action}-category`;return(ke[y]||ke.default)(g,l.documentCategory)}))},b=l=>{!n.has(l.document.id)||l.newGroupId!==t||a(k.produce(g=>Jc(g,l.document,l.position,l.newGroupId)))},m=({action:l,document:g})=>{(l==="update"||l==="move")&&n.has(g.id)||l==="add"&&g.documentGroupId===t?u():l==="delete"&&n.has(g.id)&&a(k.produce(y=>{l==="delete"&&y.delete(g.id)}))};return window.emitter.on("AppBridge:GuidelineDocument:Action",m),window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",u),window.emitter.on("AppBridge:GuidelineDocument:DocumentPageAction",h),window.emitter.on("AppBridge:GuidelineDocument:DocumentCategoryAction",w),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",b),()=>{window.emitter.off("AppBridge:GuidelineDocument:Action",m),window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",u),window.emitter.off("AppBridge:GuidelineDocument:DocumentPageAction",h),window.emitter.off("AppBridge:GuidelineDocument:DocumentCategoryAction",w),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",b)}},[t,n,r.enabled,u]),{documents:Array.from(n.values()),refetch:u,isLoading:s}},Jc=(e,t,r,n)=>{if(!t.sort)return e;const a=e.get(t.id),s=[...e.values()].sort(tn);e.clear();let i=1,u=!0;for(const h of s)h.id===t.id||h.documentGroupId!==n||(a&&i===r&&(e.set(t.id,{...a,sort:r}),u=!1),e.set(h.id,{...h,sort:i}),i++);return a&&u&&e.set(t.id,{...a,sort:i}),e},ke={"add-page":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfUncategorizedDocumentPages:r.numberOfUncategorizedDocumentPages+1};return e.set(r.id,n)},"delete-page":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfUncategorizedDocumentPages:r.numberOfUncategorizedDocumentPages-1};return e.set(r.id,n)},"add-category":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfDocumentPageCategories:r.numberOfDocumentPageCategories+1};return e.set(r.id,n)},"delete-category":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfDocumentPageCategories:r.numberOfDocumentPageCategories-1};return e.set(r.id,n)},default:e=>e},Qc=async(e,t)=>{const r=await e.getDocumentsByDocumentGroupId(t);return new Map([...r].sort(tn).map(n=>[n.id,n]))},Fc=e=>{const t=p.useCallback(async f=>{const A=await e.createLink(f);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...f.documentGroupId&&{documentGroupId:f.documentGroupId}},action:"add"}),f.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:A.id,documentGroupId:f.documentGroupId},action:"add"}),A},[e]),r=p.useCallback(async f=>{const A=await e.updateLink(f);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...f.documentGroupId&&{documentGroupId:f.documentGroupId}},action:"update"}),A},[e]),n=p.useCallback(async f=>{await e.deleteLink(f.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:f,action:"delete"}),f.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...f,documentGroupId:f.documentGroupId},action:"delete"})},[e]),a=p.useCallback(async f=>{const A=await e.createLibrary(f);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...f.documentGroupId&&{documentGroupId:f.documentGroupId}},action:"add"}),f.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:A.id,documentGroupId:f.documentGroupId},action:"add"}),A},[e]),s=p.useCallback(async f=>{const A=await e.updateLibrary(f);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...f.documentGroupId&&{documentGroupId:f.documentGroupId}},action:"update"}),A},[e]),i=p.useCallback(async f=>{await e.deleteLibrary(f.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:f,action:"delete"}),f.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...f,documentGroupId:f.documentGroupId},action:"delete"})},[e]),u=p.useCallback(async f=>{const A=await e.createStandardDocument(f);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...f.documentGroupId&&{documentGroupId:f.documentGroupId}},action:"add"}),f.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:A.id,documentGroupId:f.documentGroupId},action:"add"}),A},[e]),h=p.useCallback(async f=>{const A=await e.updateStandardDocument(f);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...f.documentGroupId&&{documentGroupId:f.documentGroupId}},action:"update"}),A},[e]),w=p.useCallback(async f=>{await e.deleteStandardDocument(f.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:f,action:"delete"}),f.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...f,documentGroupId:f.documentGroupId},action:"delete"})},[e]),b=p.useCallback(async f=>{const A=await e.createDocumentGroup(f);return window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:A,action:"add"}),A},[e]),m=p.useCallback(async f=>{const A=await e.updateDocumentGroup(f);window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:A,action:"update"})},[e]),l=p.useCallback(async f=>{await e.deleteDocumentGroup(f.id),window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:f,action:"delete"})},[e]),g=p.useCallback(async f=>{const A=await e.createDocumentPage(f);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:A,action:"add"}),f.categoryId&&window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{id:A.id,categoryId:f.categoryId},action:"add"}),A},[e]),y=p.useCallback(async f=>{const A=await e.updateDocumentPage(f);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:A,action:"update"}),A},[e]),v=p.useCallback(async f=>{await e.deleteDocumentPage(f.id),window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:{...f,categoryId:f.categoryId??null},action:"delete"}),f.categoryId?window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{...f,categoryId:f.categoryId},action:"delete"}):window.emitter.emit("AppBridge:GuidelineDocument:DocumentPageAction",{documentPage:f,action:"delete"})},[e]),T=p.useCallback(async({id:f,documentId:A,categoryId:M})=>{const E=await e.duplicateDocumentPage(f);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:{...E,title:E.name,documentId:A,categoryId:M},action:"add"}),M&&window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{id:E.id,categoryId:M},action:"add"}),E},[e]),C=p.useCallback(async f=>{const A=await e.createDocumentCategory(f);return window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:A,action:"add"}),window.emitter.emit("AppBridge:GuidelineDocument:DocumentCategoryAction",{documentCategory:A,action:"add"}),A},[e]),D=p.useCallback(async f=>{const A=await e.updateDocumentCategory(f);window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:A,action:"update"})},[e]),P=p.useCallback(async f=>{await e.deleteDocumentCategory(f.id),window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:f,action:"delete"}),window.emitter.emit("AppBridge:GuidelineDocument:DocumentCategoryAction",{documentCategory:f,action:"delete"})},[e]),_=p.useCallback(async f=>{const A=await e.createCoverPage(f);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:A,action:"add"}),A},[e]),S=p.useCallback(async f=>{const A=await e.updateCoverPage(f);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:A,action:"update"}),A},[e]),F=p.useCallback(async f=>{const A={...f.title&&{brandhome_title:f.title},...f.draft!==void 0&&{brandhome_draft:f.draft},...f.hideInNav!==void 0&&{brandhome_hide_in_nav:f.hideInNav}},M=await e.updateLegacyCoverPage(A);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:f,action:"update"}),M},[e]),le=p.useCallback(async()=>{await e.deleteCoverPage(),window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{action:"delete"})},[e]),q=p.useCallback(async f=>{const A=await e.updateBrandportalLink(f);return A&&window.emitter.emit("AppBridge:GuidelineBrandportalLink:Action",{brandportalLink:A,action:"update"}),A},[e]),Ee=p.useCallback(async(f,A,M)=>{const E="AppBridge:GuidelineDocument:MoveEvent";window.emitter.emit(E,{document:f,position:A,newGroupId:M,action:"movePreview"});const ze=await e.moveDocument(f.id,A,M),H="AppBridge:GuidelineDocument:Action";f.documentGroupId===M?window.emitter.emit(H,{document:{...ze,sort:A},action:"move"}):(window.emitter.emit(H,{document:f,action:"delete"}),window.emitter.emit(H,{document:ze,action:"add"}))},[e]),Ze=p.useCallback(async(f,A)=>{const M="AppBridge:GuidelineDocumentGroup:MoveEvent";window.emitter.emit(M,{documentGroup:f,position:A,action:"movePreview"}),await e.moveDocumentGroup(f.id,A),window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:{...f,sort:A},action:"update"})},[e]),x=p.useCallback(async(f,A,M)=>{const E="AppBridge:GuidelineDocumentCategory:MoveEvent";window.emitter.emit(E,{documentCategory:f,documentId:A,position:M,action:"movePreview"}),await e.moveDocumentCategory(f.id,A,M),window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:{...f,documentId:A,sort:M},action:"update"})},[e]),je=p.useCallback(async(f,A,M,E=null)=>{const ze="AppBridge:GuidelineDocumentPage:MoveEvent";window.emitter.emit(ze,{documentPage:f,documentId:A,position:M,categoryId:E,action:"movePreview"});const H=await e.moveDocumentPage(f.id,A,M,E??void 0),At="AppBridge:GuidelineDocumentPage:Action";f.categoryId===E&&f.documentId===A?window.emitter.emit(At,{documentPage:{...H,sort:M??H.sort},action:"move"}):(window.emitter.emit(At,{documentPage:{...f,categoryId:f.categoryId??null},action:"delete"}),window.emitter.emit(At,{documentPage:H,action:"add"}));const Yl=f.categoryId?"AppBridge:GuidelineDocumentCategory:DocumentPageAction":"AppBridge:GuidelineDocument:DocumentPageAction",Jl=H.categoryId?"AppBridge:GuidelineDocumentCategory:DocumentPageAction":"AppBridge:GuidelineDocument:DocumentPageAction";window.emitter.emit(Yl,{documentPage:f,action:"delete"}),window.emitter.emit(Jl,{documentPage:H,action:"add"})},[e]),Vl=p.useCallback(async(f,A)=>{const M=await e.updateDocumentPageTargets(f,A);return window.emitter.emit("AppBridge:GuidelineDocumentPageTargets:Action",{payload:{targets:f,pageIds:A},action:"update"}),M},[e]),Hl=p.useCallback(async(f,A)=>{const M=await e.updateDocumentTargets(f,A);return window.emitter.emit("AppBridge:GuidelineDocumentTargets:Action",{payload:{targets:f,documentIds:A},action:"update"}),M},[e]);return{createLink:t,updateLink:r,deleteLink:n,createDocumentPage:g,updateDocumentPage:y,deleteDocumentPage:v,duplicateDocumentPage:T,moveDocumentPage:je,createLibrary:a,updateLibrary:s,deleteLibrary:i,createDocumentCategory:C,updateDocumentCategory:D,deleteDocumentCategory:P,moveDocumentCategory:x,createCoverPage:_,updateCoverPage:S,deleteCoverPage:le,updateLegacyCoverPage:F,moveDocumentGroup:Ze,createDocumentGroup:b,updateDocumentGroup:m,deleteDocumentGroup:l,updateBrandportalLink:q,createDocument:u,updateDocument:h,deleteDocument:w,moveDocument:Ee,updateDocumentPageTargets:Vl,updateDocumentTargets:Hl}},qc=e=>{const{openNavigationManager:t}=e;return{openNavigationManager:()=>t()}},el=(e,t,r)=>{const{themeSettings:n}=an(e),[a,s]=p.useState(null),[i,u]=p.useState(!1),[h,w]=p.useState([]),[b,m]=p.useState(null);return p.useEffect(()=>{const g=v=>{s({...v.pageTemplateSettings})};return(async()=>{u(!0);let v=null;if(t==="cover")v=await e.getCoverPageTemplateSettings();else if(r===void 0){console.error(`Document ID is required for ${t} template settings`),m(null),u(!1);return}else t==="documentPage"?v=await e.getDocumentPageTemplateSettings(r):t==="library"&&(v=await e.getLibraryPageTemplateSettings(r));u(!1),s(v)})(),window.emitter.on("AppBridge:PageTemplateSettingsUpdated",g),()=>{window.emitter.off("AppBridge:PageTemplateSettingsUpdated",g)}},[e,r,t]),p.useEffect(()=>{if(!n||!a)return;const g=[],y={...a};for(const v of Object.keys(n))a[v]!==null&&a[v]!==void 0?g.push(v):y[v]=n[v];w(g),m(y)},[n,a]),{pageTemplateSettings:b,customizedPageTemplateSettingsKeys:h,updatePageTemplateSettings:async g=>{try{if(t==="cover")await e.updateCoverPageTemplateSettings(g);else if(r===void 0){console.error(`Document ID is required for ${t} template settings`),u(!1);return}else t==="documentPage"?await e.updateDocumentPageTemplateSettings(r,g):t==="library"&&await e.updateLibraryPageTemplateSettings(r,g);window.emitter.emit("AppBridge:PageTemplateSettingsUpdated",{pageTemplateSettings:{...a,...g}})}catch(y){console.error(y)}},isLoading:i}},tl=e=>{const[t,r]=p.useState(e.getPrivacySettings());return p.useEffect(()=>{const n=a=>r({...t,...a});return window.emitter.on("AppBridge:PrivacySettingsChanged",n),()=>{window.emitter.off("AppBridge:PrivacySettingsChanged",n)}},[t]),t},rl=e=>{const[t,r]=p.useState(!1);return p.useEffect(()=>{const a=document.querySelector(`.block[data-block="${e.getBlockId()}"]`);if(!a){console.error("Could not find block wrapper:",e.getBlockId());return}a.setAttribute("data-ready",t.toString())},[e,t]),{isReadyForPrint:t,setIsReadyForPrint:a=>{r(a)}}},pt=async({appBridge:e,template:t,documentId:r,documentPageId:n})=>t==="cover"?await e.getCoverPageTemplateAssets():t==="documentPage"&&n?await e.getDocumentPageTemplateAssets(n):t==="library"&&r?await e.getLibraryPageTemplateAssets(r):{},rn=async(e,t,{appBridge:r,template:n,documentId:a,documentPageId:s})=>{n==="cover"?await r.addAssetIdsToCoverPageTemplateAssetKey(e,t):n==="documentPage"&&s?await r.addAssetIdsToDocumentPageTemplateAssetKey(s,e,t):n==="library"&&a&&await r.addAssetIdsToLibraryPageTemplateAssetKey(a,e,t)},nn=async(e,t,{appBridge:r,template:n,documentId:a,documentPageId:s})=>{n==="cover"?await r.deleteAssetIdsFromCoverPageTemplateAssetKey(e,t):n==="documentPage"&&s?await r.deleteAssetIdsFromDocumentPageTemplateAssetKey(s,e,t):n==="library"&&a&&await r.deleteAssetIdsFromLibraryPageTemplateAssetKey(a,e,t)},nl=(e,t,r,n)=>{const[a,s]=p.useState({}),{themeAssets:i}=on(e),[u,h]=p.useState([]),[w,b]=p.useState({});p.useEffect(()=>{let v=!0;const T=C=>{C.template===t&&C.documentId===r&&C.documentPageId===n&&!J(C.templateAssets,C.prevTemplateAssets)&&s(C.templateAssets)};return t&&((async()=>{const D=await pt({appBridge:e,template:t,documentId:r,documentPageId:n});v&&s(D)})(),window.emitter.on("AppBridge:TemplateAssetsUpdated",T)),()=>{v=!1,window.emitter.off("AppBridge:TemplateAssetsUpdated",T)}},[e,r,n,t]),p.useEffect(()=>{const v=[],T={...a};for(const C in i)a[C]!==null&&a[C]!==void 0?v.push(C):i[C].length>0&&(T[C]=i[C]);h(v),b(T)},[i,a]);const m=async()=>{window.emitter.emit("AppBridge:TemplateAssetsUpdated",{template:t,documentId:r,documentPageId:n,templateAssets:await pt({appBridge:e,template:t,documentId:r,documentPageId:n}),prevTemplateAssets:{...a}})};return{templateAssets:w,customizedTemplateAssetsKeys:u,addAssetIdsToKey:async(v,T)=>{await rn(v,T,{appBridge:e,template:t,documentId:r,documentPageId:n}),m()},deleteAssetIdsFromKey:async(v,T)=>{await nn(v,T,{appBridge:e,template:t,documentId:r,documentPageId:n}),m()},updateAssetIdsFromKey:async(v,T)=>{var P;const D=((P=(await pt({appBridge:e,template:t,documentId:r,documentPageId:n}))[v])==null?void 0:P.map(_=>_.id))??[];try{await nn(v,D,{appBridge:e,template:t,documentId:r,documentPageId:n}),await rn(v,T,{appBridge:e,template:t,documentId:r,documentPageId:n})}catch(_){console.error(_)}m()}}},on=e=>{const t=e.getPortalId(),[r,n]=p.useState({}),a=l=>{l.portalId===t&&!J(l.themeAssets,l.prevThemeAssets)&&n(l.themeAssets)},s=async()=>await e.getThemeAssets(),i=async(l,g)=>{await e.addAssetIdsToThemeAssetKey(l,g)},u=async(l,g)=>{await e.deleteAssetIdsFromThemeAssetKey(l,g)};p.useEffect(()=>{let l=!0;return t&&((async()=>{const y=await s();l&&n(y)})(),window.emitter.on("AppBridge:ThemeAssetsUpdated",a)),()=>{l=!1,window.emitter.off("AppBridge:ThemeAssetsUpdated",a)}},[e]);const h=async()=>{window.emitter.emit("AppBridge:ThemeAssetsUpdated",{portalId:t,themeAssets:await s(),prevThemeAssets:{...r}})};return{themeAssets:r,addAssetIdsToKey:async(l,g)=>{await i(l,g),h()},deleteAssetIdsFromKey:async(l,g)=>{await u(l,g),h()},updateAssetIdsFromKey:async(l,g)=>{var T;const v=((T=(await s())[l])==null?void 0:T.map(C=>C.id))??[];try{await u(l,v),await i(l,g)}catch(C){console.error(C)}h()}}},an=e=>{const[t,r]=p.useState(null),[n,a]=p.useState(!0);return p.useEffect(()=>{const i=h=>{r({...h.themeSettings})};return(async()=>{a(!0);const h=await e.getThemeSettings();r(h),a(!1)})(),window.emitter.on("AppBridge:ThemeSettingsUpdated",i),()=>{window.emitter.off("AppBridge:ThemeSettingsUpdated",i)}},[e]),{themeSettings:t,updateThemeSettings:async i=>{try{await e.updateThemeSettings(i),window.emitter.emit("AppBridge:ThemeSettingsUpdated",{themeSettings:{...t,...i}})}catch(u){console.error(u)}},isLoading:n}},ol=e=>({openTemplateChooser:e.openTemplateChooser.bind(e),closeTemplateChooser:e.closeTemplateChooser.bind(e)}),sn=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,al=(e,t,r={enabled:!0})=>{const[n,a]=p.useState(new Map([])),[s,i]=p.useState(!0),u=p.useCallback(async()=>{i(!0),a(await ul(e,t)),i(!1)},[e,t]);return p.useEffect(()=>{r.enabled&&u()},[r.enabled,u]),p.useEffect(()=>{const h=m=>{for(const l of m.payload.pageIds)if(n.has(l)){u();break}},w=m=>{!n.has(m.documentPage.id)||m.categoryId||a(k.produce(l=>{sl(l,m.documentPage,m.position)}))},b=({action:m,documentPage:l})=>{m==="update"&&n.has(l.id)||m==="add"&&l.documentId===t&&!l.categoryId?u():(m==="delete"||m==="move")&&n.has(l.id)&&a(k.produce(g=>{m==="move"?il(g,l):m==="delete"&&g.delete(l.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentPage:Action",b),window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",h),window.emitter.on("AppBridge:GuidelineDocumentPage:MoveEvent",w),()=>{window.emitter.off("AppBridge:GuidelineDocumentPage:Action",b),window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",h),window.emitter.off("AppBridge:GuidelineDocumentPage:MoveEvent",w)}},[t,u,n]),{documentPages:Array.from(n.values()),refetch:u,isLoading:s}},sl=(e,t,r)=>{if(!t.sort||!r)return e;const n=e.get(t.id),a=[...e.values()].sort(sn);e.clear();let s=1,i=!0;for(const u of a)u.id!==t.id&&(n&&s===r&&(e.set(t.id,{...n,sort:r}),i=!1),e.set(u.id,{...u,sort:s}),s++);return n&&i&&e.set(t.id,{...n,sort:s}),e},il=(e,t)=>{const r=[...e.values()];let n=!0;e.clear();for(const a of r)a.id!==t.id&&(e.size===t.sort-1&&(e.set(t.id,t),n=!1),e.set(a.id,a));return n&&e.set(t.id,t),e},ul=async(e,t)=>{const r=await e.getUncategorizedDocumentPagesByDocumentId(t);return new Map([...r].sort(sn).map(n=>[n.id,n]))},Ae=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,cl=(e,t={enabled:!0})=>{const[r,n]=p.useState(new Map([])),[a,s]=p.useState(!0),i=p.useCallback(async()=>{s(!0),n(await ml(e)),s(!1)},[e]);return p.useEffect(()=>{t.enabled&&i()},[t.enabled,i]),p.useEffect(()=>{const u=g=>{r.has(g.documentPage.documentId)&&n(k.produce(y=>{const v=`${g.action}-page`;return(Me[v]||Me.default)(y,g.documentPage)}))},h=g=>{r.has(g.documentCategory.documentId)&&n(k.produce(y=>{const v=`${g.action}-category`;return(Me[v]||Me.default)(y,g.documentCategory)}))},w=g=>{(g==null?void 0:g.action)==="update"&&r.size>0&&i()},b=g=>{!r.has(g.document.id)||g.newGroupId||g.document.documentGroupId||n(k.produce(y=>ll(y,g.document,g.position)))},m=g=>{n(k.produce(y=>dl(y,g==null?void 0:g.documentGroup,g.position)))},l=({action:g,document:y})=>{(g==="update"||g==="move")&&r.has(y.id)||g==="add"&&!y.documentGroupId?i():g==="delete"&&r.has(y.id)&&n(k.produce(v=>{g==="delete"&&v.delete(y.id)}))};return window.emitter.on("AppBridge:GuidelineDocument:Action",l),window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",i),window.emitter.on("AppBridge:GuidelineDocument:DocumentPageAction",u),window.emitter.on("AppBridge:GuidelineDocument:DocumentCategoryAction",h),window.emitter.on("AppBridge:GuidelineDocumentGroup:Action",w),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",b),window.emitter.on("AppBridge:GuidelineDocumentGroup:MoveEvent",m),()=>{window.emitter.off("AppBridge:GuidelineDocument:Action",l),window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",i),window.emitter.off("AppBridge:GuidelineDocument:DocumentPageAction",u),window.emitter.off("AppBridge:GuidelineDocument:DocumentCategoryAction",h),window.emitter.off("AppBridge:GuidelineDocumentGroup:Action",w),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",b),window.emitter.off("AppBridge:GuidelineDocumentGroup:MoveEvent",m)}},[r,t.enabled,i]),{documents:Array.from(r.values()),refetch:i,isLoading:a}},ll=(e,t,r)=>{if(!t.sort||!r)return e;const n=t.sort,a=[...e.values()].sort(Ae),s=[];e.clear();for(const u of a){if(u.id===t.id){s.push({...u,sort:r});continue}const h=u.sort??0;let w=0;r<=h&&(w=n>h||n===0?1:0),s.push({...u,sort:h+w})}const i=[...s].sort(Ae);for(const u of i)e.set(u.id,u);return e},dl=(e,t,r)=>{if(!t.sort)return e;const n=t.sort,a=[...e.values()].sort(Ae),s=[];e.clear();for(const u of a){const h=u.sort??0;let w=0;r<=h&&(w=n>h?1:0),s.push({...u,sort:h+w})}const i=[...s].sort(Ae);for(const u of i)e.set(u.id,u);return e},Me={"add-page":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfUncategorizedDocumentPages:r.numberOfUncategorizedDocumentPages+1};return e.set(r.id,n)},"delete-page":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfUncategorizedDocumentPages:r.numberOfUncategorizedDocumentPages-1};return e.set(r.id,n)},"add-category":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfDocumentPageCategories:r.numberOfDocumentPageCategories+1};return e.set(r.id,n)},"delete-category":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfDocumentPageCategories:r.numberOfDocumentPageCategories-1};return e.set(r.id,n)},default:e=>e},ml=async e=>{const t=await e.getUngroupedDocuments();return new Map([...t].sort(Ae).map(r=>[r.id,r]))},pl=()=>{const[e,t]=p.useState();return p.useEffect(()=>{(async()=>{const r=new Rr;r.subscribe("Context.connected",()=>{t(r)}),r.dispatch({name:"openConnection"})})()},[]),e};class Oe{static with(t){return{id:t,creatorName:"Creator Name",extension:"png",externalUrl:null,fileName:"fileName.png",title:"A title",status:"FINISHED",objectType:"IMAGE",height:480,width:640,genericUrl:"https://generic.url",previewUrl:"https://preview.url",originUrl:"https://origin.url",projectId:23,fileSize:256,fileSizeHumanReadable:"123.45 MB",fileId:"x1x1x1x1x1x1",token:"--token--",projectType:"STYLEGUIDE",revisionId:1}}}class un{static with(t){return{id:t,name:"Frontify Dummy User",email:"test@frontify.test",created:"2020-01-01T00:00:00.000Z",image:{image:"https://dummy.frontify.test/image.png",original:"https://dummy.frontify.test/original_image.png",x:"10",y:"20",width:"30",height:"40"},organization:"Frontify",role:"user",timezone:"UTC",language:"en"}}}class B{static red(t=767){return{id:t,name:"Red",sort:1,nameCss:"red",hex:"ff0000",red:255,green:0,blue:0,alpha:255,hue:361,saturation:100,lightness:46,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}static yellow(t=768){return{id:t,name:"Yellow",sort:2,nameCss:"yellow",red:255,green:255,blue:0,hex:"ffff00",alpha:255,hue:361,saturation:100,lightness:46,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}static green(t=769){return{id:t,name:"Green",sort:3,nameCss:"green",red:0,green:255,blue:0,hex:"00ff00",alpha:255,hue:361,saturation:100,lightness:46,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}}class gl{static red(){return{colorPaletteId:23,red:255,green:0,blue:0,alpha:255}}}class fl{static red(){return{name:"Red",sort:1,nameCss:"red",red:255,green:0,blue:0,alpha:255,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}}class ${static with(t,r="Color Palette Name"){return{id:t,name:r,description:"Color Palette Description",colors:[B.red(),B.yellow(),B.green()]}}}class hl{static with(t="New Color Palette Name",r="New Color Palette Description"){return{name:t,description:r}}}class wl{static with(){return{name:"Updated Color Palette Name",description:"Updated Color Palette Description"}}}class gt{static default(){return{downloadUrl:"dummy-url",signature:"dummy-signature"}}}class cn{static with(t){return{id:t,name:"A template",description:"A description",previewUrl:"https://preview.url",projectId:23,pages:[N({preview_url:"https://preview.url",width:1024,height:768},"camel")]}}}const ft=3452,bl=2341,yl=4561,ln=345214,dn=({blockSettings:e={},blockAssets:t={},editorState:r=!1,openAssetChooser:n=()=>null,closeAssetChooser:a=()=>null,blockId:s=ft,sectionId:i=bl,projectId:u=ln,user:h=un.with(yl),language:w="en",privacySettings:b={assetViewerEnabled:!1,assetDownloadEnabled:!1},blockTemplates:m={}}={})=>{window.emitter=d.spy(Dt()),window.blockSettings??(window.blockSettings={}),window.blockSettings[s]=e;const l={},g={},y={},v={};return{getBlockId:d.stub().returns(s),getSectionId:d.stub().returns(i),getProjectId:d.stub().returns(u),getEditorState:d.stub().returns(r),getBlockSettings:d.stub().resolves(window.blockSettings),getAvailablePalettes:d.stub().resolves([$.with(678,"Palette 1"),$.with(427,"Palette 2"),$.with(679,"Palette 3")]),getColorPalettes:d.stub().resolves([$.with(678,"Palette 1"),$.with(427,"Palette 2"),$.with(679,"Palette 3")]),createColorPalette:d.stub().resolves($.with(678)),updateColorPalette:d.stub().resolves($.with(678)),getColorsByIds:d.stub().resolves([B.red(9834),B.green(342),B.yellow(9314)]),getColorsByColorPaletteId:d.stub().resolves([B.red(9834),B.green(342),B.yellow(9314)]),getColorPalettesWithColors:d.stub().resolves([$.with(678,"Palette 1"),$.with(427,"Palette 2"),$.with(679,"Palette 3")]),deleteColorPalette:d.stub().resolves(),getAvailableColors:d.stub().resolves([]),getCurrentLoggedUser:d.stub().resolves(h),downloadColorKit:d.stub().returns(`/api/color/export/${ln}/zip/500`),getAssetById:d.stub().callsFake(T=>Promise.resolve(Oe.with(T))),closeAssetChooser:d.stub().callsFake(()=>{a()}),openAssetChooser:d.stub().callsFake(T=>{n(T)}),getBlockAssets:d.stub().callsFake(async()=>Object.entries(t).reduce((T,[C,D])=>{const P=g[C]??[],_=l[C]??[];return T[C]=[...D.filter(S=>!_.includes(S.id)),...P.map(S=>Oe.with(S))],T},{})),addAssetIdsToBlockAssetKey:d.stub().callsFake(async(T,C)=>{g[T]=[...g[T]??[],...C]}),deleteAssetIdsFromBlockAssetKey:d.stub().callsFake(async(T,C)=>{l[T]=[...l[T]??[],...C]}),getBlockTemplates:d.stub().callsFake(async()=>Object.entries(m).reduce((T,[C,D])=>{const P=v[C]??[],_=y[C]??[];return T[C]=[...D.filter(S=>!_.includes(S.id)),...P.map(S=>cn.with(S))],T},{})),addTemplateIdsToBlockTemplateKey:d.stub().callsFake(async(T,C)=>{v[T]=[...v[T]??[],...C]}),deleteTemplateIdsFromBlockTemplateKey:d.stub().callsFake(async(T,C)=>{y[T]=[...y[T]??[],...C]}),getTranslationLanguage:d.stub().returns(w),getColors:d.stub().resolves([B.red(9834),B.green(342),B.yellow(9314)]),updateColor:d.stub().callsFake(T=>Promise.resolve(B.red(T))),getBulkDownloadBySignature:d.stub().resolves(gt.default()),getBulkDownloadByToken:d.stub().resolves(gt.default()),getPrivacySettings:d.stub().returns(b),api:d.stub().withArgs().resolves().withArgs({name:"getAssetBulkDownloadToken",payload:{settingIds:["settings1","settings2"],documentBlockId:ft}}).resolves({assetBulkDownloadToken:"token"}).withArgs({name:"getAssetBulkDownloadToken",payload:{settingIds:void 0,documentBlockId:ft}}).resolves({assetBulkDownloadToken:"token"}),closeTemplateChooser:d.stub(),openTemplateChooser:d.stub(),createColor:d.stub().resolves(B.red()),deleteColor:d.stub().resolves(),getTemplateById:d.stub().resolves({}),openAssetViewer:d.stub(),updateBlockSettings:d.stub().resolves(),getAllDocuments:d.stub().resolves(),getUngroupedDocuments:d.stub().resolves(),getDocumentsByDocumentGroupId:d.stub().resolves(),getDocumentGroups:d.stub().resolves(),getDocumentPagesByDocumentId:d.stub().resolves(),getDocumentPagesByDocumentCategoryId:d.stub().resolves(),getDocumentCategoriesByDocumentId:d.stub().resolves(),getUncategorizedDocumentPagesByDocumentId:d.stub().resolves(),getDocumentSectionsByDocumentPageId:d.stub().resolves(),getDocumentTargets:d.stub().resolves(),getDocumentPageTargets:d.stub().resolves(),state:d.stub().resolves(),context:d.stub().resolves(),subscribe:d.stub().resolves(),dispatch:d.stub().resolves()}},Al=()=>({api:d.stub().resolves(),state:d.stub().resolves(),context:d.stub().resolves(),subscribe:d.stub().resolves(),dispatch:d.stub().resolves()});class mn{static with(t){return{highlights:[t],type:"BLOCK",object_id:1,page_id:1,page_slug:"page-slug",page_title:"Page Title",page_category_slug:"page-category-slug",block_id:1,document_id:1,document_slug:"document-slug",document_title:"Document Title",portal_id:1,portal_token:"portal-token",section_id:null,section_slug:null,section_title:null,color_hex:void 0}}}class Le{static with(t){return N(mn.with(t),"camel")}}const Dl=234551,vl=3452,pn=7777,V=5332,Tl=95694,Cl=345882,Be=6456,gn=34532,fn=3455345,hn=2342,wn=2343445,bn=2434,yn=552,An=1145,Dn=32345,ht=147,_l=258,Pl=369,Ue=23442,vn=235345,Tn=12352,Cn=55221,_n=24324,Pn=3532,Sn=98954,Sl=3421,Il=65725,Gl=95934,kl=2341,In=653543,Gn=23411,kn=56657,Mn=({editorState:e=!1,brandId:t=Dl,portalId:r=pn,projectId:n=vl,pageTemplateSettings:a={},pageTemplateAssets:s={},themeSettings:i={},themeAssets:u={},language:h="en",openAssetChooser:w=()=>null,closeAssetChooser:b=()=>null}={})=>{window.emitter=d.spy(Dt());let m=a,l=i;const g={},y={},v=async D=>Object.entries(D).reduce((P,[_,S])=>{const F=y[_]??[],le=g[_]??[];return P[_]=[...S.filter(q=>!le.includes(q.id)),...F.map(q=>Oe.with(q))],P},{}),T=async()=>v(s),C=async()=>v(u);return{getPortalId:d.stub().returns(r),getProjectId:d.stub().returns(n),getEditorState:d.stub().returns(e),getCoverPage:d.stub().resolves(De.with(pn)),getAllDocuments:d.stub().resolves([I.with(Be),I.with(gn),I.with(fn),I.with(hn),I.with(wn),I.withDocumentGroupId(bn,V),I.withDocumentGroupId(yn,V),I.withDocumentGroupId(An,V),I.withDocumentGroupId(Dn,V)]),getUngroupedDocuments:d.stub().resolves([I.with(Be),I.with(gn),I.with(fn),I.with(hn),I.with(wn)]),getDocumentsByDocumentGroupId:d.stub().resolves([I.withDocumentGroupId(bn,V),I.withDocumentGroupId(yn,V),I.withDocumentGroupId(An,V),I.withDocumentGroupId(Dn,V)]),getDocumentGroups:d.stub().resolves([oe.with(V,3),oe.with(Tl,0),oe.with(Cl,2)]),getDocumentPagesByDocumentId:d.stub().resolves([L.with(Ue),L.with(vn),L.with(_n),L.with(Tn),L.with(Pn),L.with(Cn),L.with(Sn)]),getDocumentPagesByDocumentCategoryId:d.stub().callsFake(D=>Promise.resolve([L.withFields({id:Ue,categoryId:D,sort:1}),L.withFields({id:vn,categoryId:D,sort:2}),L.withFields({id:Tn,categoryId:D,sort:3}),L.withFields({id:Cn,categoryId:D,sort:4})])),getDocumentCategoriesByDocumentId:d.stub().callsFake(D=>Promise.resolve([ne.withDocumentIdAndNumberOfDocumentPages(ht,D,2),ne.withDocumentIdAndNumberOfDocumentPages(_l,D,0),ne.withDocumentIdAndNumberOfDocumentPages(Pl,D,2)])),getUncategorizedDocumentPagesByDocumentId:d.stub().callsFake(D=>Promise.resolve([L.withFields({id:_n,documentId:D,categoryId:null,sort:1}),L.withFields({id:Pn,documentId:D,categoryId:null,sort:2}),L.withFields({id:Sn,documentId:D,categoryId:null,sort:3})])),getDocumentSectionsByDocumentPageId:d.stub().resolves([xe.with(Sl),xe.with(Il),xe.with(Gl)]),getColorPalettes:d.stub().resolves([$.with(678,"Palette 1"),$.with(427,"Palette 2"),$.with(679,"Palette 3")]),getColorsByColorPaletteId:d.stub().resolves([B.red(9834),B.green(342),B.yellow(9314)]),duplicateDocumentPage:d.stub().resolves(Nn.with(kl)),getDocumentTargets:d.stub().resolves(En.with(Be)),getDocumentPageTargets:d.stub().resolves(Zn.with(Ue)),addAssetIdsToCoverPageTemplateAssetKey:d.stub().callsFake(async(D,P)=>(y[D]=[...y[D]??[],...P],s)),addAssetIdsToThemeAssetKey:d.stub().callsFake(async(D,P)=>(y[D]=[...y[D]??[],...P],s)),addAssetIdsToLibraryPageTemplateAssetKey:d.stub().callsFake(async(D,P,_)=>(y[P]=[...y[P]??[],..._],s)),addAssetIdsToDocumentPageTemplateAssetKey:d.stub().callsFake(async(D,P,_)=>(y[P]=[...y[P]??[],..._],s)),getCoverPageTemplateAssets:d.stub().callsFake(T),getThemeAssets:d.stub().callsFake(C),getLibraryPageTemplateAssets:d.stub().callsFake(T),getDocumentPageTemplateAssets:d.stub().callsFake(T),deleteAssetIdsFromCoverPageTemplateAssetKey:d.stub().callsFake(async(D,P)=>{g[D]=[...g[D]??[],...P]}),deleteAssetIdsFromThemeAssetKey:d.stub().callsFake(async(D,P)=>{g[D]=[...g[D]??[],...P]}),deleteAssetIdsFromLibraryPageTemplateAssetKey:d.stub().callsFake(async(D,P,_)=>{g[P]=[...g[P]??[],..._]}),deleteAssetIdsFromDocumentPageTemplateAssetKey:d.stub().callsFake(async(D,P,_)=>{g[P]=[...g[P]??[],..._]}),getCoverPageTemplateSettings:d.stub().resolves(m),getDocumentPageTemplateSettings:d.stub().resolves(m),getLibraryPageTemplateSettings:d.stub().resolves(m),getThemeSettings:d.stub().resolves(l),createLink:d.stub().resolves(I.with(1)),createLibrary:d.stub().resolves(I.with(1)),createStandardDocument:d.stub().resolves(I.with(1)),createDocumentPage:d.stub().resolves(L.with(1)),createDocumentGroup:d.stub().resolves(oe.with(1,0)),createDocumentCategory:d.stub().resolves(ne.with(1)),createCoverPage:d.stub().resolves(De.with(1)),updateLink:d.stub().resolves(I.with(1)),updateLibrary:d.stub().resolves(I.with(1)),updateStandardDocument:d.stub().resolves(I.with(1)),updateDocumentPage:d.stub().resolves(L.with(1)),updateDocumentGroup:d.stub().resolves(oe.with(1,0)),updateDocumentCategory:d.stub().resolves(ne.with(1)),updateCoverPage:d.stub().resolves(De.with(1)),updateLegacyCoverPage:d.stub().resolves(De.withLegacy(1)),updateBrandportalLink:d.stub().resolves(wt.with()),updateCoverPageTemplateSettings:d.stub().callsFake(async D=>{m=Q(m,D)}),updateDocumentPageTemplateSettings:d.stub().callsFake(async D=>{m=Q(m,D)}),updateLibraryPageTemplateSettings:d.stub().callsFake(async D=>{m=Q(m,D)}),updateThemeSettings:d.stub().callsFake(async D=>{l=Q(l,D)}),deleteCoverPage:d.stub().resolves(),deleteDocumentCategory:d.stub().resolves(),deleteDocumentGroup:d.stub().resolves(),deleteDocumentPage:d.stub().resolves(),deleteLibrary:d.stub().resolves(),deleteLink:d.stub().resolves(),deleteStandardDocument:d.stub().resolves(),getBrandId:d.stub().returns(t),getBrandportalLink:d.stub().resolves(wt.with()),getTranslationLanguage:d.stub().returns(h),moveDocument:d.stub().resolves(I.with(Be)),moveDocumentCategory:d.stub().resolves(ne.with(ht)),moveDocumentGroup:d.stub().resolves(oe.with(ht,0)),moveDocumentPage:d.stub().resolves(L.with(Ue)),openNavigationManager:d.stub(),updateDocumentPageTargets:d.stub().resolves(yt.with([In,Gn,kn])),updateDocumentTargets:d.stub().resolves(yt.with([In,Gn,kn])),searchInGuideline:d.stub().callsFake(async D=>Promise.resolve([Le.with(`${D}-1`),Le.with(`${D}-1`),Le.with(`${D}-3`)])),closeAssetChooser:d.stub().callsFake(()=>{b()}),openAssetChooser:d.stub().callsFake(D=>{w(D)}),api:d.stub().resolves(),state:d.stub().resolves(),context:d.stub().resolves(),subscribe:d.stub().resolves(),dispatch:d.stub().resolves()}};class Ml{static with(t){return{id:t,creator_name:"Creator Name",ext:"png",external_url:null,file_id:"x1x1x1x1x1x1",file_name:"fileName.png",generic_url:"https://generic.url",height:480,object_type:"IMAGE",file_origin_url:"https://origin.url",preview_url:"https://preview.url",project_id:23,project_name:null,project_type:"STYLEGUIDE",file_size:256,file_size_formatted:"123.45 MB",status:"FINISHED",title:"A title",width:640,token:"--token--",revision_id:1}}}class Ol{static default(){return{projectTypes:Object.values(Xe),objectTypes:[Re.Canvas],extensions:[o.Jpg,o.Png,o.Svg],multiSelection:!0,urlContains:"abc.xyz"}}static withSingleSelectedValue(t){return{...this.default(),multiSelection:!1,selectedValueId:t}}static withMultiSelectedValues(t){return{...this.default(),multiSelection:!0,selectedValueIds:t}}}class Ll{static with(t){return{id:t,creator_name:"Creator Name",ext:"png",external_url:null,file_id:"x1x1x1x1x1x1",file_name:"fileName.png",generic_url:"https://generic.url",height:480,object_type:"IMAGE",file_origin_url:"https://origin.url",preview_url:"https://preview.url",project:23,project_name:null,project_type:"STYLEGUIDE",filesize:256,file_size_formatted:"123.45 MB",status:"FINISHED",title:"A title",width:640,token:"--token--",revision_id:1}}}class On{static get(){return{brand_portal:{enabled:!0,label:"Brandportal Link",url:"/url"}}}}class wt{static with(t){return{...N(On.get().brand_portal,"camel"),...t}}}class Ne{static red(t=767){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Red",name_css:"red",sort:1,r:255,g:0,b:0,hex:"ff0000",alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}static yellow(t=768){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Yellow",name_css:"yellow",sort:2,hex:"ffff00",r:255,g:255,b:0,alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}static green(t=769){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Green",name_css:"green",sort:3,hex:"00ff00",r:0,g:255,b:0,alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}}class Bl{static red(){return{project_color_palette_id:23,red:255,green:0,blue:0,alpha:255}}}class Ul{static red(){return{name:"Red",sort:1,name_css:"red",red:255,green:0,blue:0,alpha:255,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}static yellow(){return{name:"Yellow",sort:2,name_css:"yellow",red:255,green:255,blue:0,alpha:255,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}static green(){return{name:"Green",sort:3,name_css:"green",red:0,green:255,blue:0,alpha:255,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}}class Nl{static with(t,r="Color Palette Name"){return{id:t,name:r,description:"Color Palette Description",colors:[Ne.red(),Ne.yellow(),Ne.green()]}}}class $l{static with(t=322){return{project_id:t,name:"New Color Palette Name",description:"New Color Palette Description"}}}class xl{static with(){return{name:"Updated Color Palette Name",description:"Updated Color Palette Description"}}}class Ln{static with(t,r="Cover Page Name"){return{template:"hub",document_id:"1",brandhome:{id:t,title:r,active:!0,draft:1,enabled:1,url:`/hub/${t}`,hide_in_nav:!1}}}}class De{static with(t,r="Cover Page Name"){const n=Ln.with(t,r);return{...N(n.brandhome,"camel"),template:n.template,documentId:n.document_id,draft:!!n.brandhome.draft,enabled:!!n.brandhome.enabled}}static withLegacy(t,r="Legacy Cover Page"){return{brandhome_draft:!0,brandhome_title:r,brandhome_hide_in_nav:!1}}}class bt{static with(t){return{id:t,creator:9,created:"2022-03-03t15:41:33.000+00:00",modifier:null,modified:null,project_id:345,valid_from:"2022-03-03t15:41:33.000+00:00",valid_to:null,visibility:"private",portal_id:3495,title:`Document ${t}`,slug:`document-${t}`,heading:"Document Dummy heading",subheading:"Document Dummy subHeading",description:null,logo:null,sort:5,lazy:!0,link_type:Ke.Internal,link_url:null,link_settings:null,view_count:0,mode:"DEFAULT",appearance:null,settings:{},logo_file_id:null,logo_settings:[],background_file_id:null,background_settings:[],change_processed:null,change_processed_by:null,change_skipped:null,change_skipped_by:null,change_comment:null,change_comment_by:null,change_title:null,targets:[],token:"a-dummy-token",permanent_link:`/r/document-${t}`,number_of_document_page_categories:0,number_of_uncategorized_document_pages:0}}}class ve{static with(t,r=[]){return{id:t,creator:9,created:"2022-08-15T11:47:47.000+00:00",modifier:null,modified:null,document_id:456,valid_from:"2022-08-15T11:47:47.000+00:00",valid_to:null,title:`Document Category Dummy ${t}`,slug:`document-category-dummy-${t}`,sort:1,number_of_document_pages:r.length}}static withDocumentIdAndNumberOfDocumentPages(t,r,n){return{...ve.with(t),document_id:r,number_of_document_pages:n}}}class ne{static with(t){return N(ve.with(t),"camel")}static withDocumentIdAndNumberOfDocumentPages(t,r,n){return N(ve.withDocumentIdAndNumberOfDocumentPages(t,r,n),"camel")}static withFields(t){return{...t}}}class I{static with(t){return N(bt.with(t),"camel")}static withDocumentGroupId(t,r){return{...N(bt.with(t),"camel"),documentGroupId:r}}static withFields(t){return{...t}}}class Bn{static with(t,r=0){return{id:t,creator:9,created:"2022-07-11 14:00:49",modified:"2022-08-15 07:59:28",modifier:9,valid_to:null,project_id:113,portal_id:175,name:`Document Group Dummy ${t}`,sort:1,number_of_documents:r}}}class oe{static with(t,r=0){return N(Bn.with(t,r),"camel")}static withFields(t){return{...t}}}class $e{static with(t){return{id:t,creator:9,created:"2022-08-15T11:47:57.000+00:00",modifier:null,modified:null,document_id:145,category_id:29,parent_id:null,valid_from:"2022-08-15T11:47:57.000+00:00",valid_to:null,title:`Document Page Dummy ${t}`,slug:`document-page-dummy-${t}`,sort:1,link_type:"INTERNAL",link_url:null,view_count:0,visibility:We.Everyone,change_processed:null,change_processed_by:null,change_skipped:null,change_skipped_by:null,change_comment:null,change_comment_by:null,change_title:null,targets:null,permanent_link:`/r/document-page-${t}`}}static withFields(t){return{...$e.with(t.id),...t}}}class Un{static with(t){return{page:{id:t,link_type:"INTERNAL",name:"Document page duplicate dummy",sections:[],url:`document-page-duplicate-dummy-${t}`,visibility:"EVERYONE"}}}}class L{static with(t){return N($e.with(t),"camel")}static withFields(t){return{...L.with(t.id),...t}}}class Nn{static with(t){return N(Un.with(t).page,"camel")}}class El{static with(t){return{id:t,creator:9,created:"2022-04-04T15:36:36.000+00:00",modifier:9,modified:"2022-04-04T15:36:43.000+00:00",document_id:1,page_id:6,revision:null,valid_from:"2022-04-04T15:36:36.000+00:00",valid_to:null,title:`Document Section Dummy ${t}`,slug:`document-section-dummy-${t}`,sort:1,permanent_link:`/r/document-section-${t}`}}}class xe{static with(t){return{id:t,title:`Document Section Dummy ${t}`,slug:`document-section-dummy-${t}`,sort:1,permanentLink:`/r/document-section-${t}`}}}class Zl{static successWith(t){return{result:{success:!0,data:t}}}static success(){return{result:{success:!0,data:void 0}}}static failure(){return{result:{success:!1,data:void 0}}}}class ae{static target(t){return{checked:!1,disabled:!1,indeterminate:!1,label:String(t),target:{account_id:1,asset_ids:[],created:"2022-06-10T12:35:52.000+00:00",creator:1,description:"Target description",group_ids:[],id:t,modified:null,modifier:null,name:`Target ${t}`,sort:1,total_groups:null,total_links:null,total_users:null,user_ids:[]},value:t}}}class $n{static with(t){return{appearance:{},background_file_id:null,background_url:null,heading:null,id:t,link_type:null,link_url:null,logo_file_id:null,logo_url:null,mode:null,portal_title:"Portal title",subheading:null,success:!0,targets:{disabled:[],has_selected_targets:!0,targets:[ae.target(1),ae.target(2),ae.target(3)]},title:"Test document"}}}class jl{static with(t){return{success:!0,data:!0,targets:t}}}class xn{static with(t){return{default:!1,disabled:[],has_selected_targets:!0,id:t,success:!0,targets:[ae.target(1),ae.target(2),ae.target(3)]}}}class En{static with(t){return N($n.with(t).targets,"camel")}}class Zn{static with(t){return N(xn.with(t),"camel")}}class yt{static with(t){return{success:!0,data:!0,targets:t}}}class zl{static with(t){return{asset_created:"2022-04-06",asset_modified:"2022-04-06",categories:[],description:"A description",height:480,id:t,name:"A template",preview:"https://preview.url",project:23,project_name:"A project",project_type:"A project type",published:1,screen_id:1,sector:"A sector",token:"--token--",unit:"px",width:640}}}class Kl{static with(t){return{id:t,title:"A template",description:"A description",previewUrl:"https://preview.url",projectId:23,height:480,width:640,published:!0}}}class Wl{static with(t){return{id:t,name:"Frontify Dummy User",email:"test@frontify.test",created:"2020-01-01T00:00:00.000Z",image:{image:"https://dummy.frontify.test/image.png",original:"https://dummy.frontify.test/original_image.png",x:"10",y:"20",width:"30",height:"40"},organization:"Frontify",role:"user",timezone:"UTC",language:"en"}}}function Xl(e,t){const r=dn(t??{}),n=s=>p.createElement(e,{appBridge:r,...s}),a=e.displayName||e.name||"Component";return n.displayName=`withAppBridgeBlockStubs(${a})`,[n,r]}function Rl(e,t){const r=Mn(t??{}),n=s=>p.createElement(e,{appBridge:r,...s}),a=e.displayName||e.name||"Component";return n.displayName=`withAppBridgeThemeStubs(${a})`,[n,r]}k.enableMapSet(),c.AppBridgeCreateAsset=oc,c.AppBridgePlatformApp=Rr,c.AssetApiDummy=Ml,c.AssetBulkDownloadState=Vr,c.AssetChooserObjectType=Re,c.AssetChooserOptionsDummy=Ol,c.AssetChooserProjectType=Xe,c.AssetChooserResultDummy=Ll,c.AssetDummy=Oe,c.BrandportalLinkApiDummy=On,c.BrandportalLinkDummy=wt,c.BulkDownloadDummy=gt,c.ColorApiCreateDummy=Bl,c.ColorApiDummy=Ne,c.ColorApiPatchDummy=Ul,c.ColorCreateDummy=gl,c.ColorDummy=B,c.ColorPaletteApiCreateDummy=$l,c.ColorPaletteApiDummy=Nl,c.ColorPaletteApiPatchDummy=xl,c.ColorPaletteCreateDummy=hl,c.ColorPaletteDummy=$,c.ColorPalettePatchDummy=wl,c.ColorPatchDummy=fl,c.CoverPageApiDummy=Ln,c.CoverPageDummy=De,c.DocumentApiDummy=bt,c.DocumentCategoryApiDummy=ve,c.DocumentCategoryDummy=ne,c.DocumentDummy=I,c.DocumentGroupApiDummy=Bn,c.DocumentGroupDummy=oe,c.DocumentPageApiDummy=$e,c.DocumentPageDummy=L,c.DocumentPageDuplicateApiDummy=Un,c.DocumentPageDuplicateDummy=Nn,c.DocumentPageTargetsApiDummy=xn,c.DocumentPageTargetsDummy=Zn,c.DocumentPageVisibility=We,c.DocumentSectionApiDummy=El,c.DocumentSectionDummy=xe,c.DocumentTargetsApiDummy=$n,c.DocumentTargetsDummy=En,c.FetchError=Er,c.FileExtension=o,c.FileExtensionSets=jn,c.FileType=Ct,c.GuidelineSearchResultApiDummy=mn,c.GuidelineSearchResultDummy=Le,c.GuidelineSearchResultTypeMap=zn,c.HttpClient=Gt,c.HttpClientError=It,c.HttpUtilResponseDummy=Zl,c.InitializationError=mt,c.LinkSettingsDisplay=vt,c.LinkSettingsIconPosition=Tt,c.LinkType=Ke,c.SUBSCRIBE_TIMEOUT=dt,c.SingleTargetApiDummy=ae,c.TemplateApiLegacyDummy=zl,c.TemplateDummy=cn,c.TemplateLegacyDummy=Kl,c.TerrificEvent=_t,c.TimeoutReachedError=lt,c.Topic=O,c.UpdateTargetsApiDummy=jl,c.UpdateTargetsDummy=yt,c.UserApiDummy=Wl,c.UserDummy=un,c.ValidationError=jr,c.closeAssetChooser=cc,c.closeTemplateChooser=gc,c.compareObjects=J,c.convertObjectCase=N,c.createAsset=ac,c.downloadAsset=dc,c.generateRandomString=Te,c.getAppBridgeBlockStub=dn,c.getAppBridgePlatformAppStub=Al,c.getAppBridgeThemeStub=Mn,c.getAssetResourceInformation=sc,c.getCurrentUser=ic,c.getDatasetByClassName=Xn,c.getDatasetByElement=Pt,c.getMimeType=Rn,c.isObject=be,c.mergeDeep=Q,c.mimeTypes=St,c.notify=Z,c.openAssetChooser=uc,c.openAssetViewer=lc,c.openConnection=Xr,c.openNavigationManager=mc,c.openNewPublication=fc,c.openTemplateChooser=pc,c.rgbObjectToRgbString=Wn,c.rgbStringToRgbObject=Kn,c.subscribe=R,c.useAssetBulkDownload=hc,c.useAssetChooser=wc,c.useAssetUpload=Dc,c.useAssetViewer=vc,c.useBlockAssets=Tc,c.useBlockSettings=_c,c.useBlockTemplates=Cc,c.useBrandportalLink=Sc,c.useCategorizedDocumentPages=Ic,c.useColorPalettes=Oc,c.useColors=Lc,c.useCoverPage=Bc,c.useDocumentCategories=Uc,c.useDocumentGroups=xc,c.useDocumentPageTargets=zc,c.useDocumentSection=Wc,c.useDocumentTargets=Xc,c.useEditorState=Vc,c.useFileInput=Hc,c.useFileUpload=Jr,c.useGroupedDocuments=Yc,c.useGuidelineActions=Fc,c.useNavigationManager=qc,c.usePageTemplateSettings=el,c.usePlatformAppBridge=pl,c.usePrivacySettings=tl,c.useReadyForPrint=rl,c.useTemplateAssets=nl,c.useTemplateChooser=ol,c.useThemeAssets=on,c.useThemeSettings=an,c.useUncategorizedDocumentPages=al,c.useUngroupedDocuments=cl,c.withAppBridgeBlockStubs=Xl,c.withAppBridgeThemeStubs=Rl,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
